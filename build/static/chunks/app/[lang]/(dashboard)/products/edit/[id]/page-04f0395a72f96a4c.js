(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8003],{37169:function(){},88745:function(e,i,l){Promise.resolve().then(l.bind(l,10429))},10429:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return K}});var t=l(59533),r=l(91771),s=l(29900),a=l(84323),n=e=>{let{handleDiscardProduct:i,handleEditProduct:l,productData:r}=e;return(0,t.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Z,{variant:"h4",className:"mbe-1",children:"Update"}),(0,t.jsx)(a.Z,{children:"Orders placed across your store"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[(0,t.jsx)(s.Z,{variant:"outlined",color:"error",onClick:i,children:"Cancel"}),(0,t.jsx)(s.Z,{variant:"contained",onClick:l,children:"Update"})]})]})},c=l(48111),d=l(76778),o=l(11124),u=l(54323),x=l(61732),h=l(72860),m=l.n(h),p=l(9772),g=l(67827),v=l(36706),j=l(40729),f=l(16798),Z=l(18308);l(28686),l(82156);var y=l(31229);let b=e=>{let{editor:i}=e;return i?(0,t.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[(0,t.jsx)(Z.Z,{...i.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleBold().run(),children:(0,t.jsx)("i",{className:m()("ri-bold",{"text-textSecondary":!i.isActive("bold")})})}),(0,t.jsx)(Z.Z,{...i.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleUnderline().run(),children:(0,t.jsx)("i",{className:m()("ri-underline",{"text-textSecondary":!i.isActive("underline")})})}),(0,t.jsx)(Z.Z,{...i.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleItalic().run(),children:(0,t.jsx)("i",{className:m()("ri-italic",{"text-textSecondary":!i.isActive("italic")})})}),(0,t.jsx)(Z.Z,{...i.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleStrike().run(),children:(0,t.jsx)("i",{className:m()("ri-strikethrough",{"text-textSecondary":!i.isActive("strike")})})}),(0,t.jsx)(Z.Z,{...i.isActive("bulletList")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleBulletList().run(),children:(0,t.jsx)("i",{className:m()("ri-list-unordered",{"text-textSecondary":!i.isActive("bulletList")})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("left").run(),children:(0,t.jsx)("i",{className:m()("ri-align-left",{"text-textSecondary":!i.isActive({textAlign:"left"})})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("center").run(),children:(0,t.jsx)("i",{className:m()("ri-align-center",{"text-textSecondary":!i.isActive({textAlign:"center"})})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("right").run(),children:(0,t.jsx)("i",{className:m()("ri-align-right",{"text-textSecondary":!i.isActive({textAlign:"right"})})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("justify").run(),children:(0,t.jsx)("i",{className:m()("ri-align-justify",{"text-textSecondary":!i.isActive({textAlign:"justify"})})})})]}):null};var N=e=>{let{setTitle:i,title:l,setSNo:s,sNo:n,setDescription:h,description:m,errors:Z,productData:N}=e,k=(0,p.jE)({extensions:[g.V,j.V.configure({placeholder:"Write something here..."}),f.P.configure({types:["heading","paragraph"]}),v.v],content:m,onUpdate:e=>{let{editor:i}=e;h(i.getHTML())}});return(0,y.useEffect)(()=>{N&&(i(null==N?void 0:N.title),s(null==N?void 0:N.serial_number),h(null==N?void 0:N.description_html))},[N]),(0,y.useEffect)(()=>{k&&m!==k.getHTML()&&k.commands.setContent(m||"")},[m,k]),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Product Information"}),(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)(r.ZP,{container:!0,spacing:5,className:"mbe-5",children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(x.Z,{fullWidth:!0,label:"Product Name",placeholder:"Enter Product Name",value:l,onChange:e=>i(e.target.value),error:null!=Z&&!!Z.title,helperText:null==Z?void 0:Z.title})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsx)(x.Z,{fullWidth:!0,label:"Serial Number",placeholder:"0123-4567",value:n,onChange:e=>s(e.target.value),error:null!=Z&&!!Z.sNo,helperText:null==Z?void 0:Z.sNo})})]}),(0,t.jsx)(a.Z,{className:"mbe-1",children:"Description (Optional)"}),(0,t.jsx)(d.Z,{className:"p-0 border shadow-none",children:(0,t.jsxs)(u.Z,{className:"p-0",children:[(0,t.jsx)(b,{editor:k}),(0,t.jsx)(c.Z,{className:"mli-5"}),(0,t.jsx)(p.kg,{editor:k,className:"bs-[135px] overflow-y-auto flex "})]})})]})]})},k=l(84448),P=l(71491),A=l(87616),S=l(73815),C=l(62934);l(83762);var _=l(6083),w=l(70337),I=l(45641),D=l(29349),E=l(20397),O=l(12895),U=l(76422);let L=(0,S.ZP)(w.Z)(e=>{let{theme:i}=e;return{"& .dropzone":{minHeight:"unset",padding:i.spacing(12),[i.breakpoints.down("sm")]:{paddingInline:i.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:i.typography.body1.fontWeight}}}});var z=e=>{let{files:i,setFiles:l,productData:r}=e,[n,c]=(0,y.useState)([]),[x,h]=(0,y.useState)(""),[m,p]=(0,y.useState)(!1),[g]=(0,I.D)(D.si),[v]=(0,I.D)(D.pE),[j]=(0,I.D)(D.Sf),{setGlobalMsg:f}=(0,O.q)(),{getRootProps:Z,getInputProps:b}=(0,C.uI)({onDrop:e=>{p(!0),e.filter(e=>e.type.startsWith("image")).length!==e.length?h("Only image files are allowed."):h(""),l(i=>[...i,...null==e?void 0:e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)}))])}});(0,y.useEffect)(()=>{if(null==r?void 0:r.product_medias){var e;l(null==r?void 0:null===(e=r.product_medias)||void 0===e?void 0:e.map(e=>({media_url:null==e?void 0:e.media_url,id:null==e?void 0:e.id,type:"image",name:"image"})))}},[r]);let N=e=>(null==e?void 0:e.media_url)?(0,t.jsx)("img",{width:38,height:38,alt:null==e?void 0:e.name,src:e.media_url}):e.type.startsWith("image")?(0,t.jsx)("img",{width:38,height:38,alt:e.name,src:URL.createObjectURL(e)}):(0,t.jsx)("i",{className:"ri-file-text-line"}),S=async()=>{try{if(m){let e=null==i?void 0:i.filter(e=>!e.id);null==e||e.map(async e=>{let i=await j({variables:{content_type:"image",folder:"products"}}),l=await (0,E.c)(e,i.data.getFileUploadUrl.fileUploadUrl,"image");v({variables:{data:{product_id:null==r?void 0:r.id,media_type:"image",media_url:l}}})})}f("✅ Image Uploaded")}catch(e){console.log("Image Upload error ",e)}},w=async e=>{m?l([...i.filter(i=>i.name!==e.name)]):(m||await g({variables:{id:null==e?void 0:e.id}}),l([...i.filter(i=>i.id!==e.id)]))},z=null==i?void 0:i.map(e=>(0,t.jsxs)(A.ZP,{className:"pis-4 plb-3",children:[(0,t.jsx)("div",{className:"file-details",children:(0,t.jsx)("div",{className:"file-preview",children:N(e)})}),(0,t.jsx)(k.Z,{onClick:()=>w(e),children:(0,t.jsx)("i",{className:"ri-close-line text-xl"})})]},null==e?void 0:e.id));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L,{children:(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Product Image",sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)("div",{...Z({className:"dropzone"}),children:[(0,t.jsx)("input",{...b()}),(0,t.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[(0,t.jsx)(_.default,{variant:"rounded",skin:"light",color:"secondary",children:(0,t.jsx)("i",{className:"ri-upload-2-line"})}),(0,t.jsx)(a.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),(0,t.jsx)(a.Z,{color:"text.disabled",children:"or"}),(0,t.jsx)(s.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),x&&(0,t.jsx)(a.Z,{color:"error",variant:"body2",children:x}),(null==i?void 0:i.length)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.Z,{children:z}),(0,t.jsx)("div",{className:"buttons",children:(0,t.jsx)(s.Z,{color:"primary",variant:"contained",onClick:S,children:"Image Update"})})]}):null]})]})}),(0,t.jsx)(U.Z,{})]})},T=l(83379),W=l(60753),B=l(6532),H=l(37911),F=l(5176),M=l(40877),R=l(31029),J=l(64094),V=e=>{var i;let{status:l,setStatus:r,brandId:s,setBrandId:a,catId:n,setCatId:c,errors:h,productData:m}=e,{data:p}=(0,M.kJ)(R.BD),{data:g}=(0,M.kJ)(R.xH);return(0,y.useEffect)(()=>{m&&(a(m.brand.id),c((null==g?void 0:g.product_categories.find(e=>e.id===m.product_category.id))||null))},[m,g]),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Organize"}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[s&&(0,t.jsxs)(T.Z,{fullWidth:!0,children:[(0,t.jsx)(W.Z,{children:"Select Product Brand"}),(0,t.jsx)(H.Z,{label:"Select Vendor",value:s,onChange:e=>a(e.target.value),error:null!=h&&!!h.brandId,helpertext:null==h?void 0:h.brandId,children:null==p?void 0:null===(i=p.brands)||void 0===i?void 0:i.map((e,i)=>(0,t.jsx)(B.Z,{value:null==e?void 0:e.id,children:null==e?void 0:e.title},i))}),(0,t.jsx)(J.Z,{sx:{color:"red"},children:null==h?void 0:h.brandId})]}),n?(0,t.jsx)(F.Z,{value:n,onChange:(e,i)=>{c(i||null)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:(null==g?void 0:g.product_categories)||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.title)||"",renderOption:(e,i,l)=>{let{selected:t}=l;return(0,y.createElement)("li",{...e,key:i.id},i.title)},renderInput:e=>(0,t.jsx)(x.Z,{...e,label:"Category",placeholder:"select category"})}):(0,t.jsx)(F.Z,{value:"",onChange:(e,i)=>{c(i||null)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:(null==g?void 0:g.product_categories)||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.title)||"",renderOption:(e,i,l)=>{let{selected:t}=l;return(0,y.createElement)("li",{...e,key:i.id},i.title)},renderInput:e=>(0,t.jsx)(x.Z,{...e,label:"Category",placeholder:"select category"})})]})})]})};l(97392);var q=l(42821),Q=e=>{let{price:i,setPrice:l,errors:r,productData:s}=e;return(0,y.useEffect)(()=>{s&&l(null==s?void 0:s.price)},[s]),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Pricing"}),(0,t.jsx)(u.Z,{children:(0,t.jsx)(q.Z,{children:(0,t.jsx)(x.Z,{fullWidth:!0,label:"Base Price",placeholder:"Enter Base Price",className:"mbe-5",value:i,onChange:e=>l(e.target.value),error:null!=r&&!!r.price,helperText:null==r?void 0:r.price})})})]})},Y=l(66873),G=l(61250),K=()=>{let{id:e}=(0,G.useParams)(),i=(0,G.useRouter)(),{setGlobalMsg:l,loading:s,setLoading:a}=(0,O.q)(),[c,d]=(0,y.useState)(),[o,u]=(0,y.useState)(),[x,h]=(0,y.useState)(),[m,p]=(0,y.useState)(),[g,v]=(0,y.useState)(),[j,f]=(0,y.useState)(),[Z,b]=(0,y.useState)(),[k,P]=(0,y.useState)([]),[A]=(0,I.D)(D.J9,{fetchPolicy:"network-only",refetchQueries:[R.tT]}),[S]=(0,I.D)(D.Sf),{data:C}=(0,M.kJ)(R.yZ,{variables:{id:e}}),_=null==C?void 0:C.products_by_pk,w=async()=>{a(!0);try{await A({variables:{id:null==_?void 0:_.id,title:c,description_html:o,brand_id:x,category_id:null==m?void 0:m.id,serial_number:j,price:g}}),a(!1),l("✅ Product has been updated"),i.back()}catch(e){l("❌ Edit Product Error"),console.log(e.response)}};return s?(0,t.jsx)(Y.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(n,{handleDiscardProduct:()=>{i.back()},handleEditProduct:w,productData:_})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(N,{setTitle:d,title:c,setSNo:f,sNo:j,setDescription:u,description:o,errors:Z,productData:_})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(z,{files:k,setFiles:P,productData:_})})]})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(Q,{price:g,setPrice:v,errors:Z,productData:_})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(V,{brandId:x,setBrandId:h,catId:m,setCatId:p,errors:Z,productData:_})})]})})]}),(0,t.jsx)(U.Z,{})]})}}},function(e){e.O(0,[5392,709,6777,7382,9423,6086,5278,6353,1378,8190,5266,1802,1732,6479,9276,9124,1166,1771,3302,3347,1711,6772,1467,2392,8942,5534,9771,8560,7264,617,4005,9846,4170,6842,1744],function(){return e(e.s=88745)}),_N_E=e.O()}]);