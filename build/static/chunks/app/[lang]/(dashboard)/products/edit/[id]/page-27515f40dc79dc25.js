(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8003],{37169:function(){},88745:function(e,i,l){Promise.resolve().then(l.bind(l,10429))},10429:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return ee}});var t=l(59533),r=l(91771),a=l(29900),n=l(84323),s=e=>{let{handleDiscardProduct:i,handleEditProduct:l,productData:r}=e;return(0,t.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{variant:"h4",className:"mbe-1",children:"Update"}),(0,t.jsx)(n.Z,{children:"Products placed across your store"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[(0,t.jsx)(a.Z,{variant:"outlined",color:"error",onClick:i,children:"Cancel"}),(0,t.jsx)(a.Z,{variant:"contained",onClick:l,children:"Update"})]})]})},d=l(48111),c=l(76778),o=l(11124),u=l(54323),x=l(61732),m=l(72860),h=l.n(m),p=l(9772),g=l(41238),v=l(36706),j=l(40729),f=l(16798),Z=l(8689),y=l(13659),b=l(62836),P=l(18308);l(28686),l(82156);var N=l(31229);let k=e=>{let{editor:i}=e;return i?(0,t.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[(0,t.jsx)(P.Z,{...i.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleBold().run(),children:(0,t.jsx)("i",{className:h()("ri-bold",{"text-textSecondary":!i.isActive("bold")})})}),(0,t.jsx)(P.Z,{...i.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleUnderline().run(),children:(0,t.jsx)("i",{className:h()("ri-underline",{"text-textSecondary":!i.isActive("underline")})})}),(0,t.jsx)(P.Z,{...i.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleItalic().run(),children:(0,t.jsx)("i",{className:h()("ri-italic",{"text-textSecondary":!i.isActive("italic")})})}),(0,t.jsx)(P.Z,{...i.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleStrike().run(),children:(0,t.jsx)("i",{className:h()("ri-strikethrough",{"text-textSecondary":!i.isActive("strike")})})}),(0,t.jsx)(P.Z,{...i.isActive("bulletList")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleBulletList().run(),children:(0,t.jsx)("i",{className:h()("ri-list-unordered",{"text-textSecondary":!i.isActive("bulletList")})})}),(0,t.jsx)(P.Z,{...i.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("left").run(),children:(0,t.jsx)("i",{className:h()("ri-align-left",{"text-textSecondary":!i.isActive({textAlign:"left"})})})}),(0,t.jsx)(P.Z,{...i.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("center").run(),children:(0,t.jsx)("i",{className:h()("ri-align-center",{"text-textSecondary":!i.isActive({textAlign:"center"})})})}),(0,t.jsx)(P.Z,{...i.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("right").run(),children:(0,t.jsx)("i",{className:h()("ri-align-right",{"text-textSecondary":!i.isActive({textAlign:"right"})})})}),(0,t.jsx)(P.Z,{...i.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("justify").run(),children:(0,t.jsx)("i",{className:h()("ri-align-justify",{"text-textSecondary":!i.isActive({textAlign:"justify"})})})})]}):null};g.V.configure({bulletList:{parseHTML:()=>[{tag:"p"}],renderHTML:()=>["p",0]},orderedList:{parseHTML:()=>[{tag:"p"}],renderHTML:()=>["p",0]}}),Z.Z.extend({renderHTML(e){let{HTMLAttributes:i}=e;return["p",i,0]}});var S=e=>{let{setTitle:i,title:l,setSNo:a,sNo:s,setDescription:m,description:h,errors:P,productData:S,warrantyPeriod:_,setWarrantyPeriod:A}=e,C=(0,p.jE)({extensions:[g.V.configure({paragraph:!1}),v.v,f.P.configure({types:["heading","paragraph"]}),j.V.configure({placeholder:"Write something here..."}),Z.Z.extend({renderHTML(e){let{HTMLAttributes:i}=e;return["p",i,0]}}),b.ZP.extend({renderHTML(e){let{HTMLAttributes:i}=e;return["ul",i,0]}}),y.Z.extend({renderHTML(e){let{HTMLAttributes:i}=e;return["li",i,0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem("listItem"),Tab:()=>this.editor.commands.sinkListItem("listItem"),"Shift-Tab":()=>this.editor.commands.liftListItem("listItem")}}})],content:h,onUpdate:e=>{let{editor:i}=e;m(i.getHTML())}});return(0,N.useEffect)(()=>{C&&h!==C.getHTML()&&C.commands.setContent(h||"")},[h,C]),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(o.Z,{title:"Product Information"}),(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)(r.ZP,{container:!0,spacing:5,className:"mbe-5",children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(x.Z,{fullWidth:!0,label:"Product Name",placeholder:"Enter Product Name",value:l,onChange:e=>i(e.target.value),error:null!=P&&!!P.title,helperText:null==P?void 0:P.title})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsx)(x.Z,{fullWidth:!0,label:"Warranty Period",placeholder:"0123-4567",value:_,onChange:e=>A(e.target.value),error:null!=P&&!!P.warrantyPeriod,helperText:null==P?void 0:P.warrantyPeriod})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsx)(x.Z,{fullWidth:!0,label:"Serial Number",placeholder:"0123-4567",value:s,onChange:e=>a(e.target.value),error:null!=P&&!!P.sNo,helperText:null==P?void 0:P.sNo})})]}),(0,t.jsx)(n.Z,{className:"mbe-1",children:"Description "}),(0,t.jsx)(c.Z,{className:"p-0 border shadow-none",children:(0,t.jsxs)(u.Z,{className:"p-0",children:[(0,t.jsx)(k,{editor:C}),(0,t.jsx)(d.Z,{className:"mli-5"}),(0,t.jsx)(p.kg,{editor:C,className:"bs-[135px] overflow-y-auto flex "})]})})]})]})},_=l(84448),A=l(71491),C=l(87616),w=l(73815),I=l(62934);l(83762);var L=l(6083),T=l(70337),D=l(45641),E=l(29349),U=l(20397),H=l(12895),z=l(76422);let M=(0,w.ZP)(T.Z)(e=>{let{theme:i}=e;return{"& .dropzone":{minHeight:"unset",padding:i.spacing(12),[i.breakpoints.down("sm")]:{paddingInline:i.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:i.typography.body1.fontWeight}}}});var W=e=>{let{files:i,setFiles:l,productData:r}=e,[s,d]=(0,N.useState)([]),[x,m]=(0,N.useState)(""),[h,p]=(0,N.useState)(!1),[g]=(0,D.D)(E.si,{fetchPolicy:"network-only"}),[v]=(0,D.D)(E.pE,{fetchPolicy:"network-only"}),[j]=(0,D.D)(E.Sf),{setGlobalMsg:f}=(0,H.q)(),{getRootProps:Z,getInputProps:y}=(0,I.uI)({onDrop:e=>{p(!0),e.filter(e=>e.type.startsWith("image")).length!==e.length?m("Only image files are allowed."):m(""),l(i=>[...i,...null==e?void 0:e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)}))])}});(0,N.useEffect)(()=>{if(null==r?void 0:r.product_medias){var e;l(null==r?void 0:null===(e=r.product_medias)||void 0===e?void 0:e.map(e=>({media_url:null==e?void 0:e.media_url,id:null==e?void 0:e.id,type:"image",name:"image"})))}},[r]);let b=e=>(null==e?void 0:e.media_url)?(0,t.jsx)("img",{width:38,height:38,alt:null==e?void 0:e.name,src:e.media_url}):e.type.startsWith("image")?(0,t.jsx)("img",{width:38,height:38,alt:e.name,src:URL.createObjectURL(e)}):(0,t.jsx)("i",{className:"ri-file-text-line"}),P=async()=>{try{if(h){let e=null==i?void 0:i.filter(e=>!e.id);null==e||e.map(async e=>{let i=await j({variables:{content_type:"image",folder:"products"}}),l=await (0,U.c)(e,i.data.getFileUploadUrl.fileUploadUrl,"image");await v({variables:{data:{product_id:null==r?void 0:r.id,media_type:"image",media_url:l}}})})}f("✅ Image Uploaded")}catch(e){f("❌ Image Upload Error",e),console.log("Image Upload error ",e)}},k=async e=>{h?l([...i.filter(i=>i.name!==e.name)]):(h||await g({variables:{id:null==e?void 0:e.id}}),l([...i.filter(i=>i.id!==e.id)]))},S=null==i?void 0:i.map(e=>(0,t.jsxs)(C.ZP,{className:"pis-4 plb-3",children:[(0,t.jsx)("div",{className:"file-details",children:(0,t.jsx)("div",{className:"file-preview",children:b(e)})}),(0,t.jsx)(_.Z,{onClick:()=>k(e),children:(0,t.jsx)("i",{className:"ri-close-line text-xl"})})]},null==e?void 0:e.id));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M,{children:(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(o.Z,{title:"Product Image",sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)("div",{...Z({className:"dropzone"}),children:[(0,t.jsx)("input",{...y()}),(0,t.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[(0,t.jsx)(L.default,{variant:"rounded",skin:"light",color:"secondary",children:(0,t.jsx)("i",{className:"ri-upload-2-line"})}),(0,t.jsx)(n.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),(0,t.jsx)(n.Z,{color:"text.disabled",children:"or"}),(0,t.jsx)(a.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),x&&(0,t.jsx)(n.Z,{color:"error",variant:"body2",children:x}),(null==i?void 0:i.length)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Z,{children:S}),(0,t.jsx)("div",{className:"buttons",children:(0,t.jsx)(a.Z,{color:"primary",variant:"contained",onClick:P,children:"Image Update"})})]}):null]})]})}),(0,t.jsx)(z.Z,{})]})},O=l(83379),B=l(60753),F=l(6532),R=l(37911),J=l(5176),V=l(40877),q=l(31029),K=l(64094),Q=e=>{var i;let{status:l,setStatus:r,brandId:a,setBrandId:n,catId:s,setCatId:d,errors:m,productData:h}=e,{data:p}=(0,V.kJ)(q.BD),{data:g}=(0,V.kJ)(q.xH);return(0,N.useEffect)(()=>{h&&d((null==g?void 0:g.product_categories.find(e=>e.id===h.product_category.id))||null)},[h,g]),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(o.Z,{title:"Organize"}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[a&&(0,t.jsxs)(O.Z,{fullWidth:!0,children:[(0,t.jsx)(B.Z,{children:"Select Product Brand"}),(0,t.jsx)(R.Z,{label:"Select Vendor",value:a,onChange:e=>n(e.target.value),error:null!=m&&!!m.brandId,helpertext:null==m?void 0:m.brandId,children:null==p?void 0:null===(i=p.brands)||void 0===i?void 0:i.map((e,i)=>(0,t.jsx)(F.Z,{value:null==e?void 0:e.id,children:null==e?void 0:e.title},i))}),(0,t.jsx)(K.Z,{sx:{color:"red"},children:null==m?void 0:m.brandId})]}),(0,t.jsx)(J.Z,{value:s||null,onChange:(e,i)=>{d(i||null)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:(null==g?void 0:g.product_categories)||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.title)||"",renderOption:(e,i,l)=>{let{selected:t}=l;return(0,N.createElement)("li",{...e,key:i.id},i.title)},renderInput:e=>(0,t.jsx)(x.Z,{...e,label:"Category",placeholder:"Select category"})})]})})]})};l(97392);var Y=l(42821),G=e=>{let{dealerPrice:i,consumerPrice:l,setDealerPrice:r,setConsumerPrice:a,errors:n,productData:s}=e;return(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(o.Z,{title:"Pricing"}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)(Y.Z,{children:[(0,t.jsx)(x.Z,{fullWidth:!0,type:"number",label:"Dealer Price",placeholder:"Enter Dealer Price",className:"mbe-5",value:i,onChange:e=>r(e.target.value),error:null!=n&&!!n.dealerPrice,helperText:null==n?void 0:n.dealerPrice}),(0,t.jsx)(x.Z,{fullWidth:!0,type:"number",label:"Consumer Price",placeholder:"Enter Consumer Price",className:"mbe-5",value:l,onChange:e=>a(e.target.value),error:null!=n&&!!n.consumerPrice,helperText:null==n?void 0:n.consumerPrice})]})})]})},X=l(61250),$=l(66873),ee=()=>{let{id:e}=(0,X.useParams)(),i=(0,X.useRouter)(),{setGlobalMsg:l,loading:a,setLoading:n}=(0,H.q)(),[d,c]=(0,N.useState)(),[o,u]=(0,N.useState)(),[x,m]=(0,N.useState)(),[h,p]=(0,N.useState)(),[g,v]=(0,N.useState)(),[j,f]=(0,N.useState)(),[Z,y]=(0,N.useState)(),[b,P]=(0,N.useState)(),[k,_]=(0,N.useState)(),[A,C]=(0,N.useState)([]),[w]=(0,D.D)(E.J9,{fetchPolicy:"network-only",refetchQueries:[q.tT]}),[I]=(0,D.D)(E.Sf),{data:L}=(0,V.kJ)(q.yZ,{variables:{id:e}}),T=null==L?void 0:L.products_by_pk;(0,N.useEffect)(()=>{T&&(c(null==T?void 0:T.title),y(null==T?void 0:T.serial_number),P(null==T?void 0:T.warranty_period),u(null==T?void 0:T.description_html),m(null==T?void 0:T.brand_id),v(null==T?void 0:T.dealer_price),f(null==T?void 0:T.consumer_price))},[T]);let U=async()=>{n(!0);try{await w({variables:{id:null==T?void 0:T.id,title:d,description_html:o,brand_id:x,category_id:null==h?void 0:h.id,serial_number:Z,warranty_period:b,dealer_price:Number(g),consumer_price:Number(j)}}),n(!1),l("✅ Product has been updated")}catch(e){l("❌ Edit Product Error"),console.log(e.response)}};return a?(0,t.jsx)($.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(s,{handleDiscardProduct:()=>{i.back()},handleEditProduct:U,productData:T})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(S,{setTitle:c,title:d,setSNo:y,sNo:Z,setDescription:u,description:o,warrantyPeriod:b,setWarrantyPeriod:P,errors:k,productData:T})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(W,{files:A,setFiles:C,productData:T})})]})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(G,{errors:k,productData:T,dealerPrice:g,setDealerPrice:v,consumerPrice:j,setConsumerPrice:f})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(Q,{brandId:x,setBrandId:m,catId:h,setCatId:p,errors:k,productData:T})})]})})]}),(0,t.jsx)(z.Z,{})]})}}},function(e){e.O(0,[5392,709,6777,7382,9423,6086,5278,6353,1378,8190,5266,1802,1732,6479,9276,9124,1166,1771,3302,3347,1711,6772,1467,2392,8942,1668,5176,7264,7212,8503,911,4170,6842,1744],function(){return e(e.s=88745)}),_N_E=e.O()}]);