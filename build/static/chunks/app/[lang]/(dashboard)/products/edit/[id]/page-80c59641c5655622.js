(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8003],{37169:function(){},88745:function(e,i,l){Promise.resolve().then(l.bind(l,10429))},10429:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return K}});var t=l(59533),r=l(91771),a=l(29900),s=l(84323),n=e=>{let{handleDiscardProduct:i,handleEditProduct:l,productData:r}=e;return(0,t.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(s.Z,{variant:"h4",className:"mbe-1",children:"Update"}),(0,t.jsx)(s.Z,{children:"Products placed across your store"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[(0,t.jsx)(a.Z,{variant:"outlined",color:"error",onClick:i,children:"Cancel"}),(0,t.jsx)(a.Z,{variant:"contained",onClick:l,children:"Update"})]})]})},c=l(48111),d=l(76778),o=l(11124),u=l(54323),x=l(61732),h=l(72860),m=l.n(h),p=l(9772),v=l(67827),j=l(36706),g=l(40729),f=l(16798),Z=l(18308);l(28686),l(82156);var y=l(31229);let b=e=>{let{editor:i}=e;return i?(0,t.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[(0,t.jsx)(Z.Z,{...i.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleBold().run(),children:(0,t.jsx)("i",{className:m()("ri-bold",{"text-textSecondary":!i.isActive("bold")})})}),(0,t.jsx)(Z.Z,{...i.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleUnderline().run(),children:(0,t.jsx)("i",{className:m()("ri-underline",{"text-textSecondary":!i.isActive("underline")})})}),(0,t.jsx)(Z.Z,{...i.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleItalic().run(),children:(0,t.jsx)("i",{className:m()("ri-italic",{"text-textSecondary":!i.isActive("italic")})})}),(0,t.jsx)(Z.Z,{...i.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleStrike().run(),children:(0,t.jsx)("i",{className:m()("ri-strikethrough",{"text-textSecondary":!i.isActive("strike")})})}),(0,t.jsx)(Z.Z,{...i.isActive("bulletList")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleBulletList().run(),children:(0,t.jsx)("i",{className:m()("ri-list-unordered",{"text-textSecondary":!i.isActive("bulletList")})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("left").run(),children:(0,t.jsx)("i",{className:m()("ri-align-left",{"text-textSecondary":!i.isActive({textAlign:"left"})})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("center").run(),children:(0,t.jsx)("i",{className:m()("ri-align-center",{"text-textSecondary":!i.isActive({textAlign:"center"})})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("right").run(),children:(0,t.jsx)("i",{className:m()("ri-align-right",{"text-textSecondary":!i.isActive({textAlign:"right"})})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("justify").run(),children:(0,t.jsx)("i",{className:m()("ri-align-justify",{"text-textSecondary":!i.isActive({textAlign:"justify"})})})})]}):null};var N=e=>{let{setTitle:i,title:l,setSNo:a,sNo:n,setDescription:h,description:m,errors:Z,productData:N,warrantyPeriod:P,setWarrantyPeriod:k}=e,S=(0,p.jE)({extensions:[v.V,g.V.configure({placeholder:"Write something here..."}),f.P.configure({types:["heading","paragraph"]}),j.v],content:m,onUpdate:e=>{let{editor:i}=e;h(i.getHTML())}});return(0,y.useEffect)(()=>{S&&m!==S.getHTML()&&S.commands.setContent(m||"")},[m,S]),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Product Information"}),(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)(r.ZP,{container:!0,spacing:5,className:"mbe-5",children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(x.Z,{fullWidth:!0,label:"Product Name",placeholder:"Enter Product Name",value:l,onChange:e=>i(e.target.value),error:null!=Z&&!!Z.title,helperText:null==Z?void 0:Z.title})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsx)(x.Z,{fullWidth:!0,label:"Warranty Period",placeholder:"0123-4567",value:P,onChange:e=>k(e.target.value),error:null!=Z&&!!Z.warrantyPeriod,helperText:null==Z?void 0:Z.warrantyPeriod})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsx)(x.Z,{fullWidth:!0,label:"Serial Number",placeholder:"0123-4567",value:n,onChange:e=>a(e.target.value),error:null!=Z&&!!Z.sNo,helperText:null==Z?void 0:Z.sNo})})]}),(0,t.jsx)(s.Z,{className:"mbe-1",children:"Description "}),(0,t.jsx)(d.Z,{className:"p-0 border shadow-none",children:(0,t.jsxs)(u.Z,{className:"p-0",children:[(0,t.jsx)(b,{editor:S}),(0,t.jsx)(c.Z,{className:"mli-5"}),(0,t.jsx)(p.kg,{editor:S,className:"bs-[135px] overflow-y-auto flex "})]})})]})]})},P=l(84448),k=l(71491),S=l(87616),A=l(73815),_=l(62934);l(83762);var C=l(6083),w=l(70337),I=l(45641),D=l(29349),E=l(20397),U=l(12895),z=l(76422);let L=(0,A.ZP)(w.Z)(e=>{let{theme:i}=e;return{"& .dropzone":{minHeight:"unset",padding:i.spacing(12),[i.breakpoints.down("sm")]:{paddingInline:i.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:i.typography.body1.fontWeight}}}});var T=e=>{let{files:i,setFiles:l,productData:r}=e,[n,c]=(0,y.useState)([]),[x,h]=(0,y.useState)(""),[m,p]=(0,y.useState)(!1),[v]=(0,I.D)(D.si),[j]=(0,I.D)(D.pE),[g]=(0,I.D)(D.Sf),{setGlobalMsg:f}=(0,U.q)(),{getRootProps:Z,getInputProps:b}=(0,_.uI)({onDrop:e=>{p(!0),e.filter(e=>e.type.startsWith("image")).length!==e.length?h("Only image files are allowed."):h(""),l(i=>[...i,...null==e?void 0:e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)}))])}});(0,y.useEffect)(()=>{if(null==r?void 0:r.product_medias){var e;l(null==r?void 0:null===(e=r.product_medias)||void 0===e?void 0:e.map(e=>({media_url:null==e?void 0:e.media_url,id:null==e?void 0:e.id,type:"image",name:"image"})))}},[r]);let N=e=>(null==e?void 0:e.media_url)?(0,t.jsx)("img",{width:38,height:38,alt:null==e?void 0:e.name,src:e.media_url}):e.type.startsWith("image")?(0,t.jsx)("img",{width:38,height:38,alt:e.name,src:URL.createObjectURL(e)}):(0,t.jsx)("i",{className:"ri-file-text-line"}),A=async()=>{try{if(m){let e=null==i?void 0:i.filter(e=>!e.id);null==e||e.map(async e=>{let i=await g({variables:{content_type:"image",folder:"products"}}),l=await (0,E.c)(e,i.data.getFileUploadUrl.fileUploadUrl,"image");j({variables:{data:{product_id:null==r?void 0:r.id,media_type:"image",media_url:l}}})})}f("✅ Image Uploaded")}catch(e){console.log("Image Upload error ",e)}},w=async e=>{m?l([...i.filter(i=>i.name!==e.name)]):(m||await v({variables:{id:null==e?void 0:e.id}}),l([...i.filter(i=>i.id!==e.id)]))},T=null==i?void 0:i.map(e=>(0,t.jsxs)(S.ZP,{className:"pis-4 plb-3",children:[(0,t.jsx)("div",{className:"file-details",children:(0,t.jsx)("div",{className:"file-preview",children:N(e)})}),(0,t.jsx)(P.Z,{onClick:()=>w(e),children:(0,t.jsx)("i",{className:"ri-close-line text-xl"})})]},null==e?void 0:e.id));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L,{children:(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Product Image",sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,t.jsxs)(u.Z,{children:[(0,t.jsxs)("div",{...Z({className:"dropzone"}),children:[(0,t.jsx)("input",{...b()}),(0,t.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[(0,t.jsx)(C.default,{variant:"rounded",skin:"light",color:"secondary",children:(0,t.jsx)("i",{className:"ri-upload-2-line"})}),(0,t.jsx)(s.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),(0,t.jsx)(s.Z,{color:"text.disabled",children:"or"}),(0,t.jsx)(a.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),x&&(0,t.jsx)(s.Z,{color:"error",variant:"body2",children:x}),(null==i?void 0:i.length)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{children:T}),(0,t.jsx)("div",{className:"buttons",children:(0,t.jsx)(a.Z,{color:"primary",variant:"contained",onClick:A,children:"Image Update"})})]}):null]})]})}),(0,t.jsx)(z.Z,{})]})},W=l(83379),O=l(60753),B=l(6532),H=l(37911),F=l(5176),M=l(40877),R=l(31029),J=l(64094),V=e=>{var i;let{status:l,setStatus:r,brandId:a,setBrandId:s,catId:n,setCatId:c,errors:h,productData:m}=e,{data:p}=(0,M.kJ)(R.BD),{data:v}=(0,M.kJ)(R.xH);return(0,y.useEffect)(()=>{m&&c((null==v?void 0:v.product_categories.find(e=>e.id===m.product_category.id))||null)},[m,v]),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Organize"}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[a&&(0,t.jsxs)(W.Z,{fullWidth:!0,children:[(0,t.jsx)(O.Z,{children:"Select Product Brand"}),(0,t.jsx)(H.Z,{label:"Select Vendor",value:a,onChange:e=>s(e.target.value),error:null!=h&&!!h.brandId,helpertext:null==h?void 0:h.brandId,children:null==p?void 0:null===(i=p.brands)||void 0===i?void 0:i.map((e,i)=>(0,t.jsx)(B.Z,{value:null==e?void 0:e.id,children:null==e?void 0:e.title},i))}),(0,t.jsx)(J.Z,{sx:{color:"red"},children:null==h?void 0:h.brandId})]}),(0,t.jsx)(F.Z,{value:n||null,onChange:(e,i)=>{c(i||null)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:(null==v?void 0:v.product_categories)||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.title)||"",renderOption:(e,i,l)=>{let{selected:t}=l;return(0,y.createElement)("li",{...e,key:i.id},i.title)},renderInput:e=>(0,t.jsx)(x.Z,{...e,label:"Category",placeholder:"Select category"})})]})})]})};l(97392);var q=l(42821),Q=e=>{let{price:i,setPrice:l,errors:r,productData:a}=e;return(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Pricing"}),(0,t.jsx)(u.Z,{children:(0,t.jsx)(q.Z,{children:(0,t.jsx)(x.Z,{fullWidth:!0,type:"number",label:"Based Price",placeholder:"Enter Based Price",className:"mbe-5",value:i,onChange:e=>l(e.target.value),error:null!=r&&!!r.price,helperText:null==r?void 0:r.price})})})]})},Y=l(61250),G=l(66873),K=()=>{let{id:e}=(0,Y.useParams)(),i=(0,Y.useRouter)(),{setGlobalMsg:l,loading:a,setLoading:s}=(0,U.q)(),[c,d]=(0,y.useState)(),[o,u]=(0,y.useState)(),[x,h]=(0,y.useState)(),[m,p]=(0,y.useState)(),[v,j]=(0,y.useState)(),[g,f]=(0,y.useState)(),[Z,b]=(0,y.useState)(),[P,k]=(0,y.useState)(),[S,A]=(0,y.useState)([]),[_]=(0,I.D)(D.J9,{fetchPolicy:"network-only",refetchQueries:[R.tT]}),[C]=(0,I.D)(D.Sf),{data:w}=(0,M.kJ)(R.yZ,{variables:{id:e}}),E=null==w?void 0:w.products_by_pk;(0,y.useEffect)(()=>{E&&(d(null==E?void 0:E.title),f(null==E?void 0:E.serial_number),b(null==E?void 0:E.warranty_period),u(null==E?void 0:E.description_html),h(null==E?void 0:E.brand_id),j(null==E?void 0:E.price))},[E]);let L=async()=>{s(!0);try{await _({variables:{id:null==E?void 0:E.id,title:c,description_html:o,brand_id:x,category_id:null==m?void 0:m.id,serial_number:g,warranty_period:Z,price:Number(v)}}),s(!1),l("✅ Product has been updated")}catch(e){l("❌ Edit Product Error"),console.log(e.response)}};return a?(0,t.jsx)(G.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(n,{handleDiscardProduct:()=>{i.back()},handleEditProduct:L,productData:E})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(N,{setTitle:d,title:c,setSNo:f,sNo:g,setDescription:u,description:o,warrantyPeriod:Z,setWarrantyPeriod:b,errors:P,productData:E})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(T,{files:S,setFiles:A,productData:E})})]})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(Q,{price:v,setPrice:j,errors:P,productData:E})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(V,{brandId:x,setBrandId:h,catId:m,setCatId:p,errors:P,productData:E})})]})})]}),(0,t.jsx)(z.Z,{})]})}}},function(e){e.O(0,[5392,709,6777,7382,9423,6086,5278,6353,1378,8190,5266,1802,1732,6479,9276,9124,1166,1771,3302,3347,1711,6772,1467,2392,8942,7155,5176,7264,7212,8503,911,4170,6842,1744],function(){return e(e.s=88745)}),_N_E=e.O()}]);