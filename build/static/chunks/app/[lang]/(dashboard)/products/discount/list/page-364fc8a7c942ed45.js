(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3357],{96402:function(e,t,r){Promise.resolve().then(r.bind(r,87757))},12895:function(e,t,r){"use strict";r.d(t,{ApolloWrapper:function(){return m},q:function(){return g}});var n=r(59533),l=r(81866),a=r(63876),i=r(49464),o=r(50069),s=r(31229);let c=(0,s.createContext)();function u(){let e=new a.u({uri:"https://alpha.axra.app/v1/graphql",fetchOptions:{cache:"no-store"}}),t=(0,o.v)(async(e,t)=>{let{headers:r}=t;try{return{headers:{...r,"x-hasura-admin-secret":"alphapassword"}}}catch(e){return{headers:r}}});return new i.fe({cache:new i.h4,link:d.concat(t).concat(e)})}let d=(0,l.q)(e=>{let{graphQLErrors:t,networkError:r}=e;t&&(console.log("graphql",t),t.forEach(e=>{let{extensions:t}=e;("invalid-headers"===t.code||"invalid-jwt"===t.code)&&(localStorage.clear(),window.location.assign("".concat(window.location.origin,"/login")))})),r&&(console.log("[Network error]: ".concat(r)),alert("network connection problem"))}),g=()=>(0,s.useContext)(c);function m(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[a,o]=(0,s.useState)(!1);return(0,n.jsx)(i.e$,{makeClient:u,children:(0,n.jsx)(c.Provider,{value:{globalMsg:r,setGlobalMsg:l,loading:a,setLoading:o},children:t})})}},76422:function(e,t,r){"use strict";var n=r(59533);r(31229);var l=r(12173),a=r(12895);t.Z=()=>{let{globalMsg:e,setGlobalMsg:t}=(0,a.q)();return(0,n.jsx)("div",{children:(0,n.jsx)(l.Z,{anchorOrigin:{horizontal:"center",vertical:"top"},open:!!e,autoHideDuration:3e3,onClose:()=>t(null),message:e})})}},348:function(e,t,r){"use strict";r.d(t,{Q:function(){return n}});let n=e=>e.split(/\s/).reduce((e,t)=>e+=t.slice(0,1),"")},11489:function(e,t,r){"use strict";var n=r(59533),l=r(31229),a=r(96353),i=r(61250),o=r(26175),s=r(33386),c=r(28095),u=r(89749),d=r(66431),g=r(23524),m=r(72860),x=r.n(m),h=r(19880),f=r(65841),p=r(51480);r(79505),r(6083),r(42648),r(348);var v=r(84148),j=r(67875),w=r.n(j),S=r(17848),b=r(76399),C=r(31029),N=r(29349),y=r(12895),M=r(76422);let P=(e,t,r,n)=>{let l=(0,h.O4)(e.getValue(t),r);return n({itemRank:l}),l.passed},_=e=>{let{value:t,onChange:r,debounce:a=500,...i}=e,[o,s]=(0,l.useState)(t);return(0,l.useEffect)(()=>{s(t)},[t]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{r(o)},a);return()=>clearTimeout(e)},[o]),(0,n.jsx)(d.Z,{...i,value:o,onChange:e=>s(e.target.value),size:"small"})},Z=(0,f.Cl)();t.Z=e=>{let{productData:t}=e,{data:r}=(0,S.kJ)(C.ef,{variables:{product_id:t.id},fetchPolicy:"network-only"}),{data:d}=(0,S.kJ)(C.DF),{setGlobalMsg:m}=(0,y.q)(),[h,j]=(0,l.useState)(""),[k,E]=(0,l.useState)({}),[F,R]=(0,l.useState)(r.product_discounts),[D,I]=(0,l.useState)(F),[O,q]=(0,l.useState)(""),[z]=(0,b.D)(N.Qm),V=async e=>{try{await z({variables:{id:e}}),R(F.filter(t=>t.id!==e)),m("âœ… Delete Successful")}catch(e){console.log("Error ",e)}},{lang:J}=(0,i.useParams)(),L=(0,l.useMemo)(()=>[Z.accessor("id",{header:"#",cell:e=>{let{row:t}=e;return(0,n.jsx)(c.Z,{component:a.default,href:(0,v.U)("/products/discount/".concat(t.original.id),J),color:"primary",children:"".concat(t.original.id.substring(0,10))})}}),Z.accessor("min_order ",{header:"Minimal Order",cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"flex items-center gap-3",children:(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(c.Z,{className:"font-medium",color:"text.primary",children:t.original.min_order})})})}}),Z.accessor("customer_type ",{header:"Customer Type",cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"flex items-center gap-3",children:(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(c.Z,{className:"font-medium",color:"text.primary",children:t.original.customer_type})})})}}),Z.accessor("discounted_value",{header:"Discounted Value",cell:e=>{let{row:t}=e;return(0,n.jsx)(c.Z,{children:"".concat(null!==t.original.discounted_value?t.original.discounted_value.toLocaleString():"-")})}}),Z.accessor("created_at",{header:"Date",cell:e=>{let{row:t}=e;return(0,n.jsx)(c.Z,{children:t.original.created_at.substring(0,10)})}}),Z.accessor("action",{header:"Action",cell:e=>{let{row:t}=e;return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(u.Z,{onClick:()=>V(t.original.id),children:(0,n.jsx)("i",{className:"ri-delete-bin-7-line text-textSecondary text-red-600"})}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(a.default,{href:(0,v.U)("/products/discount/details/".concat(t.original.id),J),className:"flex",children:(0,n.jsx)("i",{className:"ri-eye-line text-textSecondary"})})})]})},enableSorting:!1})],[F,D]),G=(0,p.b7)({data:D,columns:L,filterFns:{fuzzy:P},state:{rowSelection:k,globalFilter:O},initialState:{pagination:{pageSize:10}},enableRowSelection:!0,globalFilterFn:P,onRowSelectionChange:E,getCoreRowModel:(0,f.sC)(),onGlobalFilterChange:q,getFilteredRowModel:(0,f.vL)(),getSortedRowModel:(0,f.tj)(),getPaginationRowModel:(0,f.G_)(),getFacetedRowModel:(0,f.o6)(),getFacetedUniqueValues:(0,f.JG)(),getFacetedMinMaxValues:(0,f.HO)()});return(0,l.useEffect)(()=>{I(null==F?void 0:F.filter(e=>!h||e.status.toLowerCase().replace(/\s+/g,"-")===h))},[h,F,I]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(s.Z,{className:"flex justify-between gap-4 flex-wrap flex-col sm:flex-row items-center",children:(0,n.jsx)("div",{className:"flex flex-col sm:flex-row max-sm:is-full items-center gap-4",children:(0,n.jsx)(_,{value:null!=O?O:"",onChange:e=>q(String(e)),placeholder:"Search Product Discount",className:"max-sm:is-full min-is-[200px]"})})}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:w().table,children:[(0,n.jsx)("thead",{children:G.getHeaderGroups().map(e=>(0,n.jsx)("tr",{children:e.headers.map(e=>{var t;return(0,n.jsx)("th",{children:e.isPlaceholder?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:x()({"flex items-center":e.column.getIsSorted(),"cursor-pointer select-none":e.column.getCanSort()}),onClick:e.column.getToggleSortingHandler(),children:[(0,p.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:(0,n.jsx)("i",{className:"ri-arrow-up-s-line text-xl"}),desc:(0,n.jsx)("i",{className:"ri-arrow-down-s-line text-xl"})})[e.column.getIsSorted()])&&void 0!==t?t:null]})})},e.id)})},e.id))}),0===G.getFilteredRowModel().rows.length?(0,n.jsx)("tbody",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:G.getVisibleFlatColumns().length,className:"text-center",children:"No data available"})})}):(0,n.jsx)("tbody",{children:G.getRowModel().rows.slice(0,G.getState().pagination.pageSize).map(e=>(0,n.jsx)("tr",{className:x()({selected:e.getIsSelected()}),children:e.getVisibleCells().map(e=>(0,n.jsx)("td",{children:(0,p.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,n.jsx)(g.Z,{rowsPerPageOptions:[10,25,50],component:"div",className:"border-bs",count:G.getFilteredRowModel().rows.length,rowsPerPage:G.getState().pagination.pageSize,page:G.getState().pagination.pageIndex,SelectProps:{inputProps:{"aria-label":"rows per page"}},onPageChange:(e,t)=>{G.setPageIndex(t)},onRowsPerPageChange:e=>G.setPageSize(Number(e.target.value))})]}),(0,n.jsx)(M.Z,{})]})}},87757:function(e,t,r){"use strict";r.d(t,{default:function(){return s}});var n=r(59533),l=r(95094),a=r(11489),i=r(17848),o=r(31029);r(52972),r(72860),r(6083),r(31229);var s=()=>{let{data:e}=(0,i.kJ)(o.Jv);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.ZP,{container:!0,spacing:6,children:(0,n.jsx)(l.ZP,{item:!0,xs:12,children:(0,n.jsx)(a.Z,{})})})})}},76399:function(e,t,r){"use strict";r.d(t,{D:function(){return d}});var n=r(69395),l=r(121),a=r(49114),i=r(17839),o=r(60626),s=r(98153),c=r(2912),u=r(25207).Nq?l.useLayoutEffect:l.useEffect;function d(e,t){var r=(0,c.x)(null==t?void 0:t.client);(0,o.Vp)(e,o.n_.Mutation);var d=l.useState({called:!1,loading:!1,client:r}),g=d[0],m=d[1],x=l.useRef({result:g,mutationId:0,isMounted:!0,client:r,mutation:e,options:t});u(function(){Object.assign(x.current,{client:r,options:t,mutation:e})});var h=l.useCallback(function(e){void 0===e&&(e={});var t=x.current,r=t.options,l=t.mutation,o=(0,n.pi)((0,n.pi)({},r),{mutation:l}),c=e.client||x.current.client;x.current.result.loading||o.ignoreResults||!x.current.isMounted||m(x.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:c});var u=++x.current.mutationId,d=(0,a.J)(o,e);return c.mutate(d).then(function(t){var r,n,l=t.data,a=t.errors,o=a&&a.length>0?new s.cA({graphQLErrors:a}):void 0,g=e.onError||(null===(r=x.current.options)||void 0===r?void 0:r.onError);if(o&&g&&g(o,d),u===x.current.mutationId&&!d.ignoreResults){var h={called:!0,loading:!1,data:l,error:o,client:c};x.current.isMounted&&!(0,i.D)(x.current.result,h)&&m(x.current.result=h)}var f=e.onCompleted||(null===(n=x.current.options)||void 0===n?void 0:n.onCompleted);return o||null==f||f(t.data,d),t}).catch(function(t){if(u===x.current.mutationId&&x.current.isMounted){var r,n={loading:!1,error:t,data:void 0,called:!0,client:c};(0,i.D)(x.current.result,n)||m(x.current.result=n)}var l=e.onError||(null===(r=x.current.options)||void 0===r?void 0:r.onError);if(l)return l(t,d),{data:void 0,errors:t};throw t})},[]),f=l.useCallback(function(){if(x.current.isMounted){var e={called:!1,loading:!1,client:x.current.client};Object.assign(x.current,{mutationId:0,result:e}),m(e)}},[]);return l.useEffect(function(){var e=x.current;return e.isMounted=!0,function(){e.isMounted=!1}},[]),[h,(0,n.pi)({reset:f},g)]}}},function(e){e.O(0,[3307,8869,1055,4214,9253,4637,313,6431,7814,9276,9415,7020,4284,2163,1559,9993,7957,5841,7952,2173,4076,1029,6129,4170,6842,1744],function(){return e(e.s=96402)}),_N_E=e.O()}]);