(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5974],{39865:function(e,i,t){Promise.resolve().then(t.bind(t,47721))},17064:function(e,i,t){"use strict";t(31229);var l=t(89274),r=t(59533);i.Z=(0,l.Z)((0,r.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},14849:function(e,i,t){"use strict";t(31229);var l=t(89274),r=t(59533);i.Z=(0,l.Z)((0,r.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},47721:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return F}});var l=t(59533),r=t(91771),s=t(29900),a=t(84323),n=e=>{let{handleDiscardProduct:i,handleAddProduct:t}=e;return(0,l.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(a.Z,{variant:"h4",className:"mbe-1",children:"Add a new product"}),(0,l.jsx)(a.Z,{children:"Orders placed across your store"})]}),(0,l.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[(0,l.jsx)(s.Z,{variant:"outlined",color:"secondary",onClick:i,children:"Discard"}),(0,l.jsx)(s.Z,{variant:"contained",onClick:t,children:"Publish Product"})]})]})},c=t(48111),d=t(76778),o=t(11124),x=t(54323),u=t(61732),h=t(72860),m=t.n(h),j=t(9772),g=t(67827),p=t(36706),v=t(40729),f=t(16798),Z=t(18308);t(82156);var b=t(31229);let y=e=>{let{editor:i}=e;return i?(0,l.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[(0,l.jsx)(Z.Z,{...i.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleBold().run(),children:(0,l.jsx)("i",{className:m()("ri-bold",{"text-textSecondary":!i.isActive("bold")})})}),(0,l.jsx)(Z.Z,{...i.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleUnderline().run(),children:(0,l.jsx)("i",{className:m()("ri-underline",{"text-textSecondary":!i.isActive("underline")})})}),(0,l.jsx)(Z.Z,{...i.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleItalic().run(),children:(0,l.jsx)("i",{className:m()("ri-italic",{"text-textSecondary":!i.isActive("italic")})})}),(0,l.jsx)(Z.Z,{...i.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleStrike().run(),children:(0,l.jsx)("i",{className:m()("ri-strikethrough",{"text-textSecondary":!i.isActive("strike")})})}),(0,l.jsx)(Z.Z,{...i.isActive("bulletList")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleBulletList().run(),children:(0,l.jsx)("i",{className:m()("ri-list-unordered",{"text-textSecondary":!i.isActive("bulletList")})})}),(0,l.jsx)(Z.Z,{...i.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("left").run(),children:(0,l.jsx)("i",{className:m()("ri-align-left",{"text-textSecondary":!i.isActive({textAlign:"left"})})})}),(0,l.jsx)(Z.Z,{...i.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("center").run(),children:(0,l.jsx)("i",{className:m()("ri-align-center",{"text-textSecondary":!i.isActive({textAlign:"center"})})})}),(0,l.jsx)(Z.Z,{...i.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("right").run(),children:(0,l.jsx)("i",{className:m()("ri-align-right",{"text-textSecondary":!i.isActive({textAlign:"right"})})})}),(0,l.jsx)(Z.Z,{...i.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("justify").run(),children:(0,l.jsx)("i",{className:m()("ri-align-justify",{"text-textSecondary":!i.isActive({textAlign:"justify"})})})})]}):null};var N=e=>{let{setTitle:i,title:t,setSNo:s,sNo:n,setDescription:h,description:m,errors:Z,productData:b}=e,N=(0,j.jE)({extensions:[g.V,v.V.configure({placeholder:"Write something here..."}),f.P.configure({types:["heading","paragraph"]}),p.v],content:m,onUpdate:e=>{let{editor:i}=e;h(i.getHTML())}});return(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(o.Z,{title:"Product Information"}),(0,l.jsxs)(x.Z,{children:[(0,l.jsxs)(r.ZP,{container:!0,spacing:5,className:"mbe-5",children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(u.Z,{fullWidth:!0,label:"Product Name",placeholder:"Enter Product Name",value:t,onChange:e=>i(e.target.value),error:null!=Z&&!!Z.title,helperText:null==Z?void 0:Z.title})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,l.jsx)(u.Z,{fullWidth:!0,label:"Serial Number",placeholder:"0123-4567",value:n,onChange:e=>s(e.target.value),error:null!=Z&&!!Z.sNo,helperText:null==Z?void 0:Z.sNo})})]}),(0,l.jsx)(a.Z,{className:"mbe-1",children:"Description (Optional)"}),(0,l.jsx)(d.Z,{className:"p-0 border shadow-none",children:(0,l.jsxs)(x.Z,{className:"p-0",children:[(0,l.jsx)(y,{editor:N}),(0,l.jsx)(c.Z,{className:"mli-5"}),(0,l.jsx)(j.kg,{editor:N,className:"bs-[135px] overflow-y-auto flex "})]})})]})]})},A=t(91081);t(97392);var P=t(42821),k=e=>{let{price:i,setPrice:t,errors:r}=e;return(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(o.Z,{title:"Pricing"}),(0,l.jsx)(x.Z,{children:(0,l.jsx)(P.Z,{children:(0,l.jsx)(u.Z,{fullWidth:!0,label:"Base Price",placeholder:"Enter Base Price",className:"mbe-5",value:i,onChange:e=>t(e.target.value),error:null!=r&&!!r.price,helperText:null==r?void 0:r.price})})})]})},S=t(83379),C=t(60753),w=t(6532),z=t(37911),I=t(5176),_=t(40877),L=t(31029),T=t(64094),D=e=>{var i;let{brandId:t,setBrandId:r,catId:s,setCatId:a,errors:n}=e,{data:c}=(0,_.kJ)(L.BD),{data:h}=(0,_.kJ)(L.xH);return(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(o.Z,{title:"Organize"}),(0,l.jsx)(x.Z,{children:(0,l.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[(0,l.jsxs)(S.Z,{fullWidth:!0,children:[(0,l.jsx)(C.Z,{children:"Select Product Brand"}),(0,l.jsx)(z.Z,{label:"Select Vendor",value:t,onChange:e=>r(e.target.value),error:null!=n&&!!n.brandId,helperText:null==n?void 0:n.brandId,children:null==c?void 0:null===(i=c.brands)||void 0===i?void 0:i.map((e,i)=>(0,l.jsx)(w.Z,{value:null==e?void 0:e.id,children:null==e?void 0:e.title},i))}),(0,l.jsx)(T.Z,{sx:{color:"red"},children:null==n?void 0:n.brandId})]}),(0,l.jsx)(I.Z,{value:s,onChange:(e,i)=>{i?a(null==i?void 0:i.id):a(null)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:(null==h?void 0:h.product_categories)||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.title)||"",renderOption:(e,i,t)=>{let{selected:l}=t;return(0,b.createElement)("li",{...e,key:i.id},null==i?void 0:i.title)},renderInput:e=>(0,l.jsx)(u.Z,{...e,label:"Category",placeholder:"select category"})})]})})]})},O=t(45641),B=t(29349),M=t(76422),W=t(12895),E=t(66873),U=t(20397),q=t(61250),F=()=>{let e=(0,q.useRouter)(),{setGlobalMsg:i,loading:t,setLoading:s}=(0,W.q)(),[a,c]=(0,b.useState)(),[d,o]=(0,b.useState)(),[x,u]=(0,b.useState)(),[h,m]=(0,b.useState)(),[j,g]=(0,b.useState)(),[p,v]=(0,b.useState)(),[f,Z]=(0,b.useState)(),[y,P]=(0,b.useState)(),[S,C]=(0,b.useState)([]),[w]=(0,O.D)(B.zN),[z]=(0,O.D)(B.Sf),I=async()=>{s(!0);let t={},l=!1;if(a||(t.title="Title field is required",l=!0),a||(t.title="Title field is required",l=!0),j||(t.price="Price field is required",l=!0),p||(t.sNo="Serial Number field is required",l=!0),x||(t.brandId="Brand field is required",l=!0),h||(t.catId="Category field is required",l=!0),l){P({...t}),s(!1);return}try{let t=await Promise.all(S.map(async e=>{let i=await z({variables:{content_type:"image",folder:"products"}}),t=await (0,U.c)(e,i.data.getFileUploadUrl.fileUploadUrl,"image");return{media_type:"image",media_url:t}}));await w({variables:{title:a,description_html:d,brand_id:x,category_id:h,serial_number:p,price:j,product_medias:{data:t}}}),s(!1),c(""),g(""),o(""),v(""),u(""),m(""),i("➕ Add New Product"),e.back()}catch(e){i("❌ Add Product Error"),console.log(e.response)}};return t?(0,l.jsx)(E.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(n,{handleDiscardProduct:()=>{c(""),o(""),g(0),v(0),m(""),u("")},handleAddProduct:I})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,l.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(N,{setTitle:c,title:a,setSNo:v,sNo:p,setDescription:o,description:d,errors:y})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(A.Z,{files:S,setFiles:C})})]})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,l.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(k,{price:j,setPrice:g,errors:y})}),(0,l.jsx)(r.ZP,{item:!0,xs:12,children:(0,l.jsx)(D,{brandId:x,setBrandId:u,catId:h,setCatId:m,errors:y})})]})})]}),(0,l.jsx)(M.Z,{})]})}},91081:function(e,i,t){"use strict";var l=t(59533),r=t(31229),s=t(76778),a=t(11124),n=t(54323),c=t(29900),d=t(84448),o=t(71491),x=t(87616),u=t(84323),h=t(73815),m=t(62934);t(83762);var j=t(6083),g=t(70337);let p=(0,h.ZP)(g.Z)(e=>{let{theme:i}=e;return{"& .dropzone":{minHeight:"unset",padding:i.spacing(12),[i.breakpoints.down("sm")]:{paddingInline:i.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:i.typography.body1.fontWeight}}}});i.Z=e=>{let{files:i,setFiles:t}=e,[h,g]=(0,r.useState)([]),[v,f]=(0,r.useState)(!1),{getRootProps:Z,getInputProps:b}=(0,m.uI)({onDrop:e=>{let i=e.filter(e=>e.type.startsWith("image"));i.length!==e.length?f("Only image files are allowed."):f(""),t(i.map(e=>Object.assign(e)))}}),y=e=>e.type.startsWith("image")?(0,l.jsx)("img",{width:38,height:38,alt:e.name,src:URL.createObjectURL(e)}):(0,l.jsx)("i",{className:"ri-file-text-line"}),N=e=>{t([...i.filter(i=>i.name!==e.name)])},A=i.map(e=>(0,l.jsxs)(x.ZP,{className:"pis-4 plb-3",children:[(0,l.jsxs)("div",{className:"file-details",children:[(0,l.jsx)("div",{className:"file-preview",children:y(e)}),(0,l.jsxs)("div",{children:[(0,l.jsx)(u.Z,{className:"file-name font-medium",color:"text.primary",children:e.name}),(0,l.jsx)(u.Z,{className:"file-size",variant:"body2",children:Math.round(e.size/100)/10>1e3?"".concat((Math.round(e.size/100)/1e4).toFixed(1)," mb"):"".concat((Math.round(e.size/100)/10).toFixed(1)," kb")})]})]}),(0,l.jsx)(d.Z,{onClick:()=>N(e),children:(0,l.jsx)("i",{className:"ri-close-line text-xl"})})]},e.name));return(0,l.jsx)(p,{children:(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(a.Z,{title:"Product Image",sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,l.jsxs)(n.Z,{children:[(0,l.jsxs)("div",{...Z({className:"dropzone"}),children:[(0,l.jsx)("input",{...b()}),(0,l.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[(0,l.jsx)(j.default,{variant:"rounded",skin:"light",color:"secondary",children:(0,l.jsx)("i",{className:"ri-upload-2-line"})}),(0,l.jsx)(u.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),(0,l.jsx)(u.Z,{color:"text.disabled",children:"or"}),(0,l.jsx)(c.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),v&&(0,l.jsx)(u.Z,{color:"error",variant:"body2",children:v}),i.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{children:A}),(0,l.jsx)("div",{className:"buttons",children:(0,l.jsx)(c.Z,{color:"error",variant:"outlined",onClick:()=>{t([])},children:"Remove All"})})]}):null]})]})})}}},function(e){e.O(0,[5392,709,6777,7382,9423,6086,5278,6353,1378,8190,5266,1802,1732,6479,9276,9124,1166,1771,3302,3347,1711,6772,1467,2392,8942,5534,9771,8560,7264,4005,9846,4170,6842,1744],function(){return e(e.s=39865)}),_N_E=e.O()}]);