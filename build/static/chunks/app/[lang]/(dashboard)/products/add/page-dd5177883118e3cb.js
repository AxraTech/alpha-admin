(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5974],{61303:function(e,i,l){Promise.resolve().then(l.bind(l,23840))},23840:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return Q}});var t=l(57437),r=l(33037),s=l(75519),n=l(83719),a=e=>{let{handleDiscardProduct:i,handleAddProduct:l}=e;return(0,t.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{variant:"h4",className:"mbe-1",children:"Add a new product"}),(0,t.jsx)(n.Z,{children:"Orders placed across your store"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[(0,t.jsx)(s.Z,{variant:"outlined",color:"secondary",onClick:i,children:"Discard"}),(0,t.jsx)(s.Z,{variant:"contained",onClick:l,children:"Publish Product"})]})]})},c=l(14595),d=l(76520),o=l(20248),x=l(55205),u=l(48965),h=l(56800),m=l.n(h),j=l(23705),g=l(42214),p=l(2375),v=l(98041),f=l(38133),Z=l(40804);l(29641);var b=l(2265);let N=e=>{let{editor:i}=e;return i?(0,t.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[(0,t.jsx)(Z.Z,{...i.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleBold().run(),children:(0,t.jsx)("i",{className:m()("ri-bold",{"text-textSecondary":!i.isActive("bold")})})}),(0,t.jsx)(Z.Z,{...i.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleUnderline().run(),children:(0,t.jsx)("i",{className:m()("ri-underline",{"text-textSecondary":!i.isActive("underline")})})}),(0,t.jsx)(Z.Z,{...i.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleItalic().run(),children:(0,t.jsx)("i",{className:m()("ri-italic",{"text-textSecondary":!i.isActive("italic")})})}),(0,t.jsx)(Z.Z,{...i.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().toggleStrike().run(),children:(0,t.jsx)("i",{className:m()("ri-strikethrough",{"text-textSecondary":!i.isActive("strike")})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("left").run(),children:(0,t.jsx)("i",{className:m()("ri-align-left",{"text-textSecondary":!i.isActive({textAlign:"left"})})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("center").run(),children:(0,t.jsx)("i",{className:m()("ri-align-center",{"text-textSecondary":!i.isActive({textAlign:"center"})})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("right").run(),children:(0,t.jsx)("i",{className:m()("ri-align-right",{"text-textSecondary":!i.isActive({textAlign:"right"})})})}),(0,t.jsx)(Z.Z,{...i.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>i.chain().focus().setTextAlign("justify").run(),children:(0,t.jsx)("i",{className:m()("ri-align-justify",{"text-textSecondary":!i.isActive({textAlign:"justify"})})})})]}):null};var y=e=>{let{setTitle:i,title:l,setSNo:s,sNo:a,setDescription:h,description:m,errors:Z,productData:y}=e,A=(0,j.jE)({extensions:[g.V,v.V.configure({placeholder:"Write something here..."}),f.P.configure({types:["heading","paragraph"]}),p.v],content:m,onUpdate:e=>{let{editor:i}=e;h(i.getHTML())}});return(0,b.useEffect)(()=>{y&&(i(y.title),s(y.serial_number))}),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Product Information"}),(0,t.jsxs)(x.Z,{children:[(0,t.jsxs)(r.ZP,{container:!0,spacing:5,className:"mbe-5",children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(u.Z,{fullWidth:!0,label:"Product Name",placeholder:"Enter Product Name",value:l,onChange:e=>i(e.target.value),error:null!=Z&&!!Z.title,helperText:null==Z?void 0:Z.title})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsx)(u.Z,{fullWidth:!0,label:"Serial Number",placeholder:"0123-4567",value:a,onChange:e=>s(e.target.value),error:null!=Z&&!!Z.sNo,helperText:null==Z?void 0:Z.sNo})})]}),(0,t.jsx)(n.Z,{className:"mbe-1",children:"Description (Optional)"}),(0,t.jsx)(d.Z,{className:"p-0 border shadow-none",children:(0,t.jsxs)(x.Z,{className:"p-0",children:[(0,t.jsx)(N,{editor:A}),(0,t.jsx)(c.Z,{className:"mli-5"}),(0,t.jsx)(j.kg,{editor:A,className:"bs-[135px] overflow-y-auto flex "})]})})]})]})},A=l(60335),P=l(32184),k=l(7547),S=l(48024),C=l(38746),w=l(31155),I=l(49758),z=l(36933);let _=(0,S.ZP)(z.Z)(e=>{let{theme:i}=e;return{"& .dropzone":{minHeight:"unset",padding:i.spacing(12),[i.breakpoints.down("sm")]:{paddingInline:i.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:i.typography.body1.fontWeight}}}});var T=e=>{let{files:i,setFiles:l}=e,[r,a]=(0,b.useState)([]),{getRootProps:c,getInputProps:u}=(0,C.uI)({onDrop:e=>{l(e.map(e=>Object.assign(e)))}}),h=e=>e.type.startsWith("image")?(0,t.jsx)("img",{width:38,height:38,alt:e.name,src:URL.createObjectURL(e)}):(0,t.jsx)("i",{className:"ri-file-text-line"}),m=e=>{l([...i.filter(i=>i.name!==e.name)])},j=i.map(e=>(0,t.jsxs)(k.ZP,{className:"pis-4 plb-3",children:[(0,t.jsxs)("div",{className:"file-details",children:[(0,t.jsx)("div",{className:"file-preview",children:h(e)}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Z,{className:"file-name font-medium",color:"text.primary",children:e.name}),(0,t.jsx)(n.Z,{className:"file-size",variant:"body2",children:Math.round(e.size/100)/10>1e3?"".concat((Math.round(e.size/100)/1e4).toFixed(1)," mb"):"".concat((Math.round(e.size/100)/10).toFixed(1)," kb")})]})]}),(0,t.jsx)(A.Z,{onClick:()=>m(e),children:(0,t.jsx)("i",{className:"ri-close-line text-xl"})})]},e.name));return(0,t.jsx)(_,{children:(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Product Image",action:(0,t.jsx)(n.Z,{component:w.default,color:"primary",className:"font-medium",children:"Add media from URL"}),sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,t.jsxs)(x.Z,{children:[(0,t.jsxs)("div",{...c({className:"dropzone"}),children:[(0,t.jsx)("input",{...u()}),(0,t.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[(0,t.jsx)(I.default,{variant:"rounded",skin:"light",color:"secondary",children:(0,t.jsx)("i",{className:"ri-upload-2-line"})}),(0,t.jsx)(n.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),(0,t.jsx)(n.Z,{color:"text.disabled",children:"or"}),(0,t.jsx)(s.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),i.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.Z,{children:j}),(0,t.jsx)("div",{className:"buttons",children:(0,t.jsx)(s.Z,{color:"error",variant:"outlined",onClick:()=>{l([])},children:"Remove All"})})]}):null]})]})})};l(42338);var D=l(1487),O=e=>{let{price:i,setPrice:l,errors:r}=e;return(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Pricing"}),(0,t.jsx)(x.Z,{children:(0,t.jsx)(D.Z,{children:(0,t.jsx)(u.Z,{fullWidth:!0,label:"Base Price",placeholder:"Enter Base Price",className:"mbe-5",value:i,onChange:e=>l(e.target.value),error:null!=r&&!!r.price,helperText:null==r?void 0:r.price})})})]})},E=l(28549),U=l(67351),B=l(11656),L=l(19004),W=l(91933),q=l(43808),M=l(44514),F=l(10437),H=e=>{var i;let{brandId:l,setBrandId:r,catId:s,setCatId:n,errors:a}=e,{data:c}=(0,q.kJ)(M.BD),{data:h}=(0,q.kJ)(M.xH);return(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(o.Z,{title:"Organize"}),(0,t.jsx)(x.Z,{children:(0,t.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[(0,t.jsxs)(E.Z,{fullWidth:!0,children:[(0,t.jsx)(U.Z,{children:"Select Product Brand"}),(0,t.jsx)(L.Z,{label:"Select Vendor",value:l,onChange:e=>r(e.target.value),error:null!=a&&!!a.brandId,helperText:null==a?void 0:a.brandId,children:null==c?void 0:null===(i=c.brands)||void 0===i?void 0:i.map((e,i)=>(0,t.jsx)(B.Z,{value:null==e?void 0:e.id,children:null==e?void 0:e.title},i))}),(0,t.jsx)(F.Z,{sx:{color:"red"},children:null==a?void 0:a.brandId})]}),(0,t.jsx)(W.Z,{value:s,onChange:(e,i)=>{n(i.id)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:(null==h?void 0:h.product_categories)||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.title)||"",renderOption:(e,i,l)=>{let{selected:t}=l;return(0,b.createElement)("li",{...e,key:i.id},i.title)},renderInput:e=>(0,t.jsx)(u.Z,{...e,label:"Category",placeholder:"select category"})})]})})]})},R=l(23944),V=l(1552),J=l(47380),Y=l(9188),G=l(91326),K=l(34364),Q=()=>{let{setGlobalMsg:e,loading:i,setLoading:l}=(0,Y.q)(),[s,n]=(0,b.useState)(),[c,d]=(0,b.useState)(),[o,x]=(0,b.useState)(),[u,h]=(0,b.useState)(),[m,j]=(0,b.useState)(),[g,p]=(0,b.useState)(),[v,f]=(0,b.useState)(),[Z,N]=(0,b.useState)([]),[A]=(0,R.D)(V.zN),[P]=(0,R.D)(V.Sf),k=async()=>{l(!0);let i={},t=!1;if(s||(i.title="Title field is required",t=!0),s||(i.title="Title field is required",t=!0),m||(i.price="Price field is required",t=!0),g||(i.sNo="Serial Number field is required",t=!0),o||(i.brandId="Brand field is required",t=!0),u||(i.catId="Category field is required",t=!0),t){f({...i}),l(!1);return}try{let i=await Promise.all(Z.map(async e=>{let i=await P({variables:{content_type:"image",folder:"products"}}),l=await (0,K.c)(e,i.data.getFileUploadUrl.fileUploadUrl,"image");return{media_type:"image",media_url:l}}));await A({variables:{title:s,description_html:c,brand_id:o,category_id:u,serial_number:g,price:m,product_medias:{data:i}}}),l(!1),n(""),j(""),d(""),p(""),x(""),h(""),e("➕ Add New Product")}catch(i){e("❌ Add Product Error"),console.log(i.response)}};return i?(0,t.jsx)(G.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(a,{handleDiscardProduct:()=>{n(""),d(""),j(0),p(0),h(""),x("")},handleAddProduct:k})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(y,{setTitle:n,title:s,setSNo:p,sNo:g,setDescription:d,description:c,errors:v})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(T,{files:Z,setFiles:N})})]})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,t.jsxs)(r.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(O,{price:m,setPrice:j,errors:v})}),(0,t.jsx)(r.ZP,{item:!0,xs:12,children:(0,t.jsx)(H,{brandId:o,setBrandId:x,catId:u,setCatId:h,errors:v})})]})})]}),(0,t.jsx)(J.Z,{})]})}}},function(e){e.O(0,[83,5223,1544,3572,7902,1441,9580,9855,8329,7800,7660,8965,6715,6805,8325,6101,7212,5313,481,7172,7683,3197,3550,3647,1757,3694,3248,4232,2603,4962,2971,7023,1744],function(){return e(e.s=61303)}),_N_E=e.O()}]);