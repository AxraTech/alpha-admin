(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9270],{9557:function(){},53714:function(e,t,i){Promise.resolve().then(i.bind(i,26597))},31293:function(e,t,i){"use strict";i.d(t,{Z:function(){return C}});var l=i(23950),a=i(22988),n=i(2265),r=i(44839),s=i(76990),o=i(10317),c=i(49690),d=i(59018),u=i(57437),h=(0,d.Z)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),x=(0,d.Z)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,d.Z)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=i(12272),v=i(95885),g=i(48024),f=i(41738),j=i(70601);let Z=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],b=e=>{let{classes:t,indeterminate:i,color:l,size:n}=e,r={root:["root",i&&"indeterminate","color".concat((0,p.Z)(l)),"size".concat((0,p.Z)(n))]},o=(0,s.Z)(r,j.y,t);return(0,a.Z)({},t,o)},y=(0,g.ZP)(c.Z,{shouldForwardProp:e=>(0,f.Z)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.indeterminate&&t.indeterminate,t["size".concat((0,p.Z)(i.size))],"default"!==i.color&&t["color".concat((0,p.Z)(i.color))]]}})(e=>{let{theme:t,ownerState:i}=e;return(0,a.Z)({color:(t.vars||t).palette.text.secondary},!i.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===i.color?t.vars.palette.action.activeChannel:t.vars.palette[i.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,o.Fq)("default"===i.color?t.palette.action.active:t.palette[i.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==i.color&&{["&.".concat(j.Z.checked,", &.").concat(j.Z.indeterminate)]:{color:(t.vars||t).palette[i.color].main},["&.".concat(j.Z.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),k=(0,u.jsx)(x,{}),w=(0,u.jsx)(h,{}),N=(0,u.jsx)(m,{});var C=n.forwardRef(function(e,t){var i,s;let o=(0,v.i)({props:e,name:"MuiCheckbox"}),{checkedIcon:c=k,color:d="primary",icon:h=w,indeterminate:x=!1,indeterminateIcon:m=N,inputProps:p,size:g="medium",className:f}=o,j=(0,l.Z)(o,Z),C=x?m:h,P=x?m:c,_=(0,a.Z)({},o,{color:d,indeterminate:x,size:g}),S=b(_);return(0,u.jsx)(y,(0,a.Z)({type:"checkbox",inputProps:(0,a.Z)({"data-indeterminate":x},p),icon:n.cloneElement(C,{fontSize:null!=(i=C.props.fontSize)?i:g}),checkedIcon:n.cloneElement(P,{fontSize:null!=(s=P.props.fontSize)?s:g}),ownerState:_,ref:t,className:(0,r.Z)(S.root,f)},j,{classes:S}))})},70601:function(e,t,i){"use strict";i.d(t,{y:function(){return n}});var l=i(72296),a=i(70587);function n(e){return(0,a.ZP)("MuiCheckbox",e)}let r=(0,l.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]);t.Z=r},49690:function(e,t,i){"use strict";i.d(t,{Z:function(){return y}});var l=i(23950),a=i(22988),n=i(2265),r=i(44839),s=i(76990),o=i(12272),c=i(48024),d=i(41738),u=i(75115),h=i(88875),x=i(69022),m=i(72296),p=i(70587);function v(e){return(0,p.ZP)("PrivateSwitchBase",e)}(0,m.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var g=i(57437);let f=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],j=e=>{let{classes:t,checked:i,disabled:l,edge:a}=e,n={root:["root",i&&"checked",l&&"disabled",a&&"edge".concat((0,o.Z)(a))],input:["input"]};return(0,s.Z)(n,v,t)},Z=(0,c.ZP)(x.Z)(e=>{let{ownerState:t}=e;return(0,a.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),b=(0,c.ZP)("input",{shouldForwardProp:d.Z})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1});var y=n.forwardRef(function(e,t){let{autoFocus:i,checked:n,checkedIcon:s,className:o,defaultChecked:c,disabled:d,disableFocusRipple:x=!1,edge:m=!1,icon:p,id:v,inputProps:y,inputRef:k,name:w,onBlur:N,onChange:C,onFocus:P,readOnly:_,required:S=!1,tabIndex:z,type:A,value:I}=e,E=(0,l.Z)(e,f),[R,F]=(0,u.Z)({controlled:n,default:!!c,name:"SwitchBase",state:"checked"}),M=(0,h.Z)(),D=d;M&&void 0===D&&(D=M.disabled);let O="checkbox"===A||"radio"===A,B=(0,a.Z)({},e,{checked:R,disabled:D,disableFocusRipple:x,edge:m}),L=j(B);return(0,g.jsxs)(Z,(0,a.Z)({component:"span",className:(0,r.Z)(L.root,o),centerRipple:!0,focusRipple:!x,disabled:D,tabIndex:null,role:void 0,onFocus:e=>{P&&P(e),M&&M.onFocus&&M.onFocus(e)},onBlur:e=>{N&&N(e),M&&M.onBlur&&M.onBlur(e)},ownerState:B,ref:t},E,{children:[(0,g.jsx)(b,(0,a.Z)({autoFocus:i,checked:n,defaultChecked:c,className:L.input,disabled:D,id:O?v:void 0,name:w,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;F(t),C&&C(e,t)},readOnly:_,ref:k,required:S,ownerState:B,tabIndex:z,type:A},"checkbox"===A&&void 0===I?{}:{value:I},y)),R?s:p]}))})},26597:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Q}});var l=i(57437),a=i(33037),n=i(9188),r=i(47380),s=i(1552),o=i(44514),c=i(90307),d=i(23944),u=i(43808),h=i(91326),x=i(75519),m=i(83719),p=e=>{let{handleDiscardProduct:t,handleEditNews:i}=e;return(0,l.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)(m.Z,{variant:"h4",className:"mbe-1",children:"Edit a new Post"})}),(0,l.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[(0,l.jsx)(x.Z,{variant:"outlined",color:"secondary",onClick:t,children:"Discard"}),(0,l.jsx)(x.Z,{variant:"contained",onClick:i,children:"Edit New Post"})]})]})},v=i(2265),g=i(76520),f=i(20248),j=i(55205),Z=i(60335),b=i(32184),y=i(7547),k=i(48024),w=i(38746),N=i(31155),C=i(49758),P=i(36933);let _=(0,k.ZP)(P.Z)(e=>{let{theme:t}=e;return{"& .dropzone":{minHeight:"unset",padding:t.spacing(12),[t.breakpoints.down("sm")]:{paddingInline:t.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:t.typography.body1.fontWeight}}}});var S=e=>{var t;let i;let{files:a,setFiles:n,newData:r,isImageChange:s,setIsImageChange:o}=e,{getRootProps:c,getInputProps:d}=(0,w.uI)({multiple:!1,onDrop:e=>{o(!0),n(e.map(e=>Object.assign(e)))}}),u=()=>{n([]),o(!1)};return(0,l.jsx)(_,{children:(0,l.jsxs)(g.Z,{children:[(0,l.jsx)(f.Z,{title:"Product Image",action:(0,l.jsx)(m.Z,{component:N.default,color:"primary",className:"font-medium",children:"Add media from URL"}),sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,l.jsxs)(j.Z,{children:[(0,l.jsxs)("div",{...c({className:"dropzone"}),children:[(0,l.jsx)("input",{...d()}),(0,l.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[(0,l.jsx)(C.default,{variant:"rounded",skin:"light",color:"secondary",children:(0,l.jsx)("i",{className:"ri-upload-2-line"})}),(0,l.jsx)(m.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),(0,l.jsx)(m.Z,{color:"text.disabled",children:"or"}),(0,l.jsx)(x.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),(0,l.jsx)(b.Z,{children:(0,l.jsxs)(y.ZP,{className:"pis-4 plb-3",children:[(0,l.jsxs)("div",{className:"file-details",children:[(0,l.jsx)("div",{className:"file-preview",children:(i=a.length>0?a[0]:null,s&&i instanceof File?(0,l.jsx)("img",{width:38,height:38,alt:i.name,src:URL.createObjectURL(i)}):(null==r?void 0:r.image_url)?(0,l.jsx)("img",{width:38,height:38,alt:"image",src:r.image_url}):(0,l.jsx)(m.Z,{children:"No image available"}))}),a.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)(m.Z,{className:"file-name font-medium",color:"text.primary",children:null===(t=a[0])||void 0===t?void 0:t.name}),(0,l.jsx)(m.Z,{className:"file-size",variant:"body2",children:Math.round(a[0].size/100)/10>1e3?"".concat((Math.round(a[0].size/100)/1e4).toFixed(1)," mb"):"".concat((Math.round(a[0].size/100)/10).toFixed(1)," kb")})]})]}),a.length>0&&(0,l.jsx)(Z.Z,{onClick:()=>u(a[0]),children:(0,l.jsx)("i",{className:"ri-close-line text-xl"})})]})}),(0,l.jsx)("div",{className:"buttons",children:(0,l.jsx)(x.Z,{color:"error",variant:"outlined",onClick:()=>{n([]),o(!1)},children:"Remove All"})})]})]})})},z=i(14595),A=i(48965),I=i(56800),E=i.n(I),R=i(23705),F=i(42214),M=i(2375),D=i(98041),O=i(38133),B=i(40804);i(29641);let L=e=>{let{editor:t}=e;return t?(0,l.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[(0,l.jsx)(B.Z,{...t.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().toggleBold().run(),children:(0,l.jsx)("i",{className:E()("ri-bold",{"text-textSecondary":!t.isActive("bold")})})}),(0,l.jsx)(B.Z,{...t.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().toggleUnderline().run(),children:(0,l.jsx)("i",{className:E()("ri-underline",{"text-textSecondary":!t.isActive("underline")})})}),(0,l.jsx)(B.Z,{...t.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().toggleItalic().run(),children:(0,l.jsx)("i",{className:E()("ri-italic",{"text-textSecondary":!t.isActive("italic")})})}),(0,l.jsx)(B.Z,{...t.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().toggleStrike().run(),children:(0,l.jsx)("i",{className:E()("ri-strikethrough",{"text-textSecondary":!t.isActive("strike")})})}),(0,l.jsx)(B.Z,{...t.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().setTextAlign("left").run(),children:(0,l.jsx)("i",{className:E()("ri-align-left",{"text-textSecondary":!t.isActive({textAlign:"left"})})})}),(0,l.jsx)(B.Z,{...t.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().setTextAlign("center").run(),children:(0,l.jsx)("i",{className:E()("ri-align-center",{"text-textSecondary":!t.isActive({textAlign:"center"})})})}),(0,l.jsx)(B.Z,{...t.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().setTextAlign("right").run(),children:(0,l.jsx)("i",{className:E()("ri-align-right",{"text-textSecondary":!t.isActive({textAlign:"right"})})})}),(0,l.jsx)(B.Z,{...t.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().setTextAlign("justify").run(),children:(0,l.jsx)("i",{className:E()("ri-align-justify",{"text-textSecondary":!t.isActive({textAlign:"justify"})})})})]}):null};var H=e=>{let{setTitle:t,title:i,setDescription:n,description:r,errors:s}=e,o=(0,R.jE)({extensions:[F.V,D.V.configure({placeholder:"Write something here..."}),O.P.configure({types:["heading","paragraph"]}),M.v],content:r,onUpdate:e=>{let{editor:t}=e;n(t.getHTML())}});return(0,l.jsxs)(g.Z,{children:[(0,l.jsx)(f.Z,{title:"Post Information"}),(0,l.jsxs)(j.Z,{children:[(0,l.jsx)(a.ZP,{container:!0,spacing:5,className:"mbe-5",children:(0,l.jsx)(a.ZP,{item:!0,xs:12,children:(0,l.jsx)(A.Z,{fullWidth:!0,label:"Post Name",placeholder:"Enter Post Name",value:i,onChange:e=>t(e.target.value),error:null!=s&&!!s.title,helperText:null==s?void 0:s.title})})}),(0,l.jsx)(m.Z,{className:"mbe-1",children:"Description (Optional)"}),(0,l.jsx)(g.Z,{className:"p-0 border shadow-none",children:(0,l.jsxs)(j.Z,{className:"p-0",children:[(0,l.jsx)(L,{editor:o}),(0,l.jsx)(z.Z,{className:"mli-5"}),(0,l.jsx)(R.kg,{editor:o,className:"bs-[135px] overflow-y-auto flex ",value:r,onChange:e=>n(e.target.value)})]})})]})]})},U=i(28549),T=i(67351),q=i(11656),V=i(19004),W=i(31293),J=i(91933),X=i(10437),Y=e=>{var t;let{productId:i,setProductId:a,catId:n,setCatId:r,errors:s,newData:c}=e,{data:d}=(0,u.kJ)(o.yf),{data:h}=(0,u.kJ)(o.XR),{data:x}=(0,u.kJ)(o.wC,{variables:{news_id:c.id}});return(0,v.useEffect)(()=>{if(c){var e,t;r(null===(e=c.news_category)||void 0===e?void 0:e.id),a(x&&(null==x?void 0:null===(t=x.news_related_products)||void 0===t?void 0:t.map(e=>null==e?void 0:e.product_id)))}},[c]),(0,l.jsxs)(g.Z,{children:[(0,l.jsx)(f.Z,{title:"Organize"}),(0,l.jsx)(j.Z,{children:(0,l.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[(0,l.jsxs)(U.Z,{fullWidth:!0,children:[(0,l.jsx)(T.Z,{children:"Select News Category"}),(0,l.jsx)(V.Z,{label:"Select Category",value:n,onChange:e=>r(e.target.value),error:null==s?void 0:s.catId,children:null==d?void 0:null===(t=d.news_categories)||void 0===t?void 0:t.map((e,t)=>(0,l.jsx)(q.Z,{value:null==e?void 0:e.id,children:null==e?void 0:e.title},t))}),(0,l.jsx)(X.Z,{sx:{color:"red"},children:null==s?void 0:s.catId})]}),(0,l.jsx)(J.Z,{multiple:!0,value:i,onChange:(e,t)=>{a(t)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:(null==h?void 0:h.products)||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.title)||"",renderOption:(e,t,i)=>{let{selected:a}=i;return(0,v.createElement)("li",{...e,key:t.id,children:[(0,l.jsx)(W.Z,{style:{marginRight:8},checked:a}),t.title]})},renderInput:e=>(0,l.jsx)(A.Z,{...e,label:"Products",placeholder:"select products"})})]})})]})},G=i(16463),K=i(32897),Q=()=>{let{id:e}=(0,G.useParams)(),t=(0,G.useRouter)(),{setGlobalMsg:i,loading:x,setLoading:m}=(0,n.q)(),[g,f]=(0,v.useState)(),[j,Z]=(0,v.useState)(),[b,y]=(0,v.useState)(),[k,w]=(0,v.useState)([]),[N,C]=(0,v.useState)([]),[P,_]=(0,v.useState)(),[z,A]=(0,v.useState)(!1),[I]=(0,d.D)(s.dE),[E]=(0,d.D)(s.Hd),[R]=(0,d.D)(s.Sf),{data:F}=(0,u.kJ)(o.Ev,{variables:{id:e}}),M=F.news_by_pk,[D]=(0,d.D)(s.yn);(0,v.useEffect)(()=>{if(M){var e,t;w(M.image_url),f(M.title),Z(null===(t=(0,K.ZP)(M.body_html)[0])||void 0===t?void 0:null===(e=t.props)||void 0===e?void 0:e.children[0])}},[M]);let O=async()=>{m(!0);let e={},t=!1;if(g||(e.title="Title field is required",t=!0),b||(e.catId="Category field is required",t=!0),N||(e.productId="Product field is required",t=!0),t){_({...e}),m(!1);return}try{let e=M.image_url;if(k&&k!==(null==M?void 0:M.image_url)){let{data:t}=await R({variables:{content_type:"image",folder:"products"}});e=await (0,c.c)(k[0],t.getFileUploadUrl.fileUploadUrl,"image")}let t=await I({variables:{id:M.id,data:{title:g,body_html:j,news_category_id:b,image_url:k!==M.image_url?e:M.image_url}}});await D({variables:{news_id:t.data.update_news_by_pk.id}}),N.map(async e=>{var i;return await E({variables:{data:{news_id:null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.update_news_by_pk.id,product_id:e.id?e.id:e}}})}),m(!1),f(""),Z(""),C([]),y(""),i("✅ New post has been updated")}catch(e){i("❌ Add News Error"),console.log(e.response)}};return x?(0,l.jsx)(h.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(a.ZP,{item:!0,xs:12,children:(0,l.jsx)(p,{handleDiscardProduct:()=>{t.back()},handleEditNews:O})}),(0,l.jsx)(a.ZP,{item:!0,xs:12,md:8,children:(0,l.jsxs)(a.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(a.ZP,{item:!0,xs:12,children:(0,l.jsx)(H,{setTitle:f,title:g,setDescription:Z,description:j,errors:P})}),(0,l.jsx)(a.ZP,{item:!0,xs:12,children:(0,l.jsx)(S,{files:k,setFiles:w,newData:M,isImageChange:z,setIsImageChange:A})})]})}),(0,l.jsx)(a.ZP,{item:!0,xs:12,md:4,children:(0,l.jsx)(a.ZP,{container:!0,spacing:6,children:(0,l.jsx)(a.ZP,{item:!0,xs:12,children:(0,l.jsx)(Y,{catId:b,setCatId:y,productId:N,setProductId:C,errors:P,newData:M})})})})]}),(0,l.jsx)(r.Z,{})]})}}},function(e){e.O(0,[83,3572,7902,1441,3733,7138,9855,8329,7660,7800,8965,6715,6805,6101,7212,5313,8325,481,7172,3550,7683,3694,3164,6180,6273,2971,7023,1744],function(){return e(e.s=53714)}),_N_E=e.O()}]);