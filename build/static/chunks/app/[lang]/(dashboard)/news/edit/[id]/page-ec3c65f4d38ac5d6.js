(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9270],{9557:function(){},53714:function(e,t,i){Promise.resolve().then(i.bind(i,26597))},31293:function(e,t,i){"use strict";i.d(t,{Z:function(){return N}});var a=i(23950),n=i(22988),l=i(2265),r=i(44839),s=i(76990),o=i(10317),c=i(49690),d=i(59018),u=i(57437),h=(0,d.Z)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),m=(0,d.Z)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),x=(0,d.Z)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),p=i(12272),g=i(95885),v=i(48024),f=i(41738),j=i(70601);let Z=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],b=e=>{let{classes:t,indeterminate:i,color:a,size:l}=e,r={root:["root",i&&"indeterminate","color".concat((0,p.Z)(a)),"size".concat((0,p.Z)(l))]},o=(0,s.Z)(r,j.y,t);return(0,n.Z)({},t,o)},y=(0,v.ZP)(c.Z,{shouldForwardProp:e=>(0,f.Z)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.indeterminate&&t.indeterminate,t["size".concat((0,p.Z)(i.size))],"default"!==i.color&&t["color".concat((0,p.Z)(i.color))]]}})(e=>{let{theme:t,ownerState:i}=e;return(0,n.Z)({color:(t.vars||t).palette.text.secondary},!i.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===i.color?t.vars.palette.action.activeChannel:t.vars.palette[i.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,o.Fq)("default"===i.color?t.palette.action.active:t.palette[i.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==i.color&&{["&.".concat(j.Z.checked,", &.").concat(j.Z.indeterminate)]:{color:(t.vars||t).palette[i.color].main},["&.".concat(j.Z.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),k=(0,u.jsx)(m,{}),w=(0,u.jsx)(h,{}),C=(0,u.jsx)(x,{});var N=l.forwardRef(function(e,t){var i,s;let o=(0,g.i)({props:e,name:"MuiCheckbox"}),{checkedIcon:c=k,color:d="primary",icon:h=w,indeterminate:m=!1,indeterminateIcon:x=C,inputProps:p,size:v="medium",className:f}=o,j=(0,a.Z)(o,Z),N=m?x:h,P=m?x:c,S=(0,n.Z)({},o,{color:d,indeterminate:m,size:v}),z=b(S);return(0,u.jsx)(y,(0,n.Z)({type:"checkbox",inputProps:(0,n.Z)({"data-indeterminate":m},p),icon:l.cloneElement(N,{fontSize:null!=(i=N.props.fontSize)?i:v}),checkedIcon:l.cloneElement(P,{fontSize:null!=(s=P.props.fontSize)?s:v}),ownerState:S,ref:t,className:(0,r.Z)(z.root,f)},j,{classes:z}))})},70601:function(e,t,i){"use strict";i.d(t,{y:function(){return l}});var a=i(72296),n=i(70587);function l(e){return(0,n.ZP)("MuiCheckbox",e)}let r=(0,a.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]);t.Z=r},49690:function(e,t,i){"use strict";i.d(t,{Z:function(){return y}});var a=i(23950),n=i(22988),l=i(2265),r=i(44839),s=i(76990),o=i(12272),c=i(48024),d=i(41738),u=i(75115),h=i(88875),m=i(69022),x=i(72296),p=i(70587);function g(e){return(0,p.ZP)("PrivateSwitchBase",e)}(0,x.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var v=i(57437);let f=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],j=e=>{let{classes:t,checked:i,disabled:a,edge:n}=e,l={root:["root",i&&"checked",a&&"disabled",n&&"edge".concat((0,o.Z)(n))],input:["input"]};return(0,s.Z)(l,g,t)},Z=(0,c.ZP)(m.Z)(e=>{let{ownerState:t}=e;return(0,n.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),b=(0,c.ZP)("input",{shouldForwardProp:d.Z})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1});var y=l.forwardRef(function(e,t){let{autoFocus:i,checked:l,checkedIcon:s,className:o,defaultChecked:c,disabled:d,disableFocusRipple:m=!1,edge:x=!1,icon:p,id:g,inputProps:y,inputRef:k,name:w,onBlur:C,onChange:N,onFocus:P,readOnly:S,required:z=!1,tabIndex:_,type:A,value:I}=e,M=(0,a.Z)(e,f),[R,E]=(0,u.Z)({controlled:l,default:!!c,name:"SwitchBase",state:"checked"}),F=(0,h.Z)(),D=d;F&&void 0===D&&(D=F.disabled);let O="checkbox"===A||"radio"===A,B=(0,n.Z)({},e,{checked:R,disabled:D,disableFocusRipple:m,edge:x}),L=j(B);return(0,v.jsxs)(Z,(0,n.Z)({component:"span",className:(0,r.Z)(L.root,o),centerRipple:!0,focusRipple:!m,disabled:D,tabIndex:null,role:void 0,onFocus:e=>{P&&P(e),F&&F.onFocus&&F.onFocus(e)},onBlur:e=>{C&&C(e),F&&F.onBlur&&F.onBlur(e)},ownerState:B,ref:t},M,{children:[(0,v.jsx)(b,(0,n.Z)({autoFocus:i,checked:l,defaultChecked:c,className:L.input,disabled:D,id:O?g:void 0,name:w,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;E(t),N&&N(e,t)},readOnly:S,ref:k,required:z,ownerState:B,tabIndex:_,type:A},"checkbox"===A&&void 0===I?{}:{value:I},y)),R?s:p]}))})},40804:function(e,t,i){"use strict";var a=i(75519),n=i(48024),l=i(36887);let r=(0,n.ZP)(a.Z)(e=>{let{color:t,size:i,theme:a,variant:n}=e;return{minInlineSize:0,..."small"===i?{fontSize:"20px",padding:a.spacing("outlined"===n?1.5:1.75),"& i, & svg":{fontSize:"inherit"}}:{..."large"===i?{fontSize:"24px",padding:a.spacing("outlined"===n?2:2.25),"& i, & svg":{fontSize:"inherit"}}:{fontSize:"22px",padding:a.spacing("outlined"===n?1.75:2),"& i, & svg":{fontSize:"inherit"}}},...!t&&{color:"var(--mui-palette-action-active)","&:not(.Mui-disabled):hover, &:not(.Mui-disabled):active":{backgroundColor:"rgb(var(--mui-palette-text-primaryChannel) / 0.08)"},...l.Z.disableRipple&&{"&.Mui-focusVisible:not(.Mui-disabled)":{backgroundColor:"rgb(var(--mui-palette-text-primaryChannel) / 0.08)"}},"&.Mui-disabled":{opacity:.45,color:"var(--mui-palette-action-active)"},..."outlined"===n&&{border:"none !important",..."small"===i?{padding:a.spacing(1.75)}:{..."large"===i?{padding:a.spacing(2.25)}:{padding:a.spacing(2)}}},..."contained"===n&&{boxShadow:"none !important",backgroundColor:"transparent"}}}});t.Z=r},26597:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Q}});var a=i(57437),n=i(33037),l=i(9188),r=i(47380),s=i(1552),o=i(44514),c=i(90307),d=i(23944),u=i(43808),h=i(91326),m=i(75519),x=i(83719),p=e=>{let{handleDiscardProduct:t,handleEditNews:i}=e;return(0,a.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{variant:"h4",className:"mbe-1",children:"Edit a new Post"})}),(0,a.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[(0,a.jsx)(m.Z,{variant:"outlined",color:"secondary",onClick:t,children:"Discard"}),(0,a.jsx)(m.Z,{variant:"contained",onClick:i,children:"Edit New Post"})]})]})},g=i(2265),v=i(76520),f=i(20248),j=i(55205),Z=i(60335),b=i(32184),y=i(7547),k=i(48024),w=i(38746),C=i(31155),N=i(49758),P=i(36933);let S=(0,k.ZP)(P.Z)(e=>{let{theme:t}=e;return{"& .dropzone":{minHeight:"unset",padding:t.spacing(12),[t.breakpoints.down("sm")]:{paddingInline:t.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:t.typography.body1.fontWeight}}}});var z=e=>{var t;let i;let{files:n,setFiles:l,newData:r,isImageChange:s,setIsImageChange:o}=e,{getRootProps:c,getInputProps:d}=(0,w.uI)({multiple:!1,onDrop:e=>{o(!0),l(e.map(e=>Object.assign(e)))}}),u=()=>{l([]),o(!1)};return(0,a.jsx)(S,{children:(0,a.jsxs)(v.Z,{children:[(0,a.jsx)(f.Z,{title:"Product Image",action:(0,a.jsx)(x.Z,{component:C.default,color:"primary",className:"font-medium",children:"Add media from URL"}),sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,a.jsxs)(j.Z,{children:[(0,a.jsxs)("div",{...c({className:"dropzone"}),children:[(0,a.jsx)("input",{...d()}),(0,a.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[(0,a.jsx)(N.default,{variant:"rounded",skin:"light",color:"secondary",children:(0,a.jsx)("i",{className:"ri-upload-2-line"})}),(0,a.jsx)(x.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),(0,a.jsx)(x.Z,{color:"text.disabled",children:"or"}),(0,a.jsx)(m.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),(0,a.jsx)(b.Z,{children:(0,a.jsxs)(y.ZP,{className:"pis-4 plb-3",children:[(0,a.jsxs)("div",{className:"file-details",children:[(0,a.jsx)("div",{className:"file-preview",children:(i=n.length>0?n[0]:null,s&&i instanceof File?(0,a.jsx)("img",{width:38,height:38,alt:i.name,src:URL.createObjectURL(i)}):(null==r?void 0:r.image_url)?(0,a.jsx)("img",{width:38,height:38,alt:"image",src:r.image_url}):(0,a.jsx)(x.Z,{children:"No image available"}))}),n.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Z,{className:"file-name font-medium",color:"text.primary",children:null===(t=n[0])||void 0===t?void 0:t.name}),(0,a.jsx)(x.Z,{className:"file-size",variant:"body2",children:Math.round(n[0].size/100)/10>1e3?"".concat((Math.round(n[0].size/100)/1e4).toFixed(1)," mb"):"".concat((Math.round(n[0].size/100)/10).toFixed(1)," kb")})]})]}),n.length>0&&(0,a.jsx)(Z.Z,{onClick:()=>u(n[0]),children:(0,a.jsx)("i",{className:"ri-close-line text-xl"})})]})}),(0,a.jsx)("div",{className:"buttons",children:(0,a.jsx)(m.Z,{color:"error",variant:"outlined",onClick:()=>{l([]),o(!1)},children:"Remove All"})})]})]})})},_=i(14595),A=i(48965),I=i(56800),M=i.n(I),R=i(23705),E=i(42214),F=i(2375),D=i(98041),O=i(38133),B=i(40804);i(29641);let L=e=>{let{editor:t}=e;return t?(0,a.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[(0,a.jsx)(B.Z,{...t.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().toggleBold().run(),children:(0,a.jsx)("i",{className:M()("ri-bold",{"text-textSecondary":!t.isActive("bold")})})}),(0,a.jsx)(B.Z,{...t.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().toggleUnderline().run(),children:(0,a.jsx)("i",{className:M()("ri-underline",{"text-textSecondary":!t.isActive("underline")})})}),(0,a.jsx)(B.Z,{...t.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().toggleItalic().run(),children:(0,a.jsx)("i",{className:M()("ri-italic",{"text-textSecondary":!t.isActive("italic")})})}),(0,a.jsx)(B.Z,{...t.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().toggleStrike().run(),children:(0,a.jsx)("i",{className:M()("ri-strikethrough",{"text-textSecondary":!t.isActive("strike")})})}),(0,a.jsx)(B.Z,{...t.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().setTextAlign("left").run(),children:(0,a.jsx)("i",{className:M()("ri-align-left",{"text-textSecondary":!t.isActive({textAlign:"left"})})})}),(0,a.jsx)(B.Z,{...t.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().setTextAlign("center").run(),children:(0,a.jsx)("i",{className:M()("ri-align-center",{"text-textSecondary":!t.isActive({textAlign:"center"})})})}),(0,a.jsx)(B.Z,{...t.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().setTextAlign("right").run(),children:(0,a.jsx)("i",{className:M()("ri-align-right",{"text-textSecondary":!t.isActive({textAlign:"right"})})})}),(0,a.jsx)(B.Z,{...t.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>t.chain().focus().setTextAlign("justify").run(),children:(0,a.jsx)("i",{className:M()("ri-align-justify",{"text-textSecondary":!t.isActive({textAlign:"justify"})})})})]}):null};var H=e=>{let{setTitle:t,title:i,setDescription:l,description:r,errors:s}=e,o=(0,R.jE)({extensions:[E.V,D.V.configure({placeholder:"Write something here..."}),O.P.configure({types:["heading","paragraph"]}),F.v],content:r,onUpdate:e=>{let{editor:t}=e;l(t.getHTML())}});return(0,a.jsxs)(v.Z,{children:[(0,a.jsx)(f.Z,{title:"Post Information"}),(0,a.jsxs)(j.Z,{children:[(0,a.jsx)(n.ZP,{container:!0,spacing:5,className:"mbe-5",children:(0,a.jsx)(n.ZP,{item:!0,xs:12,children:(0,a.jsx)(A.Z,{fullWidth:!0,label:"Post Name",placeholder:"Enter Post Name",value:i,onChange:e=>t(e.target.value),error:null!=s&&!!s.title,helperText:null==s?void 0:s.title})})}),(0,a.jsx)(x.Z,{className:"mbe-1",children:"Description (Optional)"}),(0,a.jsx)(v.Z,{className:"p-0 border shadow-none",children:(0,a.jsxs)(j.Z,{className:"p-0",children:[(0,a.jsx)(L,{editor:o}),(0,a.jsx)(_.Z,{className:"mli-5"}),(0,a.jsx)(R.kg,{editor:o,className:"bs-[135px] overflow-y-auto flex ",value:r,onChange:e=>l(e.target.value)})]})})]})]})},U=i(28549),W=i(67351),T=i(11656),q=i(19004),V=i(31293),J=i(91933),X=i(10437),Y=e=>{var t;let{productId:i,setProductId:n,catId:l,setCatId:r,errors:s,newData:c}=e,{data:d}=(0,u.kJ)(o.yf),{data:h}=(0,u.kJ)(o.XR),{data:m}=(0,u.kJ)(o.wC,{variables:{news_id:c.id}});return(0,g.useEffect)(()=>{if(c){var e,t;r(null===(e=c.news_category)||void 0===e?void 0:e.id),n(m&&(null==m?void 0:null===(t=m.news_related_products)||void 0===t?void 0:t.map(e=>null==e?void 0:e.product_id)))}},[c]),(0,a.jsxs)(v.Z,{children:[(0,a.jsx)(f.Z,{title:"Organize"}),(0,a.jsx)(j.Z,{children:(0,a.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[(0,a.jsxs)(U.Z,{fullWidth:!0,children:[(0,a.jsx)(W.Z,{children:"Select News Category"}),(0,a.jsx)(q.Z,{label:"Select Category",value:l,onChange:e=>r(e.target.value),error:null==s?void 0:s.catId,children:null==d?void 0:null===(t=d.news_categories)||void 0===t?void 0:t.map((e,t)=>(0,a.jsx)(T.Z,{value:null==e?void 0:e.id,children:null==e?void 0:e.title},t))}),(0,a.jsx)(X.Z,{sx:{color:"red"},children:null==s?void 0:s.catId})]}),(0,a.jsx)(J.Z,{multiple:!0,value:i,onChange:(e,t)=>{n(t)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:(null==h?void 0:h.products)||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.title)||"",renderOption:(e,t,i)=>{let{selected:n}=i;return(0,g.createElement)("li",{...e,key:t.id,children:[(0,a.jsx)(V.Z,{style:{marginRight:8},checked:n}),t.title]})},renderInput:e=>(0,a.jsx)(A.Z,{...e,label:"Products",placeholder:"select products"})})]})})]})},G=i(16463),K=i(32897),Q=()=>{let{id:e}=(0,G.useParams)(),t=(0,G.useRouter)(),{setGlobalMsg:i,loading:m,setLoading:x}=(0,l.q)(),[v,f]=(0,g.useState)(),[j,Z]=(0,g.useState)(),[b,y]=(0,g.useState)(),[k,w]=(0,g.useState)([]),[C,N]=(0,g.useState)([]),[P,S]=(0,g.useState)(),[_,A]=(0,g.useState)(!1),[I]=(0,d.D)(s.dE),[M]=(0,d.D)(s.Hd),[R]=(0,d.D)(s.Sf),{data:E}=(0,u.kJ)(o.Ev,{variables:{id:e}}),F=E.news_by_pk,[D]=(0,d.D)(s.yn);(0,g.useEffect)(()=>{if(F){var e,t;w(F.image_url),f(F.title),Z(null===(t=(0,K.ZP)(F.body_html)[0])||void 0===t?void 0:null===(e=t.props)||void 0===e?void 0:e.children[0])}},[F]);let O=async()=>{x(!0);let e={},t=!1;if(v||(e.title="Title field is required",t=!0),b||(e.catId="Category field is required",t=!0),C||(e.productId="Product field is required",t=!0),t){S({...e}),x(!1);return}try{let e=F.image_url;if(k&&k!==(null==F?void 0:F.image_url)){let{data:t}=await R({variables:{content_type:"image",folder:"products"}});e=await (0,c.c)(k[0],t.getFileUploadUrl.fileUploadUrl,"image")}let t=await I({variables:{id:F.id,data:{title:v,body_html:j,news_category_id:b,image_url:k!==F.image_url?e:F.image_url}}});await D({variables:{news_id:t.data.update_news_by_pk.id}}),C.map(async e=>{var i;return await M({variables:{data:{news_id:null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.update_news_by_pk.id,product_id:e.id?e.id:e}}})}),x(!1),f(""),Z(""),N([]),y(""),i("✅ New post has been updated")}catch(e){i("❌ Add News Error"),console.log(e.response)}};return m?(0,a.jsx)(h.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.ZP,{container:!0,spacing:6,children:[(0,a.jsx)(n.ZP,{item:!0,xs:12,children:(0,a.jsx)(p,{handleDiscardProduct:()=>{t.back()},handleEditNews:O})}),(0,a.jsx)(n.ZP,{item:!0,xs:12,md:8,children:(0,a.jsxs)(n.ZP,{container:!0,spacing:6,children:[(0,a.jsx)(n.ZP,{item:!0,xs:12,children:(0,a.jsx)(H,{setTitle:f,title:v,setDescription:Z,description:j,errors:P})}),(0,a.jsx)(n.ZP,{item:!0,xs:12,children:(0,a.jsx)(z,{files:k,setFiles:w,newData:F,isImageChange:_,setIsImageChange:A})})]})}),(0,a.jsx)(n.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(n.ZP,{container:!0,spacing:6,children:(0,a.jsx)(n.ZP,{item:!0,xs:12,children:(0,a.jsx)(Y,{catId:b,setCatId:y,productId:C,setProductId:N,errors:P,newData:F})})})})]}),(0,a.jsx)(r.Z,{})]})}},36887:function(e,t){"use strict";t.Z={templateName:"ALPHA",homePageUrl:"/user/list",settingsCookieName:"Alpha",mode:"system",skin:"default",semiDark:!1,layout:"vertical",layoutPadding:24,compactContentWidth:1440,navbar:{type:"fixed",contentWidth:"compact",floating:!1,detached:!0,blur:!0},contentWidth:"compact",footer:{type:"static",contentWidth:"compact",detached:!0},disableRipple:!1,toastPosition:"top-right"}},29641:function(){}},function(e){e.O(0,[83,3572,7902,1441,3733,7138,9855,8329,7660,7800,8965,6715,6805,6101,7212,5313,8325,481,7172,3550,7683,3694,4366,9195,6180,7932,2971,7023,1744],function(){return e(e.s=53714)}),_N_E=e.O()}]);