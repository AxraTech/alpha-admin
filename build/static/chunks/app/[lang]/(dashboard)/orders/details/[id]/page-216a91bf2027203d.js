(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{84087:function(e,r,t){Promise.resolve().then(t.bind(t,73653))},80824:function(e,r,t){"use strict";var l=t(22988),i=t(23950),s=t(2265),a=t(44839),n=t(76990),o=t(83719),c=t(48024),d=t(95885),x=t(23849),u=t(1348),m=t(57437);let h=["className","id"],j=e=>{let{classes:r}=e;return(0,n.Z)({root:["root"]},x.a,r)},p=(0,c.ZP)(o.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,r)=>r.root})({padding:"16px 24px",flex:"0 0 auto"}),v=s.forwardRef(function(e,r){let t=(0,d.i)({props:e,name:"MuiDialogTitle"}),{className:n,id:o}=t,c=(0,i.Z)(t,h),x=j(t),{titleId:v=o}=s.useContext(u.Z);return(0,m.jsx)(p,(0,l.Z)({component:"h2",className:(0,a.Z)(x.root,n),ownerState:t,ref:r,variant:"h6",id:null!=o?o:v},c))});r.Z=v},47380:function(e,r,t){"use strict";var l=t(57437);t(2265);var i=t(3550),s=t(9188);r.Z=()=>{let{globalMsg:e,setGlobalMsg:r}=(0,s.q)();return(0,l.jsx)("div",{children:(0,l.jsx)(i.Z,{anchorOrigin:{horizontal:"center",vertical:"top"},open:!!e,autoHideDuration:3e3,onClose:()=>r(null),message:e})})}},73317:function(e,r,t){"use strict";t.d(r,{Q:function(){return l}});let l=e=>e.split(/\s/).reduce((e,r)=>e+=r.slice(0,1),"")},34364:function(e,r,t){"use strict";t.d(r,{c:function(){return l}});let l=async(e,r,t)=>{try{return(await fetch(r,{method:"PUT",headers:{"Content-Type":"".concat(t,"/*"),"x-amz-acl":"public-read"},body:e})).url.split("?")[0]}catch(e){throw alert(e),console.log(e),Error(e)}}},73653:function(e,r,t){"use strict";t.d(r,{default:function(){return Y}});var l=t(57437),i=t(33037),s=t(75519),a=t(57683),n=t(83719);t(6830),t(47868);var o=t(23944),c=t(44514),d=t(1552),x=t(2265),u=t(47380),m=t(9188),h=t(61096),j=t(80824),p=t(66124),v=t(48965),g=t(98784),f=t(34364);let Z={completed:"success",canceled:"error",refunded:"warning",delivering:"primary",preparing:"info",ordered:"secondary"};var b=e=>{var r;let{orderData:t}=e,{setGlobalMsg:i}=(0,m.q)(),[b,y]=(0,x.useState)(!1),[N]=(0,o.D)(d.HT),[w]=(0,o.D)(d.tt,{refetchQueries:[c.Nz]}),[S]=(0,o.D)(d.mt),[C]=(0,o.D)(d.Sf),[_,D]=(0,x.useState)();(0,x.useRef)(null);let P=async(e,r)=>{try{await w({variables:{order_id:e,status:r}}),i("Change Order Status")}catch(e){console.log("Change Status Error ",e)}};return(0,l.jsxs)("div",{className:"flex flex-wrap justify-between sm:items-center max-sm:flex-col gap-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(n.Z,{variant:"h5",children:"Order - ".concat(null==t?void 0:t.order_number)}),(0,l.jsx)(a.Z,{variant:"tonal",label:null==t?void 0:t.status,color:Z[(null==t?void 0:t.status)||""],size:"small"})]}),(0,l.jsx)(n.Z,{children:"".concat(new Date(null!==(r=null==t?void 0:t.ordered_at)&&void 0!==r?r:"").toLocaleString())})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(s.Z,{color:"error",variant:"outlined",onClick:()=>y(!0),children:"Complete"}),(0,l.jsx)(s.Z,{variant:"outlined",color:"error",onClick:()=>P(t.id,"canceled"),children:"Cancel"}),(0,l.jsx)(s.Z,{variant:"outlined",color:"primary",onClick:()=>P(t.id,"delivering"),children:"Delivering"}),(0,l.jsx)(s.Z,{variant:"outlined",color:"info",onClick:()=>P(t.id,"preparing"),children:"Preparing"})]}),(0,l.jsx)("div",{children:(0,l.jsxs)(h.Z,{fullWidth:"md",open:b,onClose:()=>y(!1),PaperProps:{component:"form",onSubmit:async e=>{e.preventDefault();let r=Object.fromEntries(new FormData(e.currentTarget).entries()),l=r.remark,s=r.image,a=await C({variables:{content_type:"image",folder:"products"}}),n=await (0,f.c)(s,a.data.getFileUploadUrl.fileUploadUrl,"image");await S({variables:{completion_photo_url:n,id:t.id,remark:l}}),await P(t.id,"completed"),i("âœ… Image Send Successfull"),y(!1)}},children:[(0,l.jsx)(j.Z,{children:"Order Complete"}),(0,l.jsxs)(p.Z,{children:[(0,l.jsx)(v.Z,{multiline:!0,autoFocus:!0,margin:"dense",id:"remark",name:"remark",label:"Remark",fullWidth:!0,variant:"standard"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)(v.Z,{type:"file",autoFocus:!0,margin:"dense",id:"image",name:"image",alt:"image",fullWidth:!0,variant:"standard"})]}),(0,l.jsxs)(g.Z,{children:[(0,l.jsx)(s.Z,{color:"error",onClick:()=>y(!1),children:"Cancel"}),(0,l.jsx)(s.Z,{color:"success",type:"submit",children:"OK"})]})]})}),(0,l.jsx)(u.Z,{})]})},y=t(76520),N=t(20248),w=t(55205),S=t(56800),C=t.n(S),_=t(13541),D=t(54175),P=t(33514);t(31155);var k=t(18156),O=t.n(k);let R=(e,r,t,l)=>{let i=(0,_.O4)(e.getValue(r),t);return l({itemRank:i}),i.passed},M=(0,D.Cl)(),F=e=>{var r;let{orderData:t}=e,[i,s]=(0,x.useState)({}),[a,o]=(0,x.useState)(t.order_items),[c,d]=(0,x.useState)(""),u=(0,x.useMemo)(()=>[M.accessor("title",{header:"Product",cell:e=>{let{row:r}=e;return(0,l.jsx)("div",{className:"flex items-center gap-3 text-wrap",children:(0,l.jsxs)("div",{className:"flex flex-col items-start  ",children:[(0,l.jsx)(n.Z,{color:"text.primary",className:"font-medium w-60 text-wrap",children:r.original.product.title}),(0,l.jsx)(n.Z,{variant:"body2",children:r.original.product.brand.title})]})})}}),M.accessor("order_items?.unit_price",{header:"Price",cell:e=>{let{row:r}=e;return(0,l.jsxs)(n.Z,{children:["".concat(r.original.unit_price.toLocaleString())," Ks"]})}}),M.accessor("quantity",{header:"Qty",cell:e=>{let{row:r}=e;return(0,l.jsx)(n.Z,{children:"".concat(r.original.quantity)})}}),M.accessor("total",{header:"Total",cell:e=>{var r;let{row:t}=e;return(0,l.jsxs)(n.Z,{children:["".concat(null===(r=t.original.total)||void 0===r?void 0:r.toLocaleString())," Ks"]})}})],[]),m=(0,P.b7)({data:a,columns:u,filterFns:{fuzzy:R},state:{rowSelection:i,globalFilter:c},initialState:{pagination:{pageSize:10}},enableRowSelection:!0,globalFilterFn:R,onRowSelectionChange:s,getCoreRowModel:(0,D.sC)(),onGlobalFilterChange:d,getFilteredRowModel:(0,D.vL)(),getSortedRowModel:(0,D.tj)(),getPaginationRowModel:(0,D.G_)(),getFacetedRowModel:(0,D.o6)(),getFacetedUniqueValues:(0,D.JG)(),getFacetedMinMaxValues:(0,D.HO)()});return(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:O().table,children:[(0,l.jsx)("thead",{children:m.getHeaderGroups().map(e=>(0,l.jsx)("tr",{children:e.headers.map(e=>{var r;return(0,l.jsx)("th",{children:e.isPlaceholder?null:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:C()({"flex items-center":e.column.getIsSorted(),"cursor-pointer select-none":e.column.getCanSort()}),onClick:e.column.getToggleSortingHandler(),children:[(0,P.ie)(e.column.columnDef.header,e.getContext()),null!==(r=({asc:(0,l.jsx)("i",{className:"ri-arrow-up-s-line text-xl"}),desc:(0,l.jsx)("i",{className:"ri-arrow-down-s-line text-xl"})})[e.column.getIsSorted()])&&void 0!==r?r:null]})})},e.id)})},e.id))}),(null===(r=m.getFilteredRowModel().rows)||void 0===r?void 0:r.length)===0?(0,l.jsx)("tbody",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:m.getVisibleFlatColumns().length,className:"text-center",children:"No data available"})})}):(0,l.jsx)("tbody",{className:"border-be",children:m.getRowModel().rows.slice(0,m.getState().pagination.pageSize).map(e=>(0,l.jsx)("tr",{className:C()({selected:e.getIsSelected()}),children:e.getVisibleCells().map(e=>(0,l.jsx)("td",{className:"first:is-14",children:(0,P.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})})};var T=e=>{var r,t;let{orderData:i}=e;return(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(N.Z,{title:"Order Details"}),(0,l.jsx)(F,{orderData:i}),(0,l.jsx)(w.Z,{className:"flex justify-end",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-12",children:[(0,l.jsx)(n.Z,{color:"text.primary",className:"min-is-[100px]",children:"Subtotal:"}),(0,l.jsxs)(n.Z,{color:"text.primary",className:"font-medium",children:[null==i?void 0:null===(r=i.items_total)||void 0===r?void 0:r.toLocaleString()," Ks"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-12",children:[(0,l.jsx)(n.Z,{color:"text.primary",className:"font-medium min-is-[100px]",children:"Total:"}),(0,l.jsxs)(n.Z,{color:"text.primary",className:"font-medium",children:[null==i?void 0:null===(t=i.total)||void 0===t?void 0:t.toLocaleString()," Ks"]})]})]})})]})},L=t(99295),z=t(32914),I=t(2397),E=t(26428),U=t(44711),q=t(48024),A=t(2645);let H=(0,q.ZP)(A.Z)({paddingLeft:0,paddingRight:0,"& .MuiTimelineItem-root":{width:"100%","&:before":{display:"none"},"& .MuiTimelineContent-root:last-child":{paddingBottom:0},"&:nth-last-child(2) .MuiTimelineConnector-root":{backgroundColor:"transparent",borderInlineStart:"1px dashed var(--mui-palette-divider)"},"& .MuiTimelineConnector-root":{backgroundColor:"var(--mui-palette-primary-main)"}}});var K=e=>{let{orderData:r}=e;return(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(N.Z,{title:"Delivery Activity"}),(0,l.jsx)(w.Z,{children:(0,l.jsxs)(H,{children:[(0,l.jsxs)(z.Z,{children:[(0,l.jsxs)(E.Z,{children:[(0,l.jsx)(L.Z,{color:"primary"}),(0,l.jsx)(U.Z,{})]}),(0,l.jsxs)(I.Z,{children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-x-2 mbe-2.5",children:[(0,l.jsxs)(n.Z,{color:"text.primary",className:"font-medium",children:["Order was placed (Order ID: #",r.order_number,")"]}),(0,l.jsx)(n.Z,{variant:"caption",children:new Date(r.ordered_at).toLocaleString()})]}),(0,l.jsx)(n.Z,{className:"mbe-2",children:"Order has been placed successfully"})]})]}),(0,l.jsxs)(z.Z,{children:[(0,l.jsxs)(E.Z,{children:[(0,l.jsx)(L.Z,{color:null===r.preparing_at?"grey":"primary"}),(0,l.jsx)(U.Z,{})]}),(0,l.jsxs)(I.Z,{children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-x-2 mbe-2.5",children:[(0,l.jsx)(n.Z,{color:"text.primary",className:"font-medium",children:"Preparing"}),null!==r.preparing_at&&(0,l.jsx)(n.Z,{variant:"caption",children:new Date(null==r?void 0:r.preparing_at).toLocaleString()})]}),(0,l.jsx)(n.Z,{className:"mbe-2",children:"Order is preparing"})]})]}),(0,l.jsxs)(z.Z,{children:[(0,l.jsxs)(E.Z,{children:[(0,l.jsx)(L.Z,{color:null===r.delivering_at?"grey":"primary"}),(0,l.jsx)(U.Z,{})]}),(0,l.jsxs)(I.Z,{children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-x-2 mbe-2.5",children:[(0,l.jsx)(n.Z,{color:"text.primary",className:"font-medium",children:"Delivering"}),null!==r.delivering_at&&(0,l.jsx)(n.Z,{variant:"caption",children:new Date(null==r?void 0:r.delivering_at).toLocaleString()})]}),(0,l.jsx)(n.Z,{className:"mbe-2",children:"Order is delivering "})]})]}),(0,l.jsxs)(z.Z,{children:[(0,l.jsxs)(E.Z,{children:[(0,l.jsx)(L.Z,{color:null===r.completed_at?"grey":"primary"}),(0,l.jsx)(U.Z,{})]}),(0,l.jsxs)(I.Z,{children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-x-2 mbe-2.5",children:[(0,l.jsx)(n.Z,{color:"text.primary",className:"font-medium",children:"Completed"}),null!==r.completed_at&&(0,l.jsx)(n.Z,{variant:"caption",children:new Date(null==r?void 0:r.completed_at).toLocaleString()})]}),(0,l.jsx)(n.Z,{className:"mbe-2",children:"Order has been completed "})]})]})]})})]})},V=t(96303);t(49758),t(30812);var G=t(73317);let Q=e=>{let{avatar:r,customer:t}=e;return r?(0,l.jsx)(V.Z,{src:r}):(0,l.jsx)(V.Z,{children:(0,G.Q)(t)})};var W=e=>{var r,t;let{orderData:i}=e;return(0,l.jsx)(y.Z,{children:(0,l.jsxs)(w.Z,{className:"flex flex-col gap-6",children:[(0,l.jsx)(n.Z,{variant:"h5",children:"Customer details"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[Q({avatar:null!==(r=null==i?void 0:i.avatar)&&void 0!==r?r:"",customer:null!==(t=null==i?void 0:i.user.profile_picture_url)&&void 0!==t?t:""}),(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)(n.Z,{color:"text.primary",className:"font-medium",children:null==i?void 0:i.user.name})})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)("div",{className:"flex justify-between items-center",children:(0,l.jsx)(n.Z,{color:"text.primary",className:"font-medium",children:"Contact info"})}),(0,l.jsxs)(n.Z,{children:["Mobile : ",i.user.phone]})]})]})})};t(54984);var J=e=>{let{orderData:r}=e;return(0,l.jsx)(y.Z,{children:(0,l.jsxs)(w.Z,{className:"flex flex-col gap-6",children:[(0,l.jsx)("div",{className:"flex justify-between items-center",children:(0,l.jsx)(n.Z,{variant:"h5",children:"Delivery Address"})}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)(n.Z,{children:["Receiver Name : ",r.receiver_name]}),(0,l.jsx)("br",{}),(0,l.jsxs)(n.Z,{children:["Receiver Phone : ",r.receiver_phone]}),(0,l.jsx)("br",{}),(0,l.jsxs)(n.Z,{children:["Receiver Address : ",r.receiver_address]})]})]})})},B=t(16463),X=t(43808),Y=()=>{let{id:e}=(0,B.useParams)(),{data:r}=(0,X.kJ)(c.Nz,{variables:{id:e}}),t=null==r?void 0:r.orders_by_pk;return(0,l.jsxs)(i.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(i.ZP,{item:!0,xs:12,children:(0,l.jsx)(b,{orderData:t})}),(0,l.jsx)(i.ZP,{item:!0,xs:12,md:8,children:(0,l.jsxs)(i.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(i.ZP,{item:!0,xs:12,children:(0,l.jsx)(T,{orderData:t})}),(0,l.jsx)(i.ZP,{item:!0,xs:12,children:(0,l.jsx)(K,{orderData:t})})]})}),(0,l.jsx)(i.ZP,{item:!0,xs:12,md:4,children:(0,l.jsxs)(i.ZP,{container:!0,spacing:6,children:[(0,l.jsx)(i.ZP,{item:!0,xs:12,children:(0,l.jsx)(W,{orderData:t})}),(0,l.jsx)(i.ZP,{item:!0,xs:12,children:(0,l.jsx)(J,{orderData:t})})]})})]})}},56800:function(e,r){var t;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var l={}.hasOwnProperty;function i(){for(var e="",r=0;r<arguments.length;r++){var t=arguments[r];t&&(e=s(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var r="";for(var t in e)l.call(e,t)&&e[t]&&(r=s(r,t));return r}(t)))}return e}function s(e,r){return r?e?e+" "+r:e+r:e}e.exports?(i.default=i,e.exports=i):void 0!==(t=(function(){return i}).apply(r,[]))&&(e.exports=t)}()}},function(e){e.O(0,[956,1441,9580,9855,8329,7660,7800,8965,6805,6101,7212,5313,481,7172,4175,3550,7683,779,887,468,478,4514,1552,7519,2971,7023,1744],function(){return e(e.s=84087)}),_N_E=e.O()}]);