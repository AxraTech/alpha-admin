(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9362],{49758:function(e,t,r){"use strict";r.r(t);var l=r(57437),a=r(2265),s=r(96303),i=r(48024),n=r(22305);let o=(0,i.ZP)(s.Z)(e=>{let{skin:t,color:r,size:l,theme:a}=e;return{...r&&"light"===t&&{backgroundColor:"var(--mui-palette-".concat(r,"-lightOpacity)"),color:"var(--mui-palette-".concat(r,"-main)")},...r&&"light-static"===t&&{backgroundColor:(0,n.$n)(a.palette[r].main,.84),color:"var(--mui-palette-".concat(r,"-main)")},...r&&"filled"===t&&{backgroundColor:"var(--mui-palette-".concat(r,"-main)"),color:"var(--mui-palette-".concat(r,"-contrastText)")},...l&&{height:l,width:l}}}),c=(0,a.forwardRef)((e,t)=>{let{color:r,skin:a="filled",...s}=e;return(0,l.jsx)(o,{color:r,skin:a,ref:t,...s})});t.default=c},9188:function(e,t,r){"use strict";r.d(t,{ApolloWrapper:function(){return m},q:function(){return x}});var l=r(57437),a=r(37736),s=r(33128),i=r(42090),n=r(23064),o=r(2265);let c=(0,o.createContext)();function d(){let e=new s.u({uri:"https://alpha.axra.app/v1/graphql",fetchOptions:{cache:"no-store"}}),t=(0,n.v)(async(e,t)=>{let{headers:r}=t;try{return{headers:{...r,"x-hasura-admin-secret":"alphapassword"}}}catch(e){return{headers:r}}});return new i.fe({cache:new i.h4,link:u.concat(t).concat(e)})}let u=(0,a.q)(e=>{let{graphQLErrors:t,networkError:r}=e;t&&(console.log("graphql",t),t.forEach(e=>{let{extensions:t}=e;("invalid-headers"===t.code||"invalid-jwt"===t.code)&&(localStorage.clear(),window.location.assign("".concat(window.location.origin,"/login")))})),r&&(console.log("[Network error]: ".concat(r)),alert("network connection problem"))}),x=()=>(0,o.useContext)(c);function m(e){let{children:t}=e,[r,a]=(0,o.useState)(null),[s,n]=(0,o.useState)(!1);return(0,l.jsx)(i.e$,{makeClient:d,children:(0,l.jsx)(c.Provider,{value:{globalMsg:r,setGlobalMsg:a,loading:s,setLoading:n},children:t})})}},47868:function(e,t,r){"use strict";var l=r(57437),a=r(2265);t.Z=e=>{let{element:t,dialog:r,elementProps:s,dialogProps:i,dataId:n,setData:o,data:c}=e,[d,u]=(0,a.useState)(!1),{onClick:x,...m}=s;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t,{onClick:e=>{x&&x(e),u(!0)},...m}),(0,l.jsx)(r,{open:d,setOpen:u,...i,dataId:n,setData:o,data:c})]})}},6830:function(e,t,r){"use strict";var l=r(57437),a=r(2265),s=r(61096),i=r(66124),n=r(98784),o=r(83719),c=r(75519),d=r(56800),u=r.n(d),x=r(23944),m=r(1552),h=r(16463),p=r(44514);t.Z=e=>{let{open:t,setOpen:r,type:d,dataId:g,data:f,setData:v}=e,{userId:y}=(0,h.useParams)(),[b]=(0,x.D)(m.HT),[j]=(0,x.D)(m.SZ,{refetchQueries:[p.L5]}),[C]=(0,x.D)(m.z7,{refetchQueries:[p.L5]}),[w]=(0,x.D)(m.aY),[D]=(0,x.D)(m.Ff),[Z]=(0,x.D)(m.ju),[P]=(0,x.D)(m.oe),[S]=(0,x.D)(m.DR),[_]=(0,x.D)(m.Qm),[N,k]=(0,a.useState)(!1),[Y,F]=(0,a.useState)(!1),U="disable-account"===d?"div":a.Fragment,A=()=>{k(!1),r(!1)},M=async e=>{if(!0===e)try{"disable-account"===d&&await j({variables:{id:y,data:{status:"disable"}}}),"enable-account"===d&&await j({variables:{id:y,data:{status:"verified"}}}),"verified-account"===d&&await C({variables:{user_id:y,is_verified:!0}}),"unverified-account"===d&&await C({variables:{user_id:y,is_verified:!1}}),"deleteProductCategory"===d&&(await w({variables:{id:g}}),v(f.filter(e=>e.id!==g))),"deleteProductBrand"===d&&(await D({variables:{id:g}}),v(f.filter(e=>e.id!==g))),"deletePost"===d&&(await Z({variables:{id:g}}),v(f.filter(e=>e.id!==g))),"deleteNewCategory"===d&&(await P({variables:{id:g}}),v(f.filter(e=>e.id!==g))),"deleteServiceCenter"===d&&(await S({variables:{id:g}}),v(f.filter(e=>e.id!==g))),"deleteProductDiscount"===d&&(await _({variables:{id:g}}),v(f.filter(e=>e.id!==g))),F(e),r(!1)}catch(e){console.log("Error",e)}else r(!1);F(e),k(!0),r(!1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.Z,{fullWidth:!0,maxWidth:"xs",open:t,onClose:()=>r(!1),children:[(0,l.jsxs)(i.Z,{className:"flex items-center flex-col text-center sm:pbs-16 sm:pbe-6 sm:pli-16",children:[(0,l.jsx)("i",{className:"ri-error-warning-line text-[88px] mbe-6 text-warning"}),(0,l.jsxs)(U,{..."disable-account"===d&&{className:"flex flex-col items-center gap-2"},children:[(0,l.jsxs)(o.Z,{variant:"h4",children:["unsubscribe"===d&&"Are you sure to cancel your subscription?","disable-account"===d&&"Are you sure?","delete-order"===d&&"Are you sure?","delete-customer"===d&&"Are you sure?"]}),"verified-account"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to verify your account?"}),"unverified-account"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to unverify your account?"}),"disable-account"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to disalbe user!"}),"enable-account"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to enable user!"}),"deleteProductCategory"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deleteProductDiscount"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deleteServiceCenter"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deleteProductBrand"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deletePost"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deleteNewCategory"===d&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"})]})]}),(0,l.jsxs)(n.Z,{className:"justify-center pbs-0 sm:pbe-16 sm:pli-16",children:[(0,l.jsx)(c.Z,{variant:"contained",onClick:()=>M(!0),children:"disable-account"===d?"Yes, Disabel User!":"enable-account"===d?"Yes, Enable User!":"deleteProductCategory"===d?"Yes, Delete Category!":"deleteProductBrand"===d?"Yes, Delete Brand":"delete-customer"===d?"Yes, Delete Customer!":"verified-account"===d?"Yes , User Verify":"unverified-account"===d?"Yes, User Unverify":"deletePost"===d?"Yes, Delete Post":"deleteNewCategory"===d?"Yes, Delete Category":"deleteServiceCenter"===d?"Yes, Delete Service Center":"deleteProductDiscount"===d?"Yes, Delete Product Discount":"Yes"}),(0,l.jsx)(c.Z,{variant:"outlined",color:"secondary",onClick:()=>{M(!1)},children:"Cancel"})]})]}),(0,l.jsxs)(s.Z,{open:N,onClose:A,children:[(0,l.jsxs)(i.Z,{className:"flex items-center flex-col text-center sm:pbs-16 sm:pbe-6 sm:pli-16",children:[(0,l.jsx)("i",{className:u()("text-[88px] mbe-6",{"ri-checkbox-circle-line":Y,"text-success":Y,"ri-close-circle-line":!Y,"text-error":!Y})}),(0,l.jsx)(o.Z,{variant:"h4",className:"mbe-2",children:Y?"".concat("disable-account"===d?"User Disabled":"enable-account"===d?"User Enabled":"verified-account"===d?"User Verified":"deleteProductCategory"===d?"Delete Category":"unverified"===d?"User Unverified":"deleteProductBrand"===d?"Delete Brand":"deletePost"===d?"Delete Post":"deleteNewCategory"===d?"Delete New Category":"deleteServiceCenter"===d?"Delete Service Center":"deleteProductDiscount"===d?"Delete Product Discount":"yes"):"Cancelled"}),(0,l.jsx)(o.Z,{color:"text.primary",children:Y?(0,l.jsxs)(l.Fragment,{children:["verified-account"===d&&"Your account has been verified successfully.","unverified-account"===d&&"Your account has been unverified successfully.","disable-account"===d&&"User has been disabled.","enable-account"===d&&"User has been enabled.","deleteProductCategory"===d&&"Your Category has been deleted successfully.","deleteServiceCenter"===d&&"Your Service Center has been deleted successfully.","deleteNewCategory"===d&&"Your New Category has been deleted successfully.","deleteProductDiscount"===d&&"Your Product Discount has been deleted successfully.","deleteProductBrand"===d&&"Your Category has been deleted successfully.","deletePost"===d&&"Your Post has been deleted successfully.","delete-customer"===d&&"Your customer removed successfully."]}):(0,l.jsxs)(l.Fragment,{children:["verified-account"===d&&"User Verify Cancelled!","unverified-account"===d&&"User Unverify Cancelled!","disable-account"===d&&"Cancelled Disabled :)","deleteProductCategory"===d&&"Category Deletion Cancelled","deleteProductDiscount"===d&&"Product Discount Deletion Cancelled","deleteServiceCenter"===d&&"Service Center Deletion Cancelled","deleteNewCategory"===d&&"New Category Deletion Cancelled","deleteProductBrand"===d&&"Brand Deletion Cancelled","deletePost"===d&&"Post Deletion Cancelled!","delete-customer"===d&&"Customer Deletion Cancelled"]})})]}),(0,l.jsx)(n.Z,{className:"justify-center pbs-0 sm:pbe-16 sm:pli-16",children:(0,l.jsx)(c.Z,{variant:"contained",color:"success",onClick:A,children:"Ok"})})]})]})}},47380:function(e,t,r){"use strict";var l=r(57437);r(2265);var a=r(3550),s=r(9188);t.Z=()=>{let{globalMsg:e,setGlobalMsg:t}=(0,s.q)();return(0,l.jsx)("div",{children:(0,l.jsx)(a.Z,{anchorOrigin:{horizontal:"center",vertical:"top"},open:!!e,autoHideDuration:3e3,onClose:()=>t(null),message:e})})}},73317:function(e,t,r){"use strict";r.d(t,{Q:function(){return l}});let l=e=>e.split(/\s/).reduce((e,t)=>e+=t.slice(0,1),"")},89362:function(e,t,r){"use strict";r.d(t,{Z:function(){return z}});var l=r(57437),a=r(2265),s=r(16463),i=r(75519),n=r(76520),o=r(55205),c=r(60335),d=r(67838),u=r(48965),x=r(83719),m=r(58438),h=r(28549),p=r(67351),g=r(11656),f=r(19004),v=r(14595),y=r(39343),b=r(23944),j=r(43808),C=r(1552),w=r(47380),D=r(9188),Z=r(44514),P=r(10437),S=e=>{var t;let{setGlobalMsg:r}=(0,D.q)(),{open:s,handleClose:n,discountData:o,loading:d,setLoading:S,setData:_}=e,[N]=(0,b.D)(C.dn),[k,Y]=(0,a.useState)(),[F,U]=(0,a.useState)(),{data:A}=(0,j.kJ)(Z.pR),[M,R]=(0,a.useState)("");(0,a.useRef)(null);let{control:q,reset:E,handleSubmit:V,formState:{errors:z}}=(0,y.cI)({defaultValues:{min_order:"",discounted_value:"",customer_type:""}});(0,a.useEffect)(()=>{o&&E({min_order:o.min_order,discounted_value:o.discounted_value,customer_type:o.customer_type})},[o,E]);let B=async e=>{try{S(!0);let t=await N({variables:{id:o.id,data:{min_order:Number(e.min_order),customer_type:F,discounted_value:Number(e.discounted_value),product_id:o.product_id}}});S(!1),_(e=>e.map(e=>e.id===(null==o?void 0:o.id)?{...e,...t.data.update_product_discounts_by_pk}:e)),I(),r("✅ Product discount has been updated")}catch(e){console.log("Error ",e)}},I=()=>{n(),E({title:"",description:""}),R("")};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(m.ZP,{open:s,anchor:"right",variant:"temporary",onClose:I,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:{xs:300,sm:400}}},children:[(0,l.jsxs)("div",{className:"flex items-center justify-between pli-5 plb-4",children:[(0,l.jsx)(x.Z,{variant:"h5",children:"Edit Discount"}),(0,l.jsx)(c.Z,{size:"small",onClick:I,children:(0,l.jsx)("i",{className:"ri-close-line text-2xl"})})]}),(0,l.jsx)(v.Z,{}),(0,l.jsx)("div",{className:"p-5",children:(0,l.jsxs)("form",{onSubmit:V(e=>B(e)),className:"flex flex-col gap-5",children:[(0,l.jsx)(y.Qr,{name:"min_order",control:q,rules:{required:!0},render:e=>{let{field:t}=e;return(0,l.jsx)(u.Z,{...t,fullWidth:!0,type:"number",label:"Minimal Order",placeholder:"",...z.min_order&&{error:!0,helperText:"This field is required."}})}}),(0,l.jsx)(y.Qr,{name:"discounted_value",control:q,rules:{required:!0},render:e=>{let{field:t}=e;return(0,l.jsx)(u.Z,{...t,fullWidth:!0,type:"number",label:"Discounted Value",placeholder:"",...z.discounted_value&&{error:!0,helperText:"This field is required."}})}}),(0,l.jsxs)(h.Z,{fullWidth:!0,children:[(0,l.jsx)(p.Z,{children:"Select User Role"}),(0,l.jsx)(f.Z,{label:"Select Vendor",value:F,onChange:e=>U(e.target.value),children:null==A?void 0:null===(t=A.user_roles)||void 0===t?void 0:t.map((e,t)=>(0,l.jsx)(g.Z,{value:null==e?void 0:e.role_name,children:null==e?void 0:e.role_name},t))}),(0,l.jsx)(P.Z,{sx:{color:"red"},children:null==z?void 0:z.role_name})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(i.Z,{variant:"contained",type:"submit",loading:d,children:"Update"}),(0,l.jsx)(i.Z,{variant:"outlined",color:"error",type:"reset",onClick:I,children:"Discard"})]})]})})]}),(0,l.jsx)(w.Z,{})]})},_=r(13541),N=r(54175),k=r(33514),Y=r(56800),F=r.n(Y),U=r(6830),A=r(47868);r(49758),r(73317);var M=r(18156),R=r.n(M);let q=(e,t,r,l)=>{let a=(0,_.O4)(e.getValue(t),r);return l({itemRank:a}),a.passed},E=e=>{let{value:t,onChange:r,debounce:s=500,...i}=e,[n,o]=(0,a.useState)(t);return(0,a.useEffect)(()=>{o(t)},[t]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{r(n)},s);return()=>clearTimeout(e)},[n]),(0,l.jsx)(u.Z,{...i,value:n,onChange:e=>o(e.target.value),size:"small"})},V=(0,N.Cl)();var z=e=>{let{productData:t}=e,{data:r}=(0,j.kJ)(Z.ef,{variables:{product_id:t.id},fetchPolicy:"network-only"}),{data:u}=(0,j.kJ)(Z.DF),{setGlobalMsg:m}=(0,D.q)(),[h,p]=(0,a.useState)(""),[g,f]=(0,a.useState)(!1),[v,y]=(0,a.useState)({}),[P,_]=(0,a.useState)(r.product_discounts),[Y,M]=(0,a.useState)(),[z,B]=(0,a.useState)(P),[I,O]=(0,a.useState)(""),[T,W]=(0,a.useState)(!1),[L]=(0,b.D)(C.Qm),Q=(e,t,r)=>({children:e,color:t,variant:r}),{lang:H}=(0,s.useParams)();console.log("data -----",P);let G=(0,a.useMemo)(()=>[V.accessor("id",{header:"#",cell:e=>{let{row:t}=e;return(0,l.jsx)(x.Z,{color:"primary",children:"".concat(t.original.id.substring(0,10))})}}),V.accessor("min_order ",{header:"Minimal Order",cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)(x.Z,{className:"font-medium",color:"text.primary",children:t.original.min_order})})})}}),V.accessor("customer_type ",{header:"Customer Type",cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)(x.Z,{className:"font-medium",color:"text.primary",children:t.original.customer_type})})})}}),V.accessor("discounted_value",{header:"Discounted Value",cell:e=>{let{row:t}=e;return(0,l.jsx)(x.Z,{children:"".concat(null!==t.original.discounted_value?t.original.discounted_value.toLocaleString():"-")})}}),V.accessor("created_at",{header:"Date",cell:e=>{let{row:t}=e;return(0,l.jsx)(x.Z,{children:t.original.created_at.substring(0,10)})}}),V.accessor("action",{header:"Action",cell:e=>{let{row:t}=e;return(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(A.Z,{element:i.Z,elementProps:Q((0,l.jsx)("i",{className:"ri-delete-bin-7-line text-[22px] text-red-500"}),"error",""),dialog:U.Z,dialogProps:{type:"deleteProductDiscount"},dataId:t.original.id,setData:_,data:P}),(0,l.jsx)(c.Z,{onClick:()=>{M(t.original),W(!0)},children:(0,l.jsx)("i",{className:"ri-pencil-line"})})]})},enableSorting:!1})],[P,z]),J=(0,k.b7)({data:z,columns:G,filterFns:{fuzzy:q},state:{rowSelection:v,globalFilter:I},initialState:{pagination:{pageSize:10}},enableRowSelection:!0,globalFilterFn:q,onRowSelectionChange:y,getCoreRowModel:(0,N.sC)(),onGlobalFilterChange:O,getFilteredRowModel:(0,N.vL)(),getSortedRowModel:(0,N.tj)(),getPaginationRowModel:(0,N.G_)(),getFacetedRowModel:(0,N.o6)(),getFacetedUniqueValues:(0,N.JG)(),getFacetedMinMaxValues:(0,N.HO)()});return(0,a.useEffect)(()=>{B(null==P?void 0:P.filter(e=>!h||e.status.toLowerCase().replace(/\s+/g,"-")===h))},[h,P,B]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(o.Z,{className:"flex justify-between gap-4 flex-wrap flex-col sm:flex-row items-center",children:(0,l.jsx)("div",{className:"flex flex-col sm:flex-row max-sm:is-full items-center gap-4",children:(0,l.jsx)(E,{value:null!=I?I:"",onChange:e=>O(String(e)),placeholder:"Search Product Discount",className:"max-sm:is-full min-is-[200px]"})})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:R().table,children:[(0,l.jsx)("thead",{children:J.getHeaderGroups().map(e=>(0,l.jsx)("tr",{children:e.headers.map(e=>{var t;return(0,l.jsx)("th",{children:e.isPlaceholder?null:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:F()({"flex items-center":e.column.getIsSorted(),"cursor-pointer select-none":e.column.getCanSort()}),onClick:e.column.getToggleSortingHandler(),children:[(0,k.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:(0,l.jsx)("i",{className:"ri-arrow-up-s-line text-xl"}),desc:(0,l.jsx)("i",{className:"ri-arrow-down-s-line text-xl"})})[e.column.getIsSorted()])&&void 0!==t?t:null]})})},e.id)})},e.id))}),0===J.getFilteredRowModel().rows.length?(0,l.jsx)("tbody",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:J.getVisibleFlatColumns().length,className:"text-center",children:"No data available"})})}):(0,l.jsx)("tbody",{children:J.getRowModel().rows.slice(0,J.getState().pagination.pageSize).map(e=>(0,l.jsx)("tr",{className:F()({selected:e.getIsSelected()}),children:e.getVisibleCells().map(e=>(0,l.jsx)("td",{children:(0,k.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,l.jsx)(d.Z,{rowsPerPageOptions:[10,25,50],component:"div",className:"border-bs",count:J.getFilteredRowModel().rows.length,rowsPerPage:J.getState().pagination.pageSize,page:J.getState().pagination.pageIndex,SelectProps:{inputProps:{"aria-label":"rows per page"}},onPageChange:(e,t)=>{J.setPageIndex(t)},onRowsPerPageChange:e=>J.setPageSize(Number(e.target.value))})]}),(0,l.jsx)(w.Z,{}),(0,l.jsx)(S,{open:T,discountData:Y,setData:_,loading:g,setLoading:f,handleClose:()=>W(!T)})]})}},18156:function(e){e.exports={table:"table_table__cB3AL",cellWithInput:"table_cellWithInput__N6u24"}}}]);