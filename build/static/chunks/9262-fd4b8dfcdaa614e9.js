(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9262],{66967:function(e,t,r){"use strict";var l=r(59533),a=r(31229);t.Z=e=>{let{element:t,dialog:r,elementProps:s,dialogProps:i,dataId:n,setData:o,data:d}=e,[c,u]=(0,a.useState)(!1),{onClick:x,...m}=s;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t,{onClick:e=>{x&&x(e),u(!0)},...m}),(0,l.jsx)(r,{open:c,setOpen:u,...i,dataId:n,setData:o,data:d})]})}},83338:function(e,t,r){"use strict";var l=r(59533),a=r(31229),s=r(83354),i=r(8957),n=r(5443),o=r(84323),d=r(29900);r(72860);var c=r(45641),u=r(29349),x=r(61250),m=r(31029);t.Z=e=>{let{open:t,setOpen:r,type:h,dataId:p,data:v,setData:g}=e,{userId:j}=(0,x.useParams)(),[f]=(0,c.D)(u.HT),[y]=(0,c.D)(u.SZ,{refetchQueries:[m.L5]}),[b]=(0,c.D)(u.z7,{refetchQueries:[m.L5]}),[_]=(0,c.D)(u.aY),[Z]=(0,c.D)(u.Ff),[w]=(0,c.D)(u.ju),[S]=(0,c.D)(u.oe),[C]=(0,c.D)(u.DR),[N]=(0,c.D)(u.Qm),[D,P]=(0,a.useState)(!1),[k,F]=(0,a.useState)(!1),M="disable-account"===h?"div":a.Fragment,A=async e=>{if(!0===e)try{"disable-account"===h&&await y({variables:{id:j,data:{status:"disable"}}}),"enable-account"===h&&await y({variables:{id:j,data:{status:"verified"}}}),"verified-account"===h&&await b({variables:{user_id:j,is_verified:!0}}),"unverified-account"===h&&await b({variables:{user_id:j,is_verified:!1}}),"deleteProductCategory"===h&&(await _({variables:{id:p}}),g(v.filter(e=>e.id!==p))),"deleteProductBrand"===h&&(await Z({variables:{id:p}}),g(v.filter(e=>e.id!==p))),"deletePost"===h&&(await w({variables:{id:p}}),g(v.filter(e=>e.id!==p))),"deleteNewCategory"===h&&(await S({variables:{id:p}}),g(v.filter(e=>e.id!==p))),"deleteServiceCenter"===h&&(await C({variables:{id:p}}),g(v.filter(e=>e.id!==p))),"deleteProductDiscount"===h&&(await N({variables:{id:p}}),g(v.filter(e=>e.id!==p))),F(e),r(!1)}catch(e){console.log("Error",e)}else r(!1);F(e),P(!0),r(!1)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(s.Z,{fullWidth:!0,maxWidth:"xs",open:t,onClose:()=>r(!1),children:[(0,l.jsxs)(i.Z,{className:"flex items-center flex-col text-center sm:pbs-16 sm:pbe-6 sm:pli-16",children:[(0,l.jsx)("i",{className:"ri-error-warning-line text-[88px] mbe-6 text-warning"}),(0,l.jsxs)(M,{..."disable-account"===h&&{className:"flex flex-col items-center gap-2"},children:[(0,l.jsxs)(o.Z,{variant:"h4",children:["unsubscribe"===h&&"Are you sure to cancel your subscription?","disable-account"===h&&"Are you sure?","delete-order"===h&&"Are you sure?","delete-customer"===h&&"Are you sure?"]}),"verified-account"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to verify your account?"}),"unverified-account"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to unverify your account?"}),"disable-account"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to disalbe user!"}),"enable-account"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to enable user!"}),"deleteProductCategory"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deleteProductDiscount"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deleteServiceCenter"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deleteProductBrand"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deletePost"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"}),"deleteNewCategory"===h&&(0,l.jsx)(o.Z,{color:"text.primary",children:"Are you sure you want to delete?"})]})]}),(0,l.jsxs)(n.Z,{className:"justify-center pbs-0 sm:pbe-16 sm:pli-16",children:[(0,l.jsx)(d.Z,{variant:"contained",onClick:()=>A(!0),children:"disable-account"===h?"Yes, Disabel User!":"enable-account"===h?"Yes, Enable User!":"deleteProductCategory"===h?"Yes, Delete Category!":"deleteProductBrand"===h?"Yes, Delete Brand":"delete-customer"===h?"Yes, Delete Customer!":"verified-account"===h?"Yes , User Verify":"unverified-account"===h?"Yes, User Unverify":"deletePost"===h?"Yes, Delete Post":"deleteNewCategory"===h?"Yes, Delete Category":"deleteServiceCenter"===h?"Yes, Delete Service Center":"deleteProductDiscount"===h?"Yes, Delete Product Discount":"Yes"}),(0,l.jsx)(d.Z,{variant:"outlined",color:"secondary",onClick:()=>{A(!1)},children:"Cancel"})]})]})})}},348:function(e,t,r){"use strict";r.d(t,{Q:function(){return l}});let l=e=>e.split(/\s/).reduce((e,t)=>e+=t.slice(0,1),"")},68043:function(e,t,r){"use strict";var l=r(59533),a=r(31229),s=r(29900),i=r(48111),n=r(88363),o=r(83379),d=r(84448),c=r(60753),u=r(6532),x=r(37911),m=r(61732),h=r(84323),p=r(12895),v=r(76422),g=r(29349),j=r(31029),f=r(45641),y=r(40877),b=r(64094),_=r(20526);t.Z=e=>{var t;let{setGlobalMsg:r}=(0,p.q)(),{open:Z,handleClose:w,data:S,productId:C,loading:N,setLoading:D,setData:P}=e,[k]=(0,f.D)(g.Lh),[F,M]=(0,a.useState)(""),{data:A}=(0,y.kJ)(j.pR),[R,I]=(0,a.useState)(null),[T,V]=(0,a.useState)(!1);(0,a.useRef)(null);let{control:Y,reset:q,handleSubmit:E,formState:{errors:z}}=(0,_.cI)({defaultValues:{min_order:"",customer_type:"",discounted_value:"",product_id:""}}),W=async e=>{if(!F){V(!0);return}try{D(!0);let t=await k({variables:{data:{min_order:Number(e.min_order),customer_type:F,discounted_value:Number(e.discounted_value),product_id:C}}});D(!1),q({min_order:"",customer_type:"",discounted_value:"",product_id:""}),P([...S,t.data.insert_product_discounts_one]),M(""),L(),w(),r("➕ Added New Product Discount")}catch(e){console.log("Error ",e)}},L=()=>{q({min_order:"",customer_type:"",discounted_value:"",product_id:""}),I(""),M("")};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.ZP,{open:Z,anchor:"right",variant:"temporary",onClose:w,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:{xs:300,sm:400}}},children:[(0,l.jsxs)("div",{className:"flex items-center justify-between pli-5 plb-4",children:[(0,l.jsx)(h.Z,{variant:"h5",children:"Add Discount"}),(0,l.jsx)(d.Z,{size:"small",onClick:w,children:(0,l.jsx)("i",{className:"ri-close-line text-2xl"})})]}),(0,l.jsx)(i.Z,{}),(0,l.jsx)("div",{className:"p-5",children:(0,l.jsxs)("form",{onSubmit:E(e=>W(e)),className:"flex flex-col gap-5",children:[(0,l.jsx)(_.Qr,{name:"min_order",control:Y,rules:{required:!0},render:e=>{let{field:t}=e;return(0,l.jsx)(m.Z,{...t,fullWidth:!0,type:"number",label:"Minimal Order",placeholder:"",...z.min_order&&{error:!0,helperText:"This field is required."}})}}),(0,l.jsx)(_.Qr,{name:"discounted_value",control:Y,rules:{required:!0},render:e=>{let{field:t}=e;return(0,l.jsx)(m.Z,{...t,fullWidth:!0,type:"number",label:"Discounted Value",placeholder:"",...z.discounted_value&&{error:!0,helperText:"This field is required."}})}}),(0,l.jsxs)(o.Z,{fullWidth:!0,children:[(0,l.jsx)(c.Z,{children:"Select User Role"}),(0,l.jsx)(x.Z,{label:"Select Vendor",value:F||"",onChange:e=>M(e.target.value),children:null==A?void 0:null===(t=A.user_roles)||void 0===t?void 0:t.map((e,t)=>(0,l.jsx)(u.Z,{value:null==e?void 0:e.role_name,children:null==e?void 0:e.role_name},t))}),T&&(0,l.jsx)(b.Z,{sx:{color:"red"},children:"Please select a user role."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(s.Z,{variant:"contained",type:"submit",loading:N,children:"Add"}),(0,l.jsx)(s.Z,{variant:"outlined",color:"error",type:"reset",onClick:L,children:"Discard"})]})]})})]}),(0,l.jsx)(v.Z,{})]})}},69262:function(e,t,r){"use strict";r.d(t,{Z:function(){return z}});var l=r(59533),a=r(31229),s=r(61250),i=r(29900),n=r(76778),o=r(54323),d=r(84448),c=r(13954),u=r(61732),x=r(84323),m=r(88363),h=r(83379),p=r(60753),v=r(6532),g=r(37911),j=r(48111),f=r(20526),y=r(45641),b=r(40877),_=r(29349),Z=r(76422),w=r(12895),S=r(31029),C=r(64094),N=e=>{var t;let{setGlobalMsg:r}=(0,w.q)(),{open:s,handleClose:n,discountData:o,loading:c,setLoading:N,setData:D}=e,[P]=(0,y.D)(_.dn),[k,F]=(0,a.useState)(),[M,A]=(0,a.useState)(),{data:R}=(0,b.kJ)(S.pR),[I,T]=(0,a.useState)("");(0,a.useRef)(null);let{control:V,reset:Y,handleSubmit:q,formState:{errors:E}}=(0,f.cI)({defaultValues:{min_order:"",discounted_value:"",customer_type:""}});(0,a.useEffect)(()=>{o&&(Y({min_order:o.min_order,discounted_value:o.discounted_value,customer_type:o.customer_type}),A(o.customer_type))},[o,Y]);let z=async e=>{try{N(!0);let t=await P({variables:{id:o.id,data:{min_order:Number(e.min_order),customer_type:M,discounted_value:Number(e.discounted_value),product_id:o.product_id}}});N(!1),D(e=>e.map(e=>e.id===(null==o?void 0:o.id)?{...e,...t.data.update_product_discounts_by_pk}:e)),W(),r("✅ Product discount has been updated")}catch(e){console.log("Error ",e)}},W=()=>{n(),Y({title:"",description:""}),T("")};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(m.ZP,{open:s,anchor:"right",variant:"temporary",onClose:W,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:{xs:300,sm:400}}},children:[(0,l.jsxs)("div",{className:"flex items-center justify-between pli-5 plb-4",children:[(0,l.jsx)(x.Z,{variant:"h5",children:"Edit Discount"}),(0,l.jsx)(d.Z,{size:"small",onClick:W,children:(0,l.jsx)("i",{className:"ri-close-line text-2xl"})})]}),(0,l.jsx)(j.Z,{}),(0,l.jsx)("div",{className:"p-5",children:(0,l.jsxs)("form",{onSubmit:q(e=>z(e)),className:"flex flex-col gap-5",children:[(0,l.jsx)(f.Qr,{name:"min_order",control:V,rules:{required:!0},render:e=>{let{field:t}=e;return(0,l.jsx)(u.Z,{...t,fullWidth:!0,type:"number",label:"Minimal Order",placeholder:"",...E.min_order&&{error:!0,helperText:"This field is required."}})}}),(0,l.jsx)(f.Qr,{name:"discounted_value",control:V,rules:{required:!0},render:e=>{let{field:t}=e;return(0,l.jsx)(u.Z,{...t,fullWidth:!0,type:"number",label:"Discounted Value",placeholder:"",...E.discounted_value&&{error:!0,helperText:"This field is required."}})}}),M&&(0,l.jsxs)(h.Z,{fullWidth:!0,children:[(0,l.jsx)(p.Z,{children:"Select User Role"}),(0,l.jsx)(g.Z,{label:"Select Vendor",value:M,onChange:e=>A(e.target.value),children:null==R?void 0:null===(t=R.user_roles)||void 0===t?void 0:t.map((e,t)=>(0,l.jsx)(v.Z,{value:null==e?void 0:e.role_name,children:null==e?void 0:e.role_name},t))}),(0,l.jsx)(C.Z,{sx:{color:"red"},children:null==E?void 0:E.role_name})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(i.Z,{variant:"contained",type:"submit",loading:c,children:"Update"}),(0,l.jsx)(i.Z,{variant:"outlined",color:"error",type:"reset",onClick:W,children:"Discard"})]})]})})]}),(0,l.jsx)(Z.Z,{})]})},D=r(19880),P=r(65841),k=r(51480),F=r(72860),M=r.n(F),A=r(83338),R=r(66967);r(6083),r(348);var I=r(67875),T=r.n(I),V=r(68043);let Y=(e,t,r,l)=>{let a=(0,D.O4)(e.getValue(t),r);return l({itemRank:a}),a.passed},q=e=>{let{value:t,onChange:r,debounce:s=500,...i}=e,[n,o]=(0,a.useState)(t);return(0,a.useEffect)(()=>{o(t)},[t]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{r(n)},s);return()=>clearTimeout(e)},[n]),(0,l.jsx)(u.Z,{...i,value:n,onChange:e=>o(e.target.value),size:"small"})},E=(0,P.Cl)();var z=e=>{let{discountDatas:t,productId:r}=e,{data:u}=(0,b.kJ)(S.DF),{setGlobalMsg:m}=(0,w.q)(),[h,p]=(0,a.useState)(""),[v,g]=(0,a.useState)(!1),[j,f]=(0,a.useState)({}),[C,D]=(0,a.useState)(t),[F,I]=(0,a.useState)(),[z,W]=(0,a.useState)(!1),[L,Q]=(0,a.useState)(C),[U,O]=(0,a.useState)(""),[B,G]=(0,a.useState)(!1),[H]=(0,y.D)(_.Qm),J=(e,t,r)=>({children:e,color:t,variant:r});(0,a.useEffect)(()=>{D(t)},[t]);let{lang:K}=(0,s.useParams)(),X=(0,a.useMemo)(()=>[E.accessor("id",{header:"#",cell:e=>{let{row:t}=e;return(0,l.jsx)(x.Z,{color:"primary",children:"".concat(t.original.id.substring(0,10))})}}),E.accessor("min_order",{header:"Minimum Order",cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)(x.Z,{className:"font-medium",color:"text.primary",children:t.original.min_order})})})}}),E.accessor("customer_type",{header:"Customer Type",cell:e=>{let{row:t}=e;return(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)(x.Z,{className:"font-medium",color:"text.primary",children:t.original.customer_type})})})}}),E.accessor("discounted_value",{header:"Discounted Value",cell:e=>{var t,r;let{row:a}=e;return(0,l.jsx)(x.Z,{children:"".concat(null!==a.original.discounted_value?null===(r=a.original)||void 0===r?void 0:null===(t=r.discounted_value)||void 0===t?void 0:t.toLocaleString():"-")})}}),E.accessor("created_at",{header:"Date",cell:e=>{var t;let{row:r}=e;return(0,l.jsx)(x.Z,{children:null===(t=r.original)||void 0===t?void 0:t.created_at.substring(0,10)})}}),E.accessor("action",{header:"Action",cell:e=>{let{row:t}=e;return(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(R.Z,{element:i.Z,elementProps:J((0,l.jsx)("i",{className:"ri-delete-bin-7-line text-[22px] text-red-500"}),"error",""),dialog:A.Z,dialogProps:{type:"deleteProductDiscount"},dataId:t.original.id,setData:D,data:C}),(0,l.jsx)(d.Z,{onClick:()=>{I(t.original),G(!0)},children:(0,l.jsx)("i",{className:"ri-pencil-line"})})]})},enableSorting:!1})],[C,L]),$=(0,k.b7)({data:L,columns:X,filterFns:{fuzzy:Y},state:{rowSelection:j,globalFilter:U},initialState:{pagination:{pageSize:10}},enableRowSelection:!0,globalFilterFn:Y,onRowSelectionChange:f,getCoreRowModel:(0,P.sC)(),onGlobalFilterChange:O,getFilteredRowModel:(0,P.vL)(),getSortedRowModel:(0,P.tj)(),getPaginationRowModel:(0,P.G_)(),getFacetedRowModel:(0,P.o6)(),getFacetedUniqueValues:(0,P.JG)(),getFacetedMinMaxValues:(0,P.HO)()});return(0,a.useEffect)(()=>{Q(null==C?void 0:C.filter(e=>!h||e.status.toLowerCase().replace(/\s+/g,"-")===h))},[h,C,Q]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(o.Z,{className:"flex justify-between gap-4 flex-wrap flex-col sm:flex-row items-center",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row max-sm:is-full items-center  gap-4",children:[(0,l.jsx)(q,{value:null!=U?U:"",onChange:e=>O(String(e)),placeholder:"Search Product Discount",className:"max-sm:is-full min-is-[200px]"}),(0,l.jsx)(i.Z,{variant:"contained",className:"max-sm:is-full is-auto",onClick:()=>W(!z),startIcon:(0,l.jsx)("i",{className:"ri-add-line"}),children:"Discount"})]})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:T().table,children:[(0,l.jsx)("thead",{children:$.getHeaderGroups().map(e=>(0,l.jsx)("tr",{children:e.headers.map(e=>{var t;return(0,l.jsx)("th",{children:e.isPlaceholder?null:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:M()({"flex items-center":e.column.getIsSorted(),"cursor-pointer select-none":e.column.getCanSort()}),onClick:e.column.getToggleSortingHandler(),children:[(0,k.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:(0,l.jsx)("i",{className:"ri-arrow-up-s-line text-xl"}),desc:(0,l.jsx)("i",{className:"ri-arrow-down-s-line text-xl"})})[e.column.getIsSorted()])&&void 0!==t?t:null]})})},e.id)})},e.id))}),0===$.getFilteredRowModel().rows.length?(0,l.jsx)("tbody",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:$.getVisibleFlatColumns().length,className:"text-center",children:"No data available"})})}):(0,l.jsx)("tbody",{children:$.getRowModel().rows.slice(0,$.getState().pagination.pageSize).map(e=>(0,l.jsx)("tr",{className:M()({selected:e.getIsSelected()}),children:e.getVisibleCells().map(e=>(0,l.jsx)("td",{children:(0,k.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,l.jsx)(c.Z,{rowsPerPageOptions:[10,25,50],component:"div",className:"border-bs",count:$.getFilteredRowModel().rows.length,rowsPerPage:$.getState().pagination.pageSize,page:$.getState().pagination.pageIndex,SelectProps:{inputProps:{"aria-label":"rows per page"}},onPageChange:(e,t)=>{$.setPageIndex(t)},onRowsPerPageChange:e=>$.setPageSize(Number(e.target.value))})]}),(0,l.jsx)(Z.Z,{}),(0,l.jsx)(V.Z,{open:z,productId:r,data:C,setData:D,loading:v,setLoading:g,handleClose:()=>W(!z)}),(0,l.jsx)(N,{open:B,discountData:F,setData:D,loading:v,setLoading:g,handleClose:()=>G(!B)})]})}},67875:function(e){e.exports={table:"table_table__cB3AL",cellWithInput:"table_cellWithInput__N6u24"}}}]);