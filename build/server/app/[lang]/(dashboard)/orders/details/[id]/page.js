(()=>{var e={};e.id=844,e.ids=[844],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},89706:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o}),s(87063),s(5114),s(32687),s(85133);var t=s(79193),a=s(71854),i=s(33997),l=s.n(i),n=s(73320),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(r,d);let o=["",{children:["[lang]",{children:["(dashboard)",{children:["orders",{children:["details",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,87063)),"D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\(dashboard)\\orders\\details\\[id]\\page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5114)),"D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\(dashboard)\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,32687)),"D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,85529))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,85133,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,85529))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\(dashboard)\\orders\\details\\[id]\\page.jsx"],x="/[lang]/(dashboard)/orders/details/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/[lang]/(dashboard)/orders/details/[id]/page",pathname:"/[lang]/orders/details/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},52186:(e,r,s)=>{Promise.resolve().then(s.bind(s,61746))},91347:(e,r,s)=>{"use strict";s.d(r,{Z:()=>l});var t=s(27486);s(618);var a=s(27319),i=s(22405);let l=()=>{let{globalMsg:e,setGlobalMsg:r}=(0,i.q)();return t.jsx("div",{children:t.jsx(a.Z,{anchorOrigin:{horizontal:"center",vertical:"top"},open:!!e,autoHideDuration:3e3,onClose:()=>r(null),message:e})})}},26808:(e,r,s)=>{"use strict";s.d(r,{Q:()=>t});let t=e=>e.split(/\s/).reduce((e,r)=>e+=r.slice(0,1),"")},61746:(e,r,s)=>{"use strict";s.d(r,{default:()=>X});var t=s(27486),a=s(61766),i=s(12964),l=s(16561),n=s(72660);s(5632),s(36839);var d=s(83398),o=s(25009),c=s(66718),x=s(618),m=s(91347),h=s(22405),p=s(19412),u=s(76295),j=s(56239),g=s(30785),v=s(53544),f=s(86016);let Z={completed:"success",canceled:"error",refunded:"warning",delivering:"primary",preparing:"info",ordered:"secondary"},b=({orderData:e})=>{let{setGlobalMsg:r}=(0,h.q)(),[s,a]=(0,x.useState)(!1),[b]=(0,d.D)(c.HT),[y]=(0,d.D)(c.tt,{refetchQueries:[o.Nz]}),[w]=(0,d.D)(c.mt),[P]=(0,d.D)(c.Sf),[N,_]=(0,x.useState)();(0,x.useRef)(null);let C=async(e,s)=>{try{await y({variables:{order_id:e,status:s}}),r("Change Order Status")}catch(e){console.log("Change Status Error ",e)}};return(0,t.jsxs)("div",{className:"flex flex-wrap justify-between sm:items-center max-sm:flex-col gap-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(n.Z,{variant:"h5",children:`Order - ${e?.order_number}`}),t.jsx(l.Z,{variant:"tonal",label:e?.status,color:Z[e?.status||""],size:"small"})]}),t.jsx(n.Z,{children:`${new Date(e?.ordered_at??"").toLocaleString()}`})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)(t.Fragment,{children:[t.jsx(i.Z,{variant:"outlined",color:"info",onClick:()=>C(e.id,"preparing"),children:"Preparing"}),t.jsx(i.Z,{variant:"outlined",color:"primary",onClick:()=>C(e.id,"delivering"),children:"Delivering"}),t.jsx(i.Z,{color:"success",variant:"outlined",onClick:()=>a(!0),children:"Complete"})]}),t.jsx(i.Z,{variant:"outlined",color:"error",onClick:()=>C(e.id,"canceled"),children:"Cancel"})]}),t.jsx("div",{children:(0,t.jsxs)(p.Z,{fullWidth:"md",open:s,onClose:()=>a(!1),PaperProps:{component:"form",onSubmit:async s=>{s.preventDefault();let t=Object.fromEntries(new FormData(s.currentTarget).entries()),i=t?.remark,l=t?.image,n=await P({variables:{content_type:"image",folder:"products"}}),d=await (0,f.c)(l,n.data.getFileUploadUrl.fileUploadUrl,"image");await w({variables:{completion_photo_url:d,id:e?.id,remark:i}}),await C(e?.id,"completed"),r("âœ… Image Send Successfull"),a(!1)}},children:[t.jsx(u.Z,{children:"Order Complete"}),(0,t.jsxs)(j.Z,{children:[t.jsx(g.Z,{multiline:!0,autoFocus:!0,margin:"dense",id:"remark",name:"remark",label:"Remark",fullWidth:!0,variant:"standard"}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("br",{}),t.jsx(g.Z,{type:"file",autoFocus:!0,margin:"dense",id:"image",name:"image",alt:"image",fullWidth:!0,variant:"standard"})]}),(0,t.jsxs)(v.Z,{children:[t.jsx(i.Z,{color:"error",onClick:()=>a(!1),children:"Cancel"}),t.jsx(i.Z,{color:"success",type:"submit",children:"OK"})]})]})}),t.jsx(m.Z,{})]})};var y=s(69121),w=s(227),P=s(51259),N=s(19396),_=s.n(N),C=s(61359),S=s(36514),D=s(57229);s(36858);var O=s(31538),R=s.n(O);let A=(e,r,s,t)=>{let a=(0,C.O4)(e.getValue(r),s);return t({itemRank:a}),a.passed},k=(0,S.Cl)(),q=({orderData:e})=>{let[r,s]=(0,x.useState)({}),[a,i]=(0,x.useState)(e.order_items),[l,d]=(0,x.useState)(""),o=(0,x.useMemo)(()=>[k.accessor("title",{header:"Product",cell:({row:e})=>t.jsx("div",{className:"flex items-center gap-3 text-wrap",children:(0,t.jsxs)("div",{className:"flex flex-col items-start  ",children:[t.jsx(n.Z,{color:"text.primary",className:"font-medium w-60 text-wrap",children:e.original?.product?.title}),t.jsx(n.Z,{variant:"body2",children:e.original?.product.brand?.title})]})})}),k.accessor("order_items?.unit_price",{header:"Price",cell:({row:e})=>(0,t.jsxs)(n.Z,{children:[`${e.original?.unit_price?.toLocaleString()}`," Ks"]})}),k.accessor("quantity",{header:"Qty",cell:({row:e})=>t.jsx(n.Z,{children:`${e.original?.quantity}`})}),k.accessor("total",{header:"Total",cell:({row:e})=>(0,t.jsxs)(n.Z,{children:[`${e.original.total?.toLocaleString()}`," Ks"]})})],[]),c=(0,D.b7)({data:a,columns:o,filterFns:{fuzzy:A},state:{rowSelection:r,globalFilter:l},initialState:{pagination:{pageSize:10}},enableRowSelection:!0,globalFilterFn:A,onRowSelectionChange:s,getCoreRowModel:(0,S.sC)(),onGlobalFilterChange:d,getFilteredRowModel:(0,S.vL)(),getSortedRowModel:(0,S.tj)(),getPaginationRowModel:(0,S.G_)(),getFacetedRowModel:(0,S.o6)(),getFacetedUniqueValues:(0,S.JG)(),getFacetedMinMaxValues:(0,S.HO)()});return t.jsx("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:R().table,children:[t.jsx("thead",{children:c.getHeaderGroups().map(e=>t.jsx("tr",{children:e.headers.map(e=>t.jsx("th",{children:e.isPlaceholder?null:t.jsx(t.Fragment,{children:(0,t.jsxs)("div",{className:_()({"flex items-center":e.column.getIsSorted(),"cursor-pointer select-none":e.column.getCanSort()}),onClick:e.column.getToggleSortingHandler(),children:[(0,D.ie)(e.column.columnDef.header,e.getContext()),{asc:t.jsx("i",{className:"ri-arrow-up-s-line text-xl"}),desc:t.jsx("i",{className:"ri-arrow-down-s-line text-xl"})}[e.column.getIsSorted()]??null]})})},e.id))},e.id))}),c.getFilteredRowModel().rows?.length===0?t.jsx("tbody",{children:t.jsx("tr",{children:t.jsx("td",{colSpan:c.getVisibleFlatColumns().length,className:"text-center",children:"No data available"})})}):t.jsx("tbody",{className:"border-be",children:c.getRowModel().rows.slice(0,c.getState().pagination.pageSize).map(e=>t.jsx("tr",{className:_()({selected:e.getIsSelected()}),children:e.getVisibleCells().map(e=>t.jsx("td",{className:"first:is-14",children:(0,D.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})})},M=({orderData:e})=>(0,t.jsxs)(y.Z,{children:[t.jsx(w.Z,{title:"Order Details"}),t.jsx(q,{orderData:e}),t.jsx(P.Z,{className:"flex justify-end",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-12",children:[t.jsx(n.Z,{color:"text.primary",className:"min-is-[100px]",children:"Subtotal:"}),(0,t.jsxs)(n.Z,{color:"text.primary",className:"font-medium",children:[e?.items_total?.toLocaleString()," Ks"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-12",children:[t.jsx(n.Z,{color:"text.primary",className:"font-medium min-is-[100px]",children:"Total:"}),(0,t.jsxs)(n.Z,{color:"text.primary",className:"font-medium",children:[e?.total?.toLocaleString()," Ks"]})]})]})})]});var L=s(6708),F=s(33133),T=s(88879),E=s(82312),H=s(6853),G=s(26829),z=s(7182);let J=(0,G.ZP)(z.Z)({paddingLeft:0,paddingRight:0,"& .MuiTimelineItem-root":{width:"100%","&:before":{display:"none"},"& .MuiTimelineContent-root:last-child":{paddingBottom:0},"&:nth-last-child(2) .MuiTimelineConnector-root":{backgroundColor:"transparent",borderInlineStart:"1px dashed var(--mui-palette-divider)"},"& .MuiTimelineConnector-root":{backgroundColor:"var(--mui-palette-primary-main)"}}}),I=({orderData:e})=>(0,t.jsxs)(y.Z,{children:[t.jsx(w.Z,{title:"Delivery Activity"}),t.jsx(P.Z,{children:(0,t.jsxs)(J,{children:[(0,t.jsxs)(F.Z,{children:[(0,t.jsxs)(E.Z,{children:[t.jsx(L.Z,{color:"primary"}),t.jsx(H.Z,{})]}),(0,t.jsxs)(T.Z,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-x-2 mbe-2.5",children:[(0,t.jsxs)(n.Z,{color:"text.primary",className:"font-medium",children:["Order was placed (Order ID: #",e?.order_number,")"]}),t.jsx(n.Z,{variant:"caption",children:new Date(e.ordered_at)?.toLocaleString()})]}),t.jsx(n.Z,{className:"mbe-2",children:"Order has been placed successfully"})]})]}),(0,t.jsxs)(F.Z,{children:[(0,t.jsxs)(E.Z,{children:[t.jsx(L.Z,{color:e?.preparing_at===null?"grey":"primary"}),t.jsx(H.Z,{})]}),(0,t.jsxs)(T.Z,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-x-2 mbe-2.5",children:[t.jsx(n.Z,{color:"text.primary",className:"font-medium",children:"Preparing"}),e?.preparing_at!==null&&t.jsx(n.Z,{variant:"caption",children:new Date(e?.preparing_at).toLocaleString()})]}),t.jsx(n.Z,{className:"mbe-2",children:"Order is preparing"})]})]}),(0,t.jsxs)(F.Z,{children:[(0,t.jsxs)(E.Z,{children:[t.jsx(L.Z,{color:e?.delivering_at===null?"grey":"primary"}),t.jsx(H.Z,{})]}),(0,t.jsxs)(T.Z,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-x-2 mbe-2.5",children:[t.jsx(n.Z,{color:"text.primary",className:"font-medium",children:"Delivering"}),e?.delivering_at!==null&&t.jsx(n.Z,{variant:"caption",children:new Date(e?.delivering_at).toLocaleString()})]}),t.jsx(n.Z,{className:"mbe-2",children:"Order is delivering "})]})]}),(0,t.jsxs)(F.Z,{children:[(0,t.jsxs)(E.Z,{children:[t.jsx(L.Z,{color:e?.completed_at===null?"grey":"primary"}),t.jsx(H.Z,{})]}),(0,t.jsxs)(T.Z,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-x-2 mbe-2.5",children:[t.jsx(n.Z,{color:"text.primary",className:"font-medium",children:"Completed"}),e?.completed_at!==null&&t.jsx(n.Z,{variant:"caption",children:new Date(e?.completed_at).toLocaleString()})]}),t.jsx(n.Z,{className:"mbe-2",children:"Order has been completed "})]})]})]})})]});var K=s(86528);s(81636),s(16472);var U=s(26808);let V=e=>{let{avatar:r,customer:s}=e;return r?t.jsx(K.Z,{src:r}):t.jsx(K.Z,{children:(0,U.Q)(s)})},$=({orderData:e})=>t.jsx(y.Z,{children:(0,t.jsxs)(P.Z,{className:"flex flex-col gap-6",children:[t.jsx(n.Z,{variant:"h5",children:"Customer details"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[V({avatar:e?.avatar??"",customer:e?.user.profile_picture_url??""}),t.jsx("div",{className:"flex flex-col",children:t.jsx(n.Z,{color:"text.primary",className:"font-medium",children:e?.user.name})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsx(n.Z,{color:"text.primary",className:"font-medium",children:"Contact info"})}),(0,t.jsxs)(n.Z,{children:["Mobile : ",e.user.phone]})]})]})});s(58232);let Q=({orderData:e})=>t.jsx(y.Z,{children:(0,t.jsxs)(P.Z,{className:"flex flex-col gap-6",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsx(n.Z,{variant:"h5",children:"Delivery Address"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)(n.Z,{children:["Receiver Name : ",e?.receiver_name]}),t.jsx("br",{}),(0,t.jsxs)(n.Z,{children:["Receiver Phone : ",e?.receiver_phone]}),t.jsx("br",{}),(0,t.jsxs)(n.Z,{children:["Receiver Address : ",e?.receiver_address]})]})]})});var W=s(46811),B=s(45882);let X=()=>{let{id:e}=(0,W.useParams)(),{data:r}=(0,B.kJ)(o.Nz,{variables:{id:e}}),s=r?.orders_by_pk;return(0,t.jsxs)(a.ZP,{container:!0,spacing:6,children:[t.jsx(a.ZP,{item:!0,xs:12,children:t.jsx(b,{orderData:s})}),t.jsx(a.ZP,{item:!0,xs:12,md:8,children:(0,t.jsxs)(a.ZP,{container:!0,spacing:6,children:[t.jsx(a.ZP,{item:!0,xs:12,children:t.jsx(M,{orderData:s})}),t.jsx(a.ZP,{item:!0,xs:12,children:t.jsx(I,{orderData:s})})]})}),t.jsx(a.ZP,{item:!0,xs:12,md:4,children:(0,t.jsxs)(a.ZP,{container:!0,spacing:6,children:[t.jsx(a.ZP,{item:!0,xs:12,children:t.jsx($,{orderData:s})}),t.jsx(a.ZP,{item:!0,xs:12,children:t.jsx(Q,{orderData:s})})]})})]})}},87063:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>o});var t=s(79703);s(31976);var a=s(92334);let i=(0,a.createProxy)(String.raw`D:\ALPHA PROJECT\dashboard\src\views\orders\details\index.jsx`),{__esModule:l,$$typeof:n}=i;i.default;let d=(0,a.createProxy)(String.raw`D:\ALPHA PROJECT\dashboard\src\views\orders\details\index.jsx#default`),o=async()=>t.jsx(d,{})}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[9357,6491,1598,8743,8520,168,195,785,1766,6695,3697,1738,3547,9412,5670,6532,1894,1796],()=>s(89706));module.exports=t})();