(()=>{var e={};e.id=8003,e.ids=[8003],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},82361:e=>{"use strict";e.exports=require("events")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},50309:(e,i,t)=>{"use strict";t.r(i),t.d(i,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d}),t(40302),t(5114),t(32687),t(85133);var r=t(79193),a=t(71854),s=t(33997),l=t.n(s),n=t(73320),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(i,c);let d=["",{children:["[lang]",{children:["(dashboard)",{children:["products",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,40302)),"/home/axra/AXRA/office-cicd/alpha-admin/src/app/[lang]/(dashboard)/products/edit/[id]/page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5114)),"/home/axra/AXRA/office-cicd/alpha-admin/src/app/[lang]/(dashboard)/layout.jsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,32687)),"/home/axra/AXRA/office-cicd/alpha-admin/src/app/[lang]/layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,85529))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,85133,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,85529))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/home/axra/AXRA/office-cicd/alpha-admin/src/app/[lang]/(dashboard)/products/edit/[id]/page.jsx"],x="/[lang]/(dashboard)/products/edit/[id]/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/[lang]/(dashboard)/products/edit/[id]/page",pathname:"/[lang]/products/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7003:(e,i,t)=>{Promise.resolve().then(t.bind(t,69699))},69699:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>ee});var r=t(27486),a=t(97687),s=t(15532),l=t(30675);let n=({handleDiscardProduct:e,handleEditProduct:i,productData:t})=>(0,r.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx(l.Z,{variant:"h4",className:"mbe-1",children:"Edit a product"}),r.jsx(l.Z,{children:"Orders placed across your store"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[r.jsx(s.Z,{variant:"outlined",color:"secondary",onClick:e,children:"Discard"}),r.jsx(s.Z,{variant:"contained",onClick:i,children:"Edit Product"})]})]});var c=t(7556),d=t(42453),o=t(80018),x=t(35549),u=t(30965),p=t(19396),m=t.n(p),h=t(50776),g=t(64599),j=t(11317),f=t(9264),v=t(61601),b=t(55701),Z=t(58528);t(77842);var y=t(618);let P=({editor:e})=>e?(0,r.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[r.jsx(b.Z,{...e.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleBold().run(),children:r.jsx("i",{className:m()("ri-bold",{"text-textSecondary":!e.isActive("bold")})})}),r.jsx(b.Z,{...e.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleUnderline().run(),children:r.jsx("i",{className:m()("ri-underline",{"text-textSecondary":!e.isActive("underline")})})}),r.jsx(b.Z,{...e.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleItalic().run(),children:r.jsx("i",{className:m()("ri-italic",{"text-textSecondary":!e.isActive("italic")})})}),r.jsx(b.Z,{...e.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleStrike().run(),children:r.jsx("i",{className:m()("ri-strikethrough",{"text-textSecondary":!e.isActive("strike")})})}),r.jsx(b.Z,{...e.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("left").run(),children:r.jsx("i",{className:m()("ri-align-left",{"text-textSecondary":!e.isActive({textAlign:"left"})})})}),r.jsx(b.Z,{...e.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("center").run(),children:r.jsx("i",{className:m()("ri-align-center",{"text-textSecondary":!e.isActive({textAlign:"center"})})})}),r.jsx(b.Z,{...e.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("right").run(),children:r.jsx("i",{className:m()("ri-align-right",{"text-textSecondary":!e.isActive({textAlign:"right"})})})}),r.jsx(b.Z,{...e.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("justify").run(),children:r.jsx("i",{className:m()("ri-align-justify",{"text-textSecondary":!e.isActive({textAlign:"justify"})})})})]}):null,A=({setTitle:e,title:i,setSNo:t,sNo:s,setDescription:n,description:p,errors:m,productData:b})=>{(0,y.useEffect)(()=>{b&&(e(b.title),t(b.serial_number),n(Z.ZP(b.description_html)[0]?.props?.children[0]))},[b]);let A=(0,h.jE)({extensions:[g.V,f.V.configure({placeholder:"Write something here..."}),v.P.configure({types:["heading","paragraph"]}),j.v],content:p,onUpdate:({editor:e})=>{n(e.getHTML())}});return(0,r.jsxs)(d.Z,{children:[r.jsx(o.Z,{title:"Product Information"}),(0,r.jsxs)(x.Z,{children:[(0,r.jsxs)(a.ZP,{container:!0,spacing:5,className:"mbe-5",children:[r.jsx(a.ZP,{item:!0,xs:12,children:r.jsx(u.Z,{fullWidth:!0,label:"Product Name",placeholder:"Enter Product Name",value:i,onChange:i=>e(i.target.value),error:!!m?.title,helperText:m?.title})}),r.jsx(a.ZP,{item:!0,xs:12,sm:6,children:r.jsx(u.Z,{fullWidth:!0,label:"Serial Number",placeholder:"0123-4567",value:s,onChange:e=>t(e.target.value),error:!!m?.sNo,helperText:m?.sNo})})]}),r.jsx(l.Z,{className:"mbe-1",children:"Description (Optional)"}),r.jsx(d.Z,{className:"p-0 border shadow-none",children:(0,r.jsxs)(x.Z,{className:"p-0",children:[r.jsx(P,{editor:A}),r.jsx(c.Z,{className:"mli-5"}),r.jsx(h.kg,{editor:A,className:"bs-[135px] overflow-y-auto flex "})]})})]})]})};var N=t(1416),_=t(15735),k=t(20537),S=t(6593),q=t(59537),w=t(36858),C=t(81636),I=t(5963);let z=(0,S.ZP)(I.Z)(({theme:e})=>({"& .dropzone":{minHeight:"unset",padding:e.spacing(12),[e.breakpoints.down("sm")]:{paddingInline:e.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:e.typography.body1.fontWeight}}})),D=({files:e,setFiles:i,productData:t})=>{let[a,n]=(0,y.useState)([]),{getRootProps:c,getInputProps:u}=(0,q.uI)({onDrop:e=>{i(i=>[...i,...e.map(e=>Object.assign(e,{preview:URL.createObjectURL(e)}))])}});(0,y.useEffect)(()=>{t?.product_medias&&i(t.product_medias.map(e=>({media_url:e.media_url,id:e.id,type:"image",name:"image"})))},[t]);let p=e=>e.media_url?r.jsx("img",{width:38,height:38,alt:e.name,src:e.media_url}):e.type.startsWith("image")?r.jsx("img",{width:38,height:38,alt:e.name,src:URL.createObjectURL(e)}):r.jsx("i",{className:"ri-file-text-line"}),m=t=>{i([...e.filter(e=>e.name!==t.name)])},h=e.map(e=>(0,r.jsxs)(k.ZP,{className:"pis-4 plb-3",children:[(0,r.jsxs)("div",{className:"file-details",children:[r.jsx("div",{className:"file-preview",children:p(e)}),(0,r.jsxs)("div",{children:[r.jsx(l.Z,{className:"file-name font-medium",color:"text.primary",children:e.name}),r.jsx(l.Z,{className:"file-size",variant:"body2",children:Math.round(e.size/100)/10>1e3?`${(Math.round(e.size/100)/1e4).toFixed(1)} mb`:`${(Math.round(e.size/100)/10).toFixed(1)} kb`})]})]}),r.jsx(N.Z,{onClick:()=>m(e),children:r.jsx("i",{className:"ri-close-line text-xl"})})]},e.name));return r.jsx(z,{children:(0,r.jsxs)(d.Z,{children:[r.jsx(o.Z,{title:"Product Image",action:r.jsx(l.Z,{component:w.default,color:"primary",className:"font-medium",children:"Add media from URL"}),sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,r.jsxs)(x.Z,{children:[(0,r.jsxs)("div",{...c({className:"dropzone"}),children:[r.jsx("input",{...u()}),(0,r.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[r.jsx(C.default,{variant:"rounded",skin:"light",color:"secondary",children:r.jsx("i",{className:"ri-upload-2-line"})}),r.jsx(l.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),r.jsx(l.Z,{color:"text.disabled",children:"or"}),r.jsx(s.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),e.length?(0,r.jsxs)(r.Fragment,{children:[r.jsx(_.Z,{children:h}),r.jsx("div",{className:"buttons",children:r.jsx(s.Z,{color:"error",variant:"outlined",onClick:()=>{i([])},children:"Remove All"})})]}):null]})]})})};var E=t(12741),R=t(80013),T=t(48152),M=t(74054),U=t(69550),L=t(45162),O=t(25009),B=t(51622),W=t(92685);let X=({brandId:e,setBrandId:i,catId:t,setCatId:a,errors:s,productData:l})=>{let{data:n}=(0,L.kJ)(O.BD),{data:c}=(0,L.kJ)(O.xH);return(0,y.useEffect)(()=>{l&&(i(l.brand.id),a((c?.product_categories.find(e=>e.id===l.product_category.id)).id||null))},[l,c]),(0,r.jsxs)(d.Z,{children:[r.jsx(o.Z,{title:"Organize"}),r.jsx(x.Z,{children:(0,r.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[e&&(0,r.jsxs)(E.Z,{fullWidth:!0,children:[r.jsx(R.Z,{children:"Select Product Brand"}),r.jsx(M.Z,{label:"Select Vendor",value:e,onChange:e=>i(e.target.value),error:!!s?.brandId,helperText:s?.brandId,children:n?.brands?.map((e,i)=>r.jsx(T.Z,{value:e?.id,children:e?.title},i))}),r.jsx(B.Z,{sx:{color:"red"},children:s?.brandId})]}),r.jsx(U.Z,{value:t,onChange:(e,i)=>{a(i.id)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:c?.product_categories||[],disableCloseOnSelect:!0,getOptionLabel:e=>e?.title||"",renderOption:(e,i,{selected:t})=>(0,y.createElement)("li",{...e,key:i.id,children:[r.jsx(W.Z,{style:{marginRight:8},checked:t}),i.title]}),renderInput:e=>r.jsx(u.Z,{...e,label:"Category",placeholder:"select category"})})]})})]})};t(30576);var F=t(7830);let G=({price:e,setPrice:i,errors:t,productData:a})=>((0,y.useEffect)(()=>{a&&i(a.price)},[a]),(0,r.jsxs)(d.Z,{children:[r.jsx(o.Z,{title:"Pricing"}),r.jsx(x.Z,{children:r.jsx(F.Z,{children:r.jsx(u.Z,{fullWidth:!0,label:"Base Price",placeholder:"Enter Base Price",className:"mbe-5",value:e,onChange:e=>i(e.target.value),error:!!t?.price,helperText:t?.price})})})]}));var H=t(38860),J=t(66718),$=t(91347),V=t(22405),Y=t(29454),K=t(83541),Q=t(46811);let ee=()=>{let{id:e}=(0,Q.useParams)(),{setGlobalMsg:i,loading:t,setLoading:s}=(0,V.q)(),[l,c]=(0,y.useState)(),[d,o]=(0,y.useState)(),[x,u]=(0,y.useState)(),[p,m]=(0,y.useState)(),[h,g]=(0,y.useState)(),[j,f]=(0,y.useState)(),[v,b]=(0,y.useState)(),[Z,P]=(0,y.useState)([]),[N]=(0,H.D)(J.J9),[_]=(0,H.D)(J.Sf),{data:k}=(0,L.kJ)(O.yZ,{variables:{id:e}}),S=k.products_by_pk,q=async()=>{s(!0);let e={},t=!1;if(l||(e.title="Title field is required",t=!0),l||(e.title="Title field is required",t=!0),h||(e.price="Price field is required",t=!0),j||(e.sNo="Serial Number field is required",t=!0),x||(e.brandId="Brand field is required",t=!0),p||(e.catId="Category field is required",t=!0),t){b({...e}),s(!1);return}try{await Promise.all(Z.map(async e=>{let i=await _({variables:{content_type:"image",folder:"products"}}),t=await (0,K.c)(e,i.data.getFileUploadUrl.fileUploadUrl,"image");return{media_type:"image",media_url:t}})),await N({variables:{id:S.id,title:l,description_html:d,brand_id:x,category_id:p,serial_number:j,price:h}}),s(!1),c(""),g(""),o(""),f(""),u(""),m(""),i("✅ Product has been updated")}catch(e){i("❌ Add Product Error"),console.log(e.response)}};return t?r.jsx(Y.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.ZP,{container:!0,spacing:6,children:[r.jsx(a.ZP,{item:!0,xs:12,children:r.jsx(n,{handleDiscardProduct:()=>{c(""),o(""),g(0),f(0),m(""),u("")},handleEditProduct:q,productData:S})}),r.jsx(a.ZP,{item:!0,xs:12,md:8,children:(0,r.jsxs)(a.ZP,{container:!0,spacing:6,children:[r.jsx(a.ZP,{item:!0,xs:12,children:r.jsx(A,{setTitle:c,title:l,setSNo:f,sNo:j,setDescription:o,description:d,errors:v,productData:S})}),r.jsx(a.ZP,{item:!0,xs:12,children:r.jsx(D,{files:Z,setFiles:P,productData:S})})]})}),r.jsx(a.ZP,{item:!0,xs:12,md:4,children:(0,r.jsxs)(a.ZP,{container:!0,spacing:6,children:[r.jsx(a.ZP,{item:!0,xs:12,children:r.jsx(G,{price:h,setPrice:g,errors:v,productData:S})}),r.jsx(a.ZP,{item:!0,xs:12,children:r.jsx(X,{brandId:x,setBrandId:u,catId:p,setCatId:m,errors:v,productData:S})})]})})]}),r.jsx($.Z,{})]})}},40302:(e,i,t)=>{"use strict";t.r(i),t.d(i,{$$typeof:()=>l,__esModule:()=>s,default:()=>n});var r=t(92334);let a=(0,r.createProxy)(String.raw`/home/axra/AXRA/office-cicd/alpha-admin/src/app/[lang]/(dashboard)/products/edit/[id]/page.jsx`),{__esModule:s,$$typeof:l}=a;a.default;let n=(0,r.createProxy)(String.raw`/home/axra/AXRA/office-cicd/alpha-admin/src/app/[lang]/(dashboard)/products/edit/[id]/page.jsx#default`)}};var i=require("../../../../../../webpack-runtime.js");i.C(e);var t=e=>i(i.s=e),r=i.X(0,[9357,6491,4588,3440,3198,7541,3133,965,7110,264,4462,1935,3143,6719,751,5262,2475,7696],()=>t(50309));module.exports=r})();