(()=>{var e={};e.id=3513,e.ids=[3513],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},10998:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),t(84472),t(5114),t(32687),t(85133);var a=t(79193),i=t(71854),s=t(33997),n=t.n(s),l=t(73320),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(r,o);let c=["",{children:["[lang]",{children:["(dashboard)",{children:["invoice",{children:["preview",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,84472)),"D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\(dashboard)\\invoice\\preview\\[id]\\page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5114)),"D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\(dashboard)\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,32687)),"D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,85529))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,85133,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,85529))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\(dashboard)\\invoice\\preview\\[id]\\page.jsx"],u="/[lang]/(dashboard)/invoice/preview/[id]/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/[lang]/(dashboard)/invoice/preview/[id]/page",pathname:"/[lang]/invoice/preview/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},23215:(e,r,t)=>{Promise.resolve().then(t.bind(t,68614))},76295:(e,r,t)=>{"use strict";t.d(r,{Z:()=>j});var a=t(13211),i=t(6520),s=t(618),n=t(69360),l=t(47150),o=t(72660),c=t(26829),d=t(28502),u=t(80560),p=t(63998),x=t(27486);let h=["className","id"],m=e=>{let{classes:r}=e;return(0,l.Z)({root:["root"]},u.a,r)},v=(0,c.ZP)(o.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,r)=>r.root})({padding:"16px 24px",flex:"0 0 auto"}),j=s.forwardRef(function(e,r){let t=(0,d.i)({props:e,name:"MuiDialogTitle"}),{className:l,id:o}=t,c=(0,i.Z)(t,h),u=m(t),{titleId:j=o}=s.useContext(p.Z);return(0,x.jsx)(v,(0,a.Z)({component:"h2",className:(0,n.Z)(u.root,l),ownerState:t,ref:r,variant:"h6",id:null!=o?o:j},c))})},36858:(e,r,t)=>{"use strict";t(27486),t(618),t(38165)},93889:(e,r,t)=>{"use strict";t.d(r,{Pg:()=>l,c7:()=>i,sE:()=>n,uH:()=>a,zh:()=>s});let a={completed:"success",rejected:"error","received token":"info","picking up":"primary",processing:"warning",delivering:"secondary"},i={pending:"warning",completed:"success",accepted:"info",rejected:"error",negotiation:"primary"},s={delivering:"secondary",completed:"success",ordered:"info",preparing:"primary",refunded:"warning",canceled:"error"},n={paid:"secondary","partially paid":"info",rejected:"error",unpaid:"primary",pending:"warning"},l={verified:"success",pending:"warning",unverified:"primary",disable:"error"}},68614:(e,r,t)=>{"use strict";t.d(r,{default:()=>O});var a=t(27486),i=t(61766),s=t(618);t(38165);var n=t(46811),l=t(69121),o=t(51259),c=t(12964),d=t(5436),u=t(22405),p=t(66718),x=t(86016),h=t(83398),m=t(57971),v=t(20700),j=t(39800),f=t(9594),y=t(30785),g=t(72660),b=t(58894),Z=t(64275);let P=({open:e,handleClose:r,invoiceData:t})=>{console.log("----------------------");let[i,n]=(0,s.useState)(),[l]=(0,h.D)(p.Sf),[o]=(0,h.D)(p.vl),{setGlobalMsg:d,loading:P,setLoading:w}=(0,u.q)(),[_,k]=(0,s.useState)(),N=(0,s.useRef)(null),{control:C,reset:D,handleSubmit:S,formState:{errors:q}}=(0,b.cI)({defaultValues:{file:""}});console.log("filew ---",i);let A=async e=>{try{if(!i||"application/pdf"!==i[0].type){k("Please upload a PDF file.");return}w(!0);let e=await l({variables:{content_type:"pdf",folder:"invoices"}}),r=await (0,x.c)(i[0],e.data.getFileUploadUrl.fileUploadUrl,"image");await o({variables:{id:t.id,invoice_file_url:r}}),n(""),d("✅ Send Invoice file suceessful"),w(!1)}catch(e){d(`❌ ${e.message}`)}},M=()=>{n(""),r(),k("")};return a.jsx(a.Fragment,{children:(0,a.jsxs)(j.ZP,{open:e,anchor:"right",variant:"temporary",onClose:M,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:{xs:300,sm:400}}},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between pli-5 plb-4",children:[a.jsx(g.Z,{variant:"h5",children:"Send Invoice File"}),a.jsx(f.Z,{size:"small",onClick:()=>{r()},children:a.jsx("i",{className:"ri-close-line text-2xl"})})]}),a.jsx(v.Z,{}),a.jsx("div",{className:"p-5",children:(0,a.jsxs)("form",{onSubmit:S(e=>A(e)),className:"flex flex-col gap-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(y.Z,{size:"small",placeholder:"No file chosen",variant:"outlined",value:i?i[0].name:"",className:"flex-auto",InputProps:{readOnly:!0,endAdornment:i?a.jsx(m.Z,{position:"end",children:a.jsx(f.Z,{size:"small",edge:"end",onClick:()=>setFileName(""),children:a.jsx("i",{className:"ri-close-line"})})}):null}}),(0,a.jsxs)(c.Z,{component:"label",variant:"outlined",htmlFor:"contained-button-file",className:"min-is-fit",children:["Choose",a.jsx("input",{hidden:!0,id:"contained-button-file",type:"file",onChange:e=>{let{files:r}=e.target;r&&0!==r.length&&("application/pdf"!==r[0].type?(k("Invalid file type. Please upload a PDF."),n(null)):(k(""),n(r)))},ref:N})]})]}),console.log("errror msg ",_),_&&a.jsx(g.Z,{variant:"body2",color:"error",children:_}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(Z.Z,{variant:"contained",type:"submit",children:"Add"}),a.jsx(c.Z,{variant:"outlined",color:"error",type:"reset",onClick:M,children:"Discard"})]})]})})]})})};t(11158);var w=t(45882),_=t(25009);let k=({id:e,onButtonClick:r,invoiceData:t})=>{let[i,u]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),{data:h}=(0,w.kJ)(_.i2),{lang:m}=(0,n.useParams)();return(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.Z,{children:a.jsx(o.Z,{className:"flex flex-col gap-4",children:a.jsx(c.Z,{fullWidth:!0,variant:"contained",className:"capitalize",startIcon:a.jsx("i",{className:"ri-send-plane-line"}),onClick:()=>x(!0),children:"Send Invoice File"})})}),a.jsx(d.Z,{open:i,handleClose:()=>u(!1),invoiceData:t,paymentMethods:h}),a.jsx(P,{open:p,handleClose:()=>x(!1),invoiceData:t})]})};var N=t(6096),C=t(31538),D=t.n(C);t(67040);var S=t(16561),q=t(19412),A=t(76295),M=t(56239),T=t(53544);t(19396);var E=t(36514);t(36858),(0,E.Cl)();var R=t(93889);let I=({invoiceData:e})=>{let[r,t]=(0,s.useState)(!1),n=e?.invoices_by_pk,{setGlobalMsg:d}=(0,u.q)(),[x]=(0,h.D)(p.Zq,{refetchQueries:[_.xU]}),m=async(e,r)=>{try{await x({variables:{invoice_id:e,status:r}}),d("✅ Change Invoice Status")}catch(e){console.log("Change Status Error ",e)}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.Z,{className:"previewCard",children:a.jsx(o.Z,{className:"sm:!p-12",children:(0,a.jsxs)(i.ZP,{container:!0,spacing:6,children:[(0,a.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,a.jsxs)("div",{className:"flex gap-4 mb-4",children:[a.jsx(c.Z,{variant:"outlined",color:"info",onClick:()=>m(e?.invoices_by_pk?.id,"partially paid"),children:"Partially Paid"}),a.jsx(c.Z,{variant:"outlined",color:"success",onClick:()=>m(e?.invoices_by_pk?.id,"paid"),children:"Paid"}),a.jsx(c.Z,{variant:"outlined",color:"primary",onClick:()=>m(e?.invoices_by_pk?.id,"unpaid"),children:"UnPaid"}),a.jsx(c.Z,{variant:"outlined",className:"text-error",onClick:()=>{t(!0)},children:"Reject"})]}),a.jsx("div",{className:"p-6 bg-actionHover rounded",children:(0,a.jsxs)("div",{className:"flex justify-between gap-y-4 flex-col sm:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[a.jsx("div",{className:"flex items-center",children:a.jsx(N.Z,{})}),(0,a.jsxs)("div",{children:[a.jsx(g.Z,{color:"text.primary",children:"No. 297, Marlar Myaing Street,"}),a.jsx(g.Z,{color:"text.primary",children:"Tharkayta Industrial Zone,"}),a.jsx(g.Z,{color:"text.primary",children:"Yangon, Myanmar"}),a.jsx(g.Z,{color:"text.primary",children:"09- 428 694 996 09- 762 509 157"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-3",children:[a.jsx(g.Z,{variant:"h5",children:"Invoice "}),a.jsx(S.Z,{label:n?.status,color:R.sE[n?.status],style:{textTransform:"capitalize"},variant:"tonal",size:"small"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)(g.Z,{color:"text.primary",children:["Invoice Number : ",n.invoice_number]}),(0,a.jsxs)(g.Z,{color:"text.primary",children:["Issued Date : ",new Date(n?.created_at).toLocaleDateString()]}),(0,a.jsxs)(g.Z,{color:"text.primary",children:["Due Date : ",new Date(n?.updated_at).toLocaleDateString()]})]})]})]})})]}),a.jsx(i.ZP,{item:!0,xs:12,children:a.jsx(i.ZP,{container:!0,spacing:6,children:a.jsx(i.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[a.jsx(g.Z,{className:"font-medium",color:"text.primary",children:"Delivery Address To:"}),(0,a.jsxs)("div",{children:[a.jsx(g.Z,{children:n.order.receiver_name}),a.jsx(g.Z,{className:"my-1",children:n?.order.receiver_phone}),a.jsx(g.Z,{children:n?.order.receiver_address})]})]})})})}),a.jsx(i.ZP,{item:!0,xs:12,children:a.jsx("div",{className:"overflow-x-auto border rounded",children:(0,a.jsxs)("table",{className:D().table,children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-be",children:[a.jsx("th",{className:"!bg-transparent",children:"Product"}),a.jsx("th",{className:"!bg-transparent",children:"Brand"}),a.jsx("th",{className:"!bg-transparent",children:"Price"}),a.jsx("th",{className:"!bg-transparent",children:"Qty"}),a.jsx("th",{className:"!bg-transparent",children:"Total"})]})}),(0,a.jsxs)("tbody",{children:["`",n?.order?.order_items.map((e,r)=>a.jsxs("tr",{children:[a.jsx("td",{className:"w-70 text-wrap",children:a.jsx(g.Z,{color:"text.primary",children:e.product.title})}),a.jsx("td",{children:a.jsx(g.Z,{color:"text.primary",children:e.product.brand.title})}),a.jsx("td",{children:a.jsx(g.Z,{color:"text.primary",children:e.product.price})}),a.jsx("td",{children:a.jsx(g.Z,{color:"text.primary",children:e.quantity})}),a.jsx("td",{children:a.jsx(g.Z,{color:"text.primary",children:e.total})})]},r))]})]})})}),a.jsx(i.ZP,{item:!0,xs:12,children:a.jsx("div",{className:"flex justify-end flex-col gap-y-4 sm:flex-row"})}),a.jsx(i.ZP,{item:!0,xs:12,children:a.jsx(v.Z,{className:"border-dashed"})}),a.jsx(i.ZP,{item:!0,xs:12,children:(0,a.jsxs)(g.Z,{children:[(0,a.jsxs)(g.Z,{component:"span",className:"font-medium",color:"text.primary",children:["Note :"," "]}),n?.note]})})]})})}),a.jsx("div",{children:(0,a.jsxs)(q.Z,{fullWidth:"md",open:r,onClose:()=>t(!1),PaperProps:{component:"form",onSubmit:async r=>{r.preventDefault();let a=Object.fromEntries(new FormData(r.currentTarget).entries()).rejected_reason;await x({variables:{invoice_id:e?.invoices_by_pk?.id,status:"rejected",rejected_reason:a}}),d("✅ Reject reason send successfull"),t(!1)}},children:[a.jsx(A.Z,{children:"Reject Reason"}),a.jsx(M.Z,{children:a.jsx(y.Z,{multiline:!0,autoFocus:!0,margin:"dense",id:"rejected_reason",name:"rejected_reason",label:"Reason",fullWidth:!0,variant:"standard"})}),(0,a.jsxs)(T.Z,{children:[a.jsx(c.Z,{color:"error",onClick:()=>t(!1),children:"Cancel"}),a.jsx(c.Z,{color:"success",type:"submit",children:"OK"})]})]})})]})},O=()=>{let{id:e}=(0,n.useParams)(),{data:r}=(0,w.kJ)(_.xU,{variables:{id:e}});return(0,a.jsxs)(i.ZP,{container:!0,spacing:6,children:[a.jsx(i.ZP,{item:!0,xs:12,md:9,children:a.jsx(I,{invoiceData:r})}),"paid"!==r.invoices_by_pk.status&&a.jsx(i.ZP,{item:!0,xs:12,md:3,children:a.jsx(k,{onButtonClick:()=>{window.print()},invoiceData:r?.invoices_by_pk})})]})}},31538:e=>{e.exports={table:"table_table__cB3AL",cellWithInput:"table_cellWithInput__N6u24"}},84472:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var a=t(79703);t(31976);var i=t(92334);let s=(0,i.createProxy)(String.raw`D:\ALPHA PROJECT\dashboard\src\views\invoice\preview\index.jsx`),{__esModule:n,$$typeof:l}=s;s.default;let o=(0,i.createProxy)(String.raw`D:\ALPHA PROJECT\dashboard\src\views\invoice\preview\index.jsx#default`),c=async()=>a.jsx(o,{})},67040:()=>{},45882:(e,r,t)=>{"use strict";t.d(r,{kJ:()=>y});var a=t(3513),i=t(86415),s=t.t(i,2),n=t(67733),l=t(9407),o=t(34408),c=t(19328),d=t(90406),u=t(94491),p=Symbol.for("apollo.hook.wrappers"),x=t(4261),h=s.use||function(e){var r=(0,x.Bd)(e);switch(r.status){case"pending":throw r;case"rejected":throw r.reason;case"fulfilled":return r.value}},m=t(93868),v=t(70194),j=t(99375),f=Symbol.for("apollo.skipToken");function y(e,r){var t,a,i,s;return void 0===r&&(r=Object.create(null)),(t=g,(s=(i=(a=(0,d.x)("object"==typeof r?r.client:void 0).queryManager)&&a[p])&&i.useSuspenseQuery)?s(t):t)(e,r)}function g(e,r){var t,s,o,c,p,x,y,g=(0,d.x)(r.client),Z=(0,v.Y)(g),P=(p=(t={client:g,query:e,options:r}).client,x=t.query,y=t.options,s=function(){if(y===f)return{query:x,fetchPolicy:"standby"};var e,r,t,i,s,l=y.fetchPolicy||(null===(s=p.defaultOptions.watchQuery)||void 0===s?void 0:s.fetchPolicy)||"cache-first",o=(0,a.pi)((0,a.pi)({},y),{fetchPolicy:l,query:x,notifyOnNetworkStatusChange:!1,nextFetchPolicy:void 0});return!1!==globalThis.__DEV__&&(r=o.query,t=o.fetchPolicy,i=o.returnPartialData,(0,u.Vp)(r,u.n_.Query),void 0===(e=t)&&(e="cache-first"),(0,n.kG)(["cache-first","network-only","no-cache","cache-and-network"].includes(e),58,e),"no-cache"===t&&i&&!1!==globalThis.__DEV__&&n.kG.warn(59)),y.skip&&(o.fetchPolicy="standby"),o},o=[p,y,x],(c=i.useRef()).current&&(0,m.D)(c.current.deps,o)||(c.current={value:s(),deps:o}),c.current.value),w=P.fetchPolicy,_=P.variables,k=r.queryKey,N=(0,a.ev)([e,(0,j.B)(_)],[].concat(void 0===k?[]:k),!0),C=Z.getQueryRef(N,function(){return g.watchQuery(P)}),D=i.useState([C.key,C.promise]),S=D[0],q=D[1];S[0]!==C.key&&(S[0]=C.key,S[1]=C.promise);var A=S[1];C.didChangeOptions(P)&&(S[1]=A=C.applyOptions(P)),i.useEffect(function(){var e=C.retain(),r=C.listen(function(e){q([C.key,e])});return function(){r(),e()}},[C]);var M=i.useMemo(function(){var e=b(C.result);return{loading:!1,data:C.result.data,networkStatus:e?l.Ie.error:l.Ie.ready,error:e}},[C.result]),T="standby"===w?M:h(A),E=i.useCallback(function(e){var r=C.fetchMore(e);return q([C.key,C.promise]),r},[C]),R=i.useCallback(function(e){var r=C.refetch(e);return q([C.key,C.promise]),r},[C]),I=C.observable.subscribeToMore;return i.useMemo(function(){return{client:g,data:T.data,error:b(T),networkStatus:T.networkStatus,fetchMore:E,refetch:R,subscribeToMore:I}},[g,E,R,T,I])}function b(e){return(0,c.O)(e.errors)?new o.cA({graphQLErrors:e.errors}):e.error}}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[9357,6491,1598,8743,8520,168,195,785,1766,6695,8894,9800,1738,264,1908,5670,6532,2475,7680],()=>t(10998));module.exports=a})();