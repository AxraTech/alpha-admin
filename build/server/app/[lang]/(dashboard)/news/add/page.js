(()=>{var e={};e.id=8647,e.ids=[8647],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},17776:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>h,tree:()=>c}),i(94803),i(5114),i(32687),i(85133);var r=i(79193),s=i(71854),a=i(33997),l=i.n(a),n=i(73320),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);i.d(t,o);let c=["",{children:["[lang]",{children:["(dashboard)",{children:["news",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,94803)),"D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\(dashboard)\\news\\add\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,5114)),"D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\(dashboard)\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,32687)),"D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,85529))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(i.t.bind(i,85133,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,85529))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\ALPHA PROJECT\\dashboard\\src\\app\\[lang]\\(dashboard)\\news\\add\\page.jsx"],x="/[lang]/(dashboard)/news/add/page",u={require:i,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/[lang]/(dashboard)/news/add/page",pathname:"/[lang]/news/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5288:(e,t,i)=>{Promise.resolve().then(i.bind(i,19898))},77275:(e,t,i)=>{"use strict";i.d(t,{Z:()=>k});var r=i(6520),s=i(13211),a=i(618),l=i(69360),n=i(47150),o=i(54913),c=i(72148),d=i(25806),x=i(27486);let u=(0,d.Z)((0,x.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),h=(0,d.Z)((0,x.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,d.Z)((0,x.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var m=i(46324),g=i(28502),j=i(26829),v=i(76582),f=i(27827);let Z=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],b=e=>{let{classes:t,indeterminate:i,color:r,size:a}=e,l={root:["root",i&&"indeterminate",`color${(0,m.Z)(r)}`,`size${(0,m.Z)(a)}`]},o=(0,n.Z)(l,f.y,t);return(0,s.Z)({},t,o)},y=(0,j.ZP)(c.Z,{shouldForwardProp:e=>(0,v.Z)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:i}=e;return[t.root,i.indeterminate&&t.indeterminate,t[`size${(0,m.Z)(i.size)}`],"default"!==i.color&&t[`color${(0,m.Z)(i.color)}`]]}})(({theme:e,ownerState:t})=>(0,s.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,o.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${f.Z.checked}, &.${f.Z.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${f.Z.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),P=(0,x.jsx)(h,{}),A=(0,x.jsx)(u,{}),w=(0,x.jsx)(p,{}),k=a.forwardRef(function(e,t){var i,n;let o=(0,g.i)({props:e,name:"MuiCheckbox"}),{checkedIcon:c=P,color:d="primary",icon:u=A,indeterminate:h=!1,indeterminateIcon:p=w,inputProps:m,size:j="medium",className:v}=o,f=(0,r.Z)(o,Z),k=h?p:u,N=h?p:c,C=(0,s.Z)({},o,{color:d,indeterminate:h,size:j}),S=b(C);return(0,x.jsx)(y,(0,s.Z)({type:"checkbox",inputProps:(0,s.Z)({"data-indeterminate":h},m),icon:a.cloneElement(k,{fontSize:null!=(i=k.props.fontSize)?i:j}),checkedIcon:a.cloneElement(N,{fontSize:null!=(n=N.props.fontSize)?n:j}),ownerState:C,ref:t,className:(0,l.Z)(S.root,v)},f,{classes:S}))})},27827:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l,y:()=>a});var r=i(66875),s=i(62209);function a(e){return(0,s.ZP)("MuiCheckbox",e)}let l=(0,r.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"])},19898:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Q});var r=i(27486),s=i(61766),a=i(20700),l=i(69121),n=i(227),o=i(51259),c=i(30785),d=i(72660),x=i(19396),u=i.n(x),h=i(4850),p=i(65554),m=i(64110),g=i(34489),j=i(3807),v=i(55701);i(77842);let f=({editor:e})=>e?(0,r.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[r.jsx(v.Z,{...e.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleBold().run(),children:r.jsx("i",{className:u()("ri-bold",{"text-textSecondary":!e.isActive("bold")})})}),r.jsx(v.Z,{...e.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleUnderline().run(),children:r.jsx("i",{className:u()("ri-underline",{"text-textSecondary":!e.isActive("underline")})})}),r.jsx(v.Z,{...e.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleItalic().run(),children:r.jsx("i",{className:u()("ri-italic",{"text-textSecondary":!e.isActive("italic")})})}),r.jsx(v.Z,{...e.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleStrike().run(),children:r.jsx("i",{className:u()("ri-strikethrough",{"text-textSecondary":!e.isActive("strike")})})}),r.jsx(v.Z,{...e.isActive("bulletList")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleBulletList().run(),children:r.jsx("i",{className:u()("ri-list-unordered",{"text-textSecondary":!e.isActive("bulletList")})})}),r.jsx(v.Z,{...e.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("left").run(),children:r.jsx("i",{className:u()("ri-align-left",{"text-textSecondary":!e.isActive({textAlign:"left"})})})}),r.jsx(v.Z,{...e.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("center").run(),children:r.jsx("i",{className:u()("ri-align-center",{"text-textSecondary":!e.isActive({textAlign:"center"})})})}),r.jsx(v.Z,{...e.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("right").run(),children:r.jsx("i",{className:u()("ri-align-right",{"text-textSecondary":!e.isActive({textAlign:"right"})})})}),r.jsx(v.Z,{...e.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("justify").run(),children:r.jsx("i",{className:u()("ri-align-justify",{"text-textSecondary":!e.isActive({textAlign:"justify"})})})})]}):null,Z=({setTitle:e,title:t,setDescription:i,description:x,errors:u})=>{let v=(0,h.jE)({extensions:[p.V,g.V.configure({placeholder:"Write something here..."}),j.P.configure({types:["heading","paragraph"]}),m.v],content:x,onUpdate:({editor:e})=>{i(e.getHTML())}});return(0,r.jsxs)(l.Z,{children:[r.jsx(n.Z,{title:"Post Information"}),(0,r.jsxs)(o.Z,{children:[r.jsx(s.ZP,{container:!0,spacing:5,className:"mbe-5",children:r.jsx(s.ZP,{item:!0,xs:12,children:r.jsx(c.Z,{fullWidth:!0,label:"Post Name",placeholder:"Enter Post Name",value:t,onChange:t=>e(t.target.value),error:!!u?.title,helperText:u?.title})})}),r.jsx(d.Z,{className:"mbe-1",children:"Description"}),r.jsx(l.Z,{className:"p-0 border shadow-none",children:(0,r.jsxs)(o.Z,{className:"p-0",children:[r.jsx(f,{editor:v}),r.jsx(a.Z,{className:"mli-5"}),r.jsx(h.kg,{editor:v,className:"bs-[135px] overflow-y-auto flex ",value:x,onChange:e=>i(e.target.value)})]})}),u?.description&&r.jsx(d.Z,{color:"error",className:"mli-5 mt-2",children:u.description.message||"This field is required"})]})]})};var b=i(12964);let y=({handleDiscardProduct:e,handleaddNews:t})=>(0,r.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[r.jsx("div",{children:r.jsx(d.Z,{variant:"h4",className:"mbe-1",children:"Add a News Post"})}),(0,r.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[r.jsx(b.Z,{variant:"outlined",color:"secondary",onClick:e,children:"Discard"}),r.jsx(b.Z,{variant:"contained",onClick:t,children:"Publish News"})]})]});var P=i(618),A=i(9594),w=i(47269),k=i(43022),N=i(26829),C=i(59537);i(36858);var S=i(81636),z=i(5963),_=i(66718),I=i(38532);let q=(0,N.ZP)(z.Z)(({theme:e})=>({"& .dropzone":{minHeight:"unset",padding:e.spacing(12),[e.breakpoints.down("sm")]:{paddingInline:e.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:e.typography.body1.fontWeight}}})),T=({files:e,setFiles:t,errors:i})=>{let[s,a]=(0,P.useState)("");console.log("errors ",i);let{getRootProps:c,getInputProps:x}=(0,C.uI)({multiple:!0,onDrop:e=>{let i=e.filter(e=>e.type.startsWith("image"));i.length!==e.length?a("Only image files are allowed."):a(""),t(i.map(e=>Object.assign(e)))}}),u=e=>e.type.startsWith("image")?r.jsx("img",{width:38,height:38,alt:e.name,src:URL.createObjectURL(e)}):r.jsx("i",{className:"ri-file-text-line"}),h=i=>{t([...e.filter(e=>e.name!==i.name)])},p=e.map(e=>(0,r.jsxs)(k.ZP,{className:"pis-4 plb-3",children:[(0,r.jsxs)("div",{className:"file-details",children:[r.jsx("div",{className:"file-preview",children:u(e)}),(0,r.jsxs)("div",{children:[r.jsx(d.Z,{className:"file-name font-medium",color:"text.primary",children:e.name}),r.jsx(d.Z,{className:"file-size",variant:"body2",children:Math.round(e.size/100)/10>1e3?`${(Math.round(e.size/100)/1e4).toFixed(1)} mb`:`${(Math.round(e.size/100)/10).toFixed(1)} kb`})]})]}),r.jsx(A.Z,{onClick:()=>h(e),children:r.jsx("i",{className:"ri-close-line text-xl"})})]},e.name));return r.jsx(q,{children:(0,r.jsxs)(l.Z,{children:[r.jsx(n.Z,{title:"Product Image",sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)("div",{...c({className:"dropzone"}),children:[r.jsx("input",{...x()}),(0,r.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[r.jsx(S.default,{variant:"rounded",skin:"light",color:"secondary",children:r.jsx("i",{className:"ri-upload-2-line"})}),r.jsx(d.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),r.jsx(d.Z,{color:"text.disabled",children:"or"}),r.jsx(b.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),s&&r.jsx(d.Z,{color:"error",variant:"body2",children:s}),i&&r.jsx(I.Z,{className:"text-error",children:i.image}),e.length?(0,r.jsxs)(r.Fragment,{children:[r.jsx(w.Z,{children:p}),r.jsx("div",{className:"buttons"})]}):null]})]})})};i(65738),i(32475),i(7830);var M=i(44182),L=i(50822),D=i(23467),O=i(95727),E=i(77275),H=i(76880),R=i(45882),$=i(25009);let F=({productId:e,setProductId:t,catId:i,setCatId:s,errors:a})=>{let{data:d}=(0,R.kJ)($.yf),{data:x}=(0,R.kJ)($.XR);return(0,r.jsxs)(l.Z,{children:[r.jsx(n.Z,{title:"Organize"}),r.jsx(o.Z,{children:(0,r.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[(0,r.jsxs)(M.Z,{fullWidth:!0,children:[r.jsx(L.Z,{children:"Select News Category"}),r.jsx(O.Z,{label:"Select Category",value:i,onChange:e=>s(e.target.value),error:a?.catId,children:d?.news_categories?.map((e,t)=>r.jsx(D.Z,{value:e?.id,children:e?.title},t))}),r.jsx(I.Z,{sx:{color:"red"},children:a?.catId})]}),r.jsx(H.Z,{multiple:!0,value:e,onChange:(e,i)=>{t(i)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:x?.products||[],disableCloseOnSelect:!0,getOptionLabel:e=>e?.title||"",renderOption:(e,t,{selected:i})=>(0,P.createElement)("li",{...e,key:t.id,children:[r.jsx(E.Z,{style:{marginRight:8},checked:i}),t.title]}),renderInput:e=>r.jsx(c.Z,{...e,label:"Products",placeholder:"Select products",error:!!a?.productId,helperText:a?.productId})}),console.log("error productid ",a)]})})]})};var J=i(83398),U=i(91347),B=i(22405),W=i(63990),G=i(86016),V=i(46811);let Q=()=>{let e=(0,V.useRouter)(),{setGlobalMsg:t,loading:i,setLoading:a}=(0,B.q)(),[l,n]=(0,P.useState)(),[o,c]=(0,P.useState)(),[d,x]=(0,P.useState)(),[u,h]=(0,P.useState)([]),[p,m]=(0,P.useState)([]),[g,j]=(0,P.useState)(),[v]=(0,J.D)(_.uv,{refetchQueries:[$.uA]}),[f]=(0,J.D)(_.Hd,{refetchQueries:[$.uA]}),[b]=(0,J.D)(_.Sf),A=async()=>{a(!0);let i={},r=!1;if(l||(i.title="This field is required",r=!0),o||(i.description="This field is required",r=!0),d||(i.catId="This field is required",r=!0),0===p.length&&(i.productId="This field is required",r=!0),0===u.length&&(i.image="This field is required",r=!0),r){j({...i}),a(!1);return}try{let i=await b({variables:{content_type:"image",folder:"news"}}),r=await (0,G.c)(u[0],i.data.getFileUploadUrl.fileUploadUrl,"image"),s=await v({variables:{data:{title:l,body_html:o,news_category_id:d,image_url:r}}});p.map(async e=>await f({variables:{data:{news_id:s?.data?.insert_news_one.id,product_id:e.id}}})),e.back(),a(!1),n(""),c(""),m([]),x(""),t("➕ Add New Post")}catch(e){t("❌ Add News Error"),console.log(e.response)}};return i?r.jsx(W.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.ZP,{container:!0,spacing:6,children:[r.jsx(s.ZP,{item:!0,xs:12,children:r.jsx(y,{handleDiscardProduct:()=>{e.back()},handleaddNews:A})}),r.jsx(s.ZP,{item:!0,xs:12,md:8,children:(0,r.jsxs)(s.ZP,{container:!0,spacing:6,children:[r.jsx(s.ZP,{item:!0,xs:12,children:r.jsx(Z,{setTitle:n,title:l,setDescription:c,description:o,errors:g})}),r.jsx(s.ZP,{item:!0,xs:12,children:r.jsx(T,{files:u,setFiles:h,errors:g})})]})}),r.jsx(s.ZP,{item:!0,xs:12,md:4,children:r.jsx(s.ZP,{container:!0,spacing:6,children:r.jsx(s.ZP,{item:!0,xs:12,children:r.jsx(F,{catId:d,setCatId:x,productId:p,setProductId:m,errors:g})})})})]}),r.jsx(U.Z,{})]})}},94803:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});var r=i(92334);let s=(0,r.createProxy)(String.raw`D:\ALPHA PROJECT\dashboard\src\app\[lang]\(dashboard)\news\add\page.jsx`),{__esModule:a,$$typeof:l}=s;s.default;let n=(0,r.createProxy)(String.raw`D:\ALPHA PROJECT\dashboard\src\app\[lang]\(dashboard)\news\add\page.jsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[9357,6491,1598,8743,8520,168,195,785,1766,264,5233,4318,6880,2988,1084,5670,6532,2475,6754],()=>i(17776));module.exports=r})();