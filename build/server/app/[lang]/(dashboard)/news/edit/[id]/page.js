(()=>{var e={};e.id=9270,e.ids=[9270],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},82361:e=>{"use strict";e.exports=require("events")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},81135:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>o}),i(8261),i(88418),i(10634),i(35866);var a=i(23191),s=i(88716),r=i(37922),n=i.n(r),l=i(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);i.d(t,d);let o=["",{children:["[lang]",{children:["(dashboard)",{children:["news",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,8261)),"D:\\ALPHA PROJECT\\Admin Dashboard\\alpha-admin\\src\\app\\[lang]\\(dashboard)\\news\\edit\\[id]\\page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,88418)),"D:\\ALPHA PROJECT\\Admin Dashboard\\alpha-admin\\src\\app\\[lang]\\(dashboard)\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,10634)),"D:\\ALPHA PROJECT\\Admin Dashboard\\alpha-admin\\src\\app\\[lang]\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(i.t.bind(i,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\ALPHA PROJECT\\Admin Dashboard\\alpha-admin\\src\\app\\[lang]\\(dashboard)\\news\\edit\\[id]\\page.jsx"],x="/[lang]/(dashboard)/news/edit/[id]/page",u={require:i,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/[lang]/(dashboard)/news/edit/[id]/page",pathname:"/[lang]/news/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},91539:(e,t,i)=>{Promise.resolve().then(i.bind(i,44449))},44449:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>K});var a=i(10326),s=i(32634),r=i(99207),n=i(19518),l=i(67461),d=i(84187),o=i(78077),c=i(25609),x=i(48029),u=i.n(x),h=i(948),m=i(45367),p=i(75864),g=i(23661),j=i(77542),v=i(18500);i(59104);let f=({editor:e})=>e?(0,a.jsxs)("div",{className:"flex flex-wrap gap-x-3 gap-y-1 pbs-5 pbe-4 pli-5",children:[a.jsx(v.Z,{...e.isActive("bold")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleBold().run(),children:a.jsx("i",{className:u()("ri-bold",{"text-textSecondary":!e.isActive("bold")})})}),a.jsx(v.Z,{...e.isActive("underline")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleUnderline().run(),children:a.jsx("i",{className:u()("ri-underline",{"text-textSecondary":!e.isActive("underline")})})}),a.jsx(v.Z,{...e.isActive("italic")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleItalic().run(),children:a.jsx("i",{className:u()("ri-italic",{"text-textSecondary":!e.isActive("italic")})})}),a.jsx(v.Z,{...e.isActive("strike")&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().toggleStrike().run(),children:a.jsx("i",{className:u()("ri-strikethrough",{"text-textSecondary":!e.isActive("strike")})})}),a.jsx(v.Z,{...e.isActive({textAlign:"left"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("left").run(),children:a.jsx("i",{className:u()("ri-align-left",{"text-textSecondary":!e.isActive({textAlign:"left"})})})}),a.jsx(v.Z,{...e.isActive({textAlign:"center"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("center").run(),children:a.jsx("i",{className:u()("ri-align-center",{"text-textSecondary":!e.isActive({textAlign:"center"})})})}),a.jsx(v.Z,{...e.isActive({textAlign:"right"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("right").run(),children:a.jsx("i",{className:u()("ri-align-right",{"text-textSecondary":!e.isActive({textAlign:"right"})})})}),a.jsx(v.Z,{...e.isActive({textAlign:"justify"})&&{color:"primary"},variant:"outlined",size:"small",onClick:()=>e.chain().focus().setTextAlign("justify").run(),children:a.jsx("i",{className:u()("ri-align-justify",{"text-textSecondary":!e.isActive({textAlign:"justify"})})})})]}):null,b=({setTitle:e,title:t,setDescription:i,description:x,errors:u})=>{let v=(0,h.jE)({extensions:[m.V,g.V.configure({placeholder:"Write something here..."}),j.P.configure({types:["heading","paragraph"]}),p.v],content:x,onUpdate:({editor:e})=>{i(e.getHTML())}});return(0,a.jsxs)(n.Z,{children:[a.jsx(l.Z,{title:"Post Information"}),(0,a.jsxs)(d.Z,{children:[a.jsx(s.ZP,{container:!0,spacing:5,className:"mbe-5",children:a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx(o.Z,{fullWidth:!0,label:"Post Name",placeholder:"Enter Post Name",value:t,onChange:t=>e(t.target.value),error:!!u?.title,helperText:u?.title})})}),a.jsx(c.Z,{className:"mbe-1",children:"Description (Optional)"}),a.jsx(n.Z,{className:"p-0 border shadow-none",children:(0,a.jsxs)(d.Z,{className:"p-0",children:[a.jsx(f,{editor:v}),a.jsx(r.Z,{className:"mli-5"}),a.jsx(h.kg,{editor:v,className:"bs-[135px] overflow-y-auto flex ",value:x,onChange:e=>i(e.target.value)})]})})]})]})};var y=i(87700);let Z=({handleDiscardProduct:e,handleEditNews:t})=>(0,a.jsxs)("div",{className:"flex flex-wrap sm:items-center justify-between max-sm:flex-col gap-6",children:[a.jsx("div",{children:a.jsx(c.Z,{variant:"h4",className:"mbe-1",children:"Edit a new Post"})}),(0,a.jsxs)("div",{className:"flex flex-wrap max-sm:flex-col gap-4",children:[a.jsx(y.Z,{variant:"outlined",color:"secondary",onClick:e,children:"Discard"}),a.jsx(y.Z,{variant:"contained",onClick:t,children:"Edit New Post"})]})]});var P=i(17577),A=i(48260),w=i(84979),_=i(71411),k=i(91703),N=i(23920),C=i(81547),D=i(40529),S=i(64926),q=i(24443);let E=(0,k.ZP)(S.Z)(({theme:e})=>({"& .dropzone":{minHeight:"unset",padding:e.spacing(12),[e.breakpoints.down("sm")]:{paddingInline:e.spacing(5)},"&+.MuiList-root .MuiListItem-root .file-name":{fontWeight:e.typography.body1.fontWeight}}})),I=({files:e,setFiles:t,newData:i,isImageChange:s,setIsImageChange:r})=>{let o;let{getRootProps:x,getInputProps:u}=(0,N.uI)({multiple:!1,onDrop:e=>{r(!0),t(e.map(e=>Object.assign(e)))}}),h=()=>{t([]),r(!1)};return a.jsx(E,{children:(0,a.jsxs)(n.Z,{children:[a.jsx(l.Z,{title:"Product Image",action:a.jsx(c.Z,{component:C.default,color:"primary",className:"font-medium",children:"Add media from URL"}),sx:{"& .MuiCardHeader-action":{alignSelf:"center"}}}),(0,a.jsxs)(d.Z,{children:[(0,a.jsxs)("div",{...x({className:"dropzone"}),children:[a.jsx("input",{...u()}),(0,a.jsxs)("div",{className:"flex items-center flex-col gap-2 text-center",children:[a.jsx(D.default,{variant:"rounded",skin:"light",color:"secondary",children:a.jsx("i",{className:"ri-upload-2-line"})}),a.jsx(c.Z,{variant:"h4",children:"Drag and Drop Your Image Here."}),a.jsx(c.Z,{color:"text.disabled",children:"or"}),a.jsx(y.Z,{variant:"outlined",size:"small",children:"Browse Image"})]})]}),a.jsx(w.Z,{children:(0,a.jsxs)(_.ZP,{className:"pis-4 plb-3",children:[(0,a.jsxs)("div",{className:"file-details",children:[a.jsx("div",{className:"file-preview",children:(o=e.length>0?e[0]:null,s&&o instanceof File?a.jsx("img",{width:38,height:38,alt:o.name,src:URL.createObjectURL(o)}):i?.image_url?a.jsx("img",{width:38,height:38,alt:"image",src:i.image_url}):a.jsx(c.Z,{children:"No image available"}))}),e.length>0&&(0,a.jsxs)("div",{children:[a.jsx(c.Z,{className:"file-name font-medium",color:"text.primary",children:e[0]?.name}),a.jsx(c.Z,{className:"file-size",variant:"body2",children:Math.round(e[0].size/100)/10>1e3?`${(Math.round(e[0].size/100)/1e4).toFixed(1)} mb`:`${(Math.round(e[0].size/100)/10).toFixed(1)} kb`})]})]}),e.length>0&&a.jsx(A.Z,{onClick:()=>h(e[0]),children:a.jsx("i",{className:"ri-close-line text-xl"})})]})}),a.jsx("div",{className:"buttons",children:a.jsx(y.Z,{color:"error",variant:"outlined",onClick:()=>{t([]),r(!1)},children:"Remove All"})})]})]})})};i(79913),i(11684),i(53190);var z=i(53913),T=i(918),L=i(37841),O=i(56390),R=i(86391),H=i(14853),M=i(36238),J=i(84875),U=i(29084);let F=({productId:e,setProductId:t,catId:i,setCatId:s,errors:r,newData:c})=>{let{data:x}=(0,J.kJ)(U.yf),{data:u}=(0,J.kJ)(U.XR),{data:h}=(0,J.kJ)(U.wC,{variables:{news_id:c.id}});return(0,P.useEffect)(()=>{c&&(s(c.news_category?.id),t(h&&h?.news_related_products?.map(e=>e?.product_id)))},[c]),(0,a.jsxs)(n.Z,{children:[a.jsx(l.Z,{title:"Organize"}),a.jsx(d.Z,{children:(0,a.jsxs)("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-col gap-5",children:[(0,a.jsxs)(z.Z,{fullWidth:!0,children:[a.jsx(T.Z,{children:"Select News Category"}),a.jsx(O.Z,{label:"Select Category",value:i,onChange:e=>s(e.target.value),error:r?.catId,children:x?.news_categories?.map((e,t)=>a.jsx(L.Z,{value:e?.id,children:e?.title},t))}),a.jsx(M.Z,{sx:{color:"red"},children:r?.catId})]}),a.jsx(H.Z,{multiple:!0,value:e,onChange:(e,i)=>{t(i)},className:"overflow-y-auto h-[40vh]",id:"checkboxes-tags-demo",options:u?.products||[],disableCloseOnSelect:!0,getOptionLabel:e=>e?.title||"",renderOption:(e,t,{selected:i})=>(0,P.createElement)("li",{...e,key:t.id,children:[a.jsx(R.Z,{style:{marginRight:8},checked:i}),t.title]}),renderInput:e=>a.jsx(o.Z,{...e,label:"Products",placeholder:"select products"})})]})})]})};var G=i(18753),W=i(5330),B=i(76865),$=i(71728),V=i(35047),X=i(26734),Y=i(32392);let K=()=>{let{id:e}=(0,V.useParams)(),t=(0,V.useRouter)(),{setGlobalMsg:i,loading:r,setLoading:n}=(0,B.q)(),[l,d]=(0,P.useState)(),[o,x]=(0,P.useState)(),[u,h]=(0,P.useState)(),[m,p]=(0,P.useState)([]),[g,j]=(0,P.useState)([]),[v,f]=(0,P.useState)(),[A,w]=(0,P.useState)(!1),[_]=(0,G.D)(q.dE),[k]=(0,G.D)(q.Hd),[N]=(0,G.D)(q.Sf),{data:D}=(0,J.kJ)(U.Ev,{variables:{id:e}}),S=D.news_by_pk,[E]=(0,G.D)(q.yn);(0,P.useEffect)(()=>{S&&(p(S.image_url),d(S.title),x(Y.ZP(S.body_html)[0]?.props?.children[0]))},[S]);let z=async()=>{n(!0);let e={},t=!1;if(l||(e.title="Title field is required",t=!0),u||(e.catId="Category field is required",t=!0),g||(e.productId="Product field is required",t=!0),t){f({...e}),n(!1);return}try{let e=S.image_url;if(m&&m!==S?.image_url){let{data:t}=await N({variables:{content_type:"image",folder:"products"}});e=await (0,X.c)(m[0],t.getFileUploadUrl.fileUploadUrl,"image")}let t=await _({variables:{id:S.id,data:{title:l,body_html:o,news_category_id:u,image_url:m!==S.image_url?e:S.image_url}}});await E({variables:{news_id:t.data.update_news_by_pk.id}}),g.map(async e=>await k({variables:{data:{news_id:t?.data?.update_news_by_pk.id,product_id:e.id?e.id:e}}})),n(!1),d(""),x(""),j([]),h(""),i("✅ New post has been updated")}catch(e){i("❌ Add News Error"),console.log(e.response)}};return r?a.jsx($.Z,{sx:{textAlign:"center"},children:"Loading..."}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(c.Z,{component:C.default,to:t.back(),children:"Back"}),a.jsx(y.Z,{variant:"contained",onClick:()=>t.back(),children:"⬅️ Back"}),(0,a.jsxs)(s.ZP,{container:!0,spacing:6,children:[a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx(Z,{handleDiscardProduct:()=>{t.back()},handleEditNews:z})}),a.jsx(s.ZP,{item:!0,xs:12,md:8,children:(0,a.jsxs)(s.ZP,{container:!0,spacing:6,children:[a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx(b,{setTitle:d,title:l,setDescription:x,description:o,errors:v})}),a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx(I,{files:m,setFiles:p,newData:S,isImageChange:A,setIsImageChange:w})})]})}),a.jsx(s.ZP,{item:!0,xs:12,md:4,children:a.jsx(s.ZP,{container:!0,spacing:6,children:a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx(F,{catId:u,setCatId:h,productId:g,setProductId:j,errors:v,newData:S})})})})]}),a.jsx(W.Z,{})]})}},8261:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});var a=i(68570);let s=(0,a.createProxy)(String.raw`D:\ALPHA PROJECT\Admin Dashboard\alpha-admin\src\app\[lang]\(dashboard)\news\edit\[id]\page.jsx`),{__esModule:r,$$typeof:n}=s;s.default;let l=(0,a.createProxy)(String.raw`D:\ALPHA PROJECT\Admin Dashboard\alpha-admin\src\app\[lang]\(dashboard)\news\edit\[id]\page.jsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),a=t.X(0,[8948,4471,4674,4366,8522,4313,2825,8077,1994,632,4073,6296,7730,8570,6860,7251,1684,274],()=>i(81135));module.exports=a})();