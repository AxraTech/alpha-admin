(()=>{var e={};e.id=6926,e.ids=[6926],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},19468:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(38006),r(88418),r(10634),r(35866);var a=r(23191),s=r(88716),n=r(37922),i=r.n(n),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["[lang]",{children:["(dashboard)",{children:["quotations",{children:["preview",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,38006)),"D:\\ALPHA PROJECT\\Admin Dashboard\\alpha-admin\\src\\app\\[lang]\\(dashboard)\\quotations\\preview\\[id]\\page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,88418)),"D:\\ALPHA PROJECT\\Admin Dashboard\\alpha-admin\\src\\app\\[lang]\\(dashboard)\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,10634)),"D:\\ALPHA PROJECT\\Admin Dashboard\\alpha-admin\\src\\app\\[lang]\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\ALPHA PROJECT\\Admin Dashboard\\alpha-admin\\src\\app\\[lang]\\(dashboard)\\quotations\\preview\\[id]\\page.jsx"],u="/[lang]/(dashboard)/quotations/preview/[id]/page",h={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/[lang]/(dashboard)/quotations/preview/[id]/page",pathname:"/[lang]/quotations/preview/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},10762:(e,t,r)=>{Promise.resolve().then(r.bind(r,22e3))},26734:(e,t,r)=>{"use strict";r.d(t,{c:()=>a});let a=async(e,t,r)=>{try{return(await fetch(t,{method:"PUT",headers:{"Content-Type":`${r}/*`,"x-amz-acl":"public-read"},body:e})).url.split("?")[0]}catch(e){throw alert(e),console.log(e),Error(e)}}},22e3:(e,t,r)=>{"use strict";r.d(t,{default:()=>Q});var a=r(10326),s=r(32634),n=r(17577);r(90434);var i=r(35047),l=r(19518),o=r(84187),c=r(87700);r(8299);var d=r(19074),u=r(48260),h=r(25609),x=r(78077),p=r(99207),m=r(74723),f=r(18753),j=r(24443),v=r(26734),y=r(76865),g=r(57329),b=r(5330);let Z=({open:e,handleClose:t,quotationData:r})=>{let[s,i]=(0,n.useState)(),[l]=(0,f.D)(j.Sf),[o]=(0,f.D)(j.BM),{setGlobalMsg:b}=(0,y.q)(),Z=(0,n.useRef)(null),{control:w,reset:P,handleSubmit:_,formState:{errors:N}}=(0,m.cI)({defaultValues:{title:"",description:""}}),k=async e=>{try{let e=await l({variables:{content_type:"pdf",folder:"quotations"}}),t=await (0,v.c)(s[0],e.data.getFileUploadUrl.fileUploadUrl,"image"),a=await o({variables:{quotation_id:r.id,quotation_file_url:t}});console.log("res ",a),i(""),b("✅ Send Quotation file suceessful")}catch(e){b("❌ Send file error")}},q=()=>{i(""),t()};return a.jsx(a.Fragment,{children:(0,a.jsxs)(d.ZP,{open:e,anchor:"right",variant:"temporary",onClose:q,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:{xs:300,sm:400}}},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between pli-5 plb-4",children:[a.jsx(h.Z,{variant:"h5",children:"Send Quotation File"}),a.jsx(u.Z,{size:"small",onClick:()=>{t()},children:a.jsx("i",{className:"ri-close-line text-2xl"})})]}),a.jsx(p.Z,{}),a.jsx("div",{className:"p-5",children:(0,a.jsxs)("form",{onSubmit:_(e=>k(e)),className:"flex flex-col gap-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(x.Z,{size:"small",placeholder:"No file chosen",variant:"outlined",value:s?s[0].name:"",className:"flex-auto",InputProps:{readOnly:!0,endAdornment:s?a.jsx(g.Z,{position:"end",children:a.jsx(u.Z,{size:"small",edge:"end",onClick:()=>setFileName(""),children:a.jsx("i",{className:"ri-close-line"})})}):null}}),(0,a.jsxs)(c.Z,{component:"label",variant:"outlined",htmlFor:"contained-button-file",className:"min-is-fit",children:["Choose",a.jsx("input",{hidden:!0,id:"contained-button-file",type:"file",onChange:e=>{let{files:t}=e.target;t&&0!==t.length&&i(t)},ref:Z})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(c.Z,{variant:"contained",type:"submit",children:"Add"}),a.jsx(c.Z,{variant:"outlined",color:"error",type:"reset",onClick:q,children:"Discard"})]})]})})]})})},w=({open:e,handleClose:t,quotationData:r})=>{let[s,i]=(0,n.useState)(),[l]=(0,f.D)(j.Sf),[o]=(0,f.D)(j.KN),{setGlobalMsg:v}=(0,y.q)();(0,n.useRef)(null);let{control:g,reset:Z,handleSubmit:w,formState:{errors:P}}=(0,m.cI)({defaultValues:{title:"",description:""}}),_=async e=>{try{await o({variables:{quotation_id:r.id,discounted_amount:e.price}}),v("✅ Send Quotation Invoice file suceessful")}catch(e){v("❌ Send file error")}},N=()=>{Z({price:""}),t()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.ZP,{open:e,anchor:"right",variant:"temporary",onClose:N,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:{xs:300,sm:400}}},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between pli-5 plb-4",children:[a.jsx(h.Z,{variant:"h5",children:"Send Discounted Amount"}),a.jsx(u.Z,{size:"small",onClick:()=>{t()},children:a.jsx("i",{className:"ri-close-line text-2xl"})})]}),a.jsx(p.Z,{}),a.jsx("div",{className:"p-5",children:(0,a.jsxs)("form",{onSubmit:w(e=>_(e)),className:"flex flex-col gap-5",children:[a.jsx(m.Qr,{name:"price",control:g,rules:{required:!0},render:({field:e})=>a.jsx(x.Z,{...e,fullWidth:!0,type:"number",label:"Amount",placeholder:"Enter Amount",...P.price&&{error:!0,helperText:"This field is required."}})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(c.Z,{variant:"contained",type:"submit",children:"Send"}),a.jsx(c.Z,{variant:"outlined",color:"error",type:"reset",onClick:N,children:"Discard"})]})]})})]}),a.jsx(b.Z,{})]})};r(86045);var P=r(29084);let _=({quotationData:e})=>{let{setGlobalMsg:t}=(0,y.q)(),[r]=(0,f.D)(j.yG,{refetchQueries:[P._n]}),s=async(e,a)=>{try{await r({variables:{quotation_id:e,status:a}}),t("✅ Change Quotation Status")}catch(e){console.log("Change Status Error ",e)}};return a.jsx("div",{children:(0,a.jsxs)("div",{className:"flex gap-4 justify-end",children:[a.jsx(c.Z,{variant:"outlined",color:"info",size:"large",onClick:()=>s(e?.id,"accepted"),children:"Accepted"}),a.jsx(c.Z,{variant:"outlined",color:"error",size:"large",onClick:()=>s(e?.id,"rejected"),children:"Reject"})]})})},N=({id:e,onButtonClick:t,quotationData:r})=>{let[s,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1),[x,p]=(0,n.useState)(!1),{lang:m}=(0,i.useParams)();return(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.Z,{children:(0,a.jsxs)(o.Z,{className:"flex flex-col gap-4",children:[a.jsx(c.Z,{fullWidth:!0,color:"success",variant:"contained",className:"capitalize",startIcon:a.jsx("i",{className:"ri-send-plane-line"}),onClick:()=>h(!0),children:"Send Quotation File"}),a.jsx(c.Z,{fullWidth:!0,variant:"contained",className:"capitalize",startIcon:a.jsx("i",{className:"ri-send-plane-line"}),onClick:()=>p(!0),children:"Discounted Amount"})]})}),a.jsx(Z,{open:u,handleClose:()=>h(!1),quotationData:r}),a.jsx(w,{open:x,handleClose:()=>p(!1),quotationData:r})]})};var k=r(64860),q=r(89307),D=r.n(q);r(68780);var S=r(13405);let C={pending:"warning",completed:"success",accepted:"info",rejected:"error"},A=({quotationData:e})=>a.jsx(l.Z,{className:"previewCard",children:a.jsx(o.Z,{className:"sm:!p-12",children:(0,a.jsxs)(s.ZP,{container:!0,spacing:6,children:[a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx("div",{className:"p-6 bg-actionHover rounded",children:(0,a.jsxs)("div",{className:"flex justify-between gap-y-4 flex-col sm:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[a.jsx("div",{className:"flex items-center",children:a.jsx(k.Z,{})}),(0,a.jsxs)("div",{children:[a.jsx(h.Z,{color:"text.primary",children:"No. 297, Marlar Myaing Street,"}),a.jsx(h.Z,{color:"text.primary",children:"Tharkayta Industrial Zone,"}),a.jsx(h.Z,{color:"text.primary",children:"Yangon, Myanmar"}),a.jsx(h.Z,{color:"text.primary",children:"09- 428 694 996 09- 762 509 157"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-3",children:[a.jsx(h.Z,{variant:"h5",children:"Quotation"}),a.jsx(S.Z,{label:e?.status,color:C[e.status],style:{textTransform:"capitalize"},variant:"tonal",size:"small"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)(h.Z,{color:"text.primary",children:["Quotation Number : ",e?.quotation_number]}),(0,a.jsxs)(h.Z,{color:"text.primary",children:["Date Due : ",new Date(e?.updated_at).toLocaleDateString()]})]})]})]})})}),a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx(s.ZP,{container:!0,spacing:6,children:a.jsx(s.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[a.jsx(h.Z,{className:"font-medium",color:"text.primary",children:"Delivery Address To:"}),(0,a.jsxs)("div",{children:[a.jsx(h.Z,{children:e.user.orders[0].receiver_name}),a.jsx(h.Z,{className:"my-1",children:e?.user.orders[0].receiver_phone}),a.jsx(h.Z,{children:e?.user.orders[0].receiver_address})]})]})})})}),a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx("div",{className:"overflow-x-auto border rounded",children:(0,a.jsxs)("table",{className:D().table,children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-be",children:[a.jsx("th",{className:"!bg-transparent",children:"Product"}),a.jsx("th",{className:"!bg-transparent",children:"Brand"}),a.jsx("th",{className:"!bg-transparent",children:"Price"}),a.jsx("th",{className:"!bg-transparent",children:"Qty"})]})}),a.jsx("tbody",{children:e?.quotation_items.map((e,t)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx(h.Z,{color:"text.primary",className:"w-60 text-wrap",children:e.product.title})}),a.jsx("td",{children:a.jsx(h.Z,{color:"text.primary",children:e.product.brand.title})}),a.jsx("td",{children:a.jsx(h.Z,{color:"text.primary",children:e.product.price})}),a.jsx("td",{children:a.jsx(h.Z,{color:"text.primary",children:e.quantity})})]},t))})]})})}),a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx("div",{className:"flex justify-end flex-col gap-y-4 sm:flex-row",children:(0,a.jsxs)("div",{className:"min-is-[200px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(h.Z,{children:"Subtotal:"}),a.jsx(h.Z,{className:"font-medium",color:"text.primary",children:e?.order?.items_total})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(h.Z,{children:"Discount:"}),a.jsx(h.Z,{className:"font-medium",color:"text.primary",children:e?.order?.discount})]}),a.jsx(p.Z,{className:"mlb-2"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx(h.Z,{children:"Total:"}),a.jsx(h.Z,{className:"font-medium",color:"text.primary",children:e?.total})]})]})})}),a.jsx(s.ZP,{item:!0,xs:12,children:a.jsx(p.Z,{className:"border-dashed"})}),a.jsx(s.ZP,{item:!0,xs:12,children:(0,a.jsxs)(h.Z,{children:[(0,a.jsxs)(h.Z,{component:"span",className:"font-medium",color:"text.primary",children:["Dealer Remark :"," "]}),e.dealer_remark?e.dealer_remark:" - "]})})]})})});var M=r(84875);let Q=()=>{let{id:e}=(0,i.useParams)(),{data:t}=(0,M.kJ)(P._n,{variables:{id:e}});return a.jsx(a.Fragment,{children:(0,a.jsxs)(s.ZP,{container:!0,spacing:6,children:[a.jsx(s.ZP,{item:!0,xs:12,md:9,children:a.jsx(A,{quotationData:t.quotations_by_pk})}),(0,a.jsxs)(s.ZP,{item:!0,xs:12,md:3,className:"flex flex-col gap-5",children:[a.jsx(_,{quotationData:t.quotations_by_pk}),"accepted"===t.quotations_by_pk.status&&a.jsx(N,{onButtonClick:()=>{window.print()},quotationData:t.quotations_by_pk})]})]})})}},89307:e=>{e.exports={table:"table_table__cB3AL",cellWithInput:"table_cellWithInput__N6u24"}},38006:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(19510);r(58585);var s=r(68570);let n=(0,s.createProxy)(String.raw`D:\ALPHA PROJECT\Admin Dashboard\alpha-admin\src\views\quotations\preview\index.jsx`),{__esModule:i,$$typeof:l}=n;n.default;let o=(0,s.createProxy)(String.raw`D:\ALPHA PROJECT\Admin Dashboard\alpha-admin\src\views\quotations\preview\index.jsx#default`),c=async()=>a.jsx(o,{})},68780:()=>{},84875:(e,t,r)=>{"use strict";r.d(t,{kJ:()=>y});var a=r(65826),s=r(66126),n=r.t(s,2),i=r(67175),l=r(32015),o=r(17267),c=r(83757),d=r(88571),u=r(76049),h=Symbol.for("apollo.hook.wrappers"),x=r(37441),p=n.use||function(e){var t=(0,x.Bd)(e);switch(t.status){case"pending":throw t;case"rejected":throw t.reason;case"fulfilled":return t.value}},m=r(20208),f=r(26235),j=r(33736),v=Symbol.for("apollo.skipToken");function y(e,t){var r,a,s,n;return void 0===t&&(t=Object.create(null)),(r=g,(n=(s=(a=(0,d.x)("object"==typeof t?t.client:void 0).queryManager)&&a[h])&&s.useSuspenseQuery)?n(r):r)(e,t)}function g(e,t){var r,n,o,c,h,x,y,g=(0,d.x)(t.client),Z=(0,f.Y)(g),w=(h=(r={client:g,query:e,options:t}).client,x=r.query,y=r.options,n=function(){if(y===v)return{query:x,fetchPolicy:"standby"};var e,t,r,s,n,l=y.fetchPolicy||(null===(n=h.defaultOptions.watchQuery)||void 0===n?void 0:n.fetchPolicy)||"cache-first",o=(0,a.pi)((0,a.pi)({},y),{fetchPolicy:l,query:x,notifyOnNetworkStatusChange:!1,nextFetchPolicy:void 0});return!1!==globalThis.__DEV__&&(t=o.query,r=o.fetchPolicy,s=o.returnPartialData,(0,u.Vp)(t,u.n_.Query),void 0===(e=r)&&(e="cache-first"),(0,i.kG)(["cache-first","network-only","no-cache","cache-and-network"].includes(e),58,e),"no-cache"===r&&s&&!1!==globalThis.__DEV__&&i.kG.warn(59)),y.skip&&(o.fetchPolicy="standby"),o},o=[h,y,x],(c=s.useRef()).current&&(0,m.D)(c.current.deps,o)||(c.current={value:n(),deps:o}),c.current.value),P=w.fetchPolicy,_=w.variables,N=t.queryKey,k=(0,a.ev)([e,(0,j.B)(_)],[].concat(void 0===N?[]:N),!0),q=Z.getQueryRef(k,function(){return g.watchQuery(w)}),D=s.useState([q.key,q.promise]),S=D[0],C=D[1];S[0]!==q.key&&(S[0]=q.key,S[1]=q.promise);var A=S[1];q.didChangeOptions(w)&&(S[1]=A=q.applyOptions(w)),s.useEffect(function(){var e=q.retain(),t=q.listen(function(e){C([q.key,e])});return function(){t(),e()}},[q]);var M=s.useMemo(function(){var e=b(q.result);return{loading:!1,data:q.result.data,networkStatus:e?l.Ie.error:l.Ie.ready,error:e}},[q.result]),Q="standby"===P?M:p(A),T=s.useCallback(function(e){var t=q.fetchMore(e);return C([q.key,q.promise]),t},[q]),E=s.useCallback(function(e){var t=q.refetch(e);return C([q.key,q.promise]),t},[q]),O=q.observable.subscribeToMore;return s.useMemo(function(){return{client:g,data:Q.data,error:b(Q),networkStatus:Q.networkStatus,fetchMore:T,refetch:E,subscribeToMore:O}},[g,T,E,Q,O])}function b(e){return(0,c.O)(e.errors)?new o.cA({graphQLErrors:e.errors}):e.error}},76049:(e,t,r)=>{"use strict";r.d(t,{Vp:()=>u,n_:()=>a});var a,s,n=r(67175),i=r(86191),l=r(65910),o=r(54761);function c(e){var t;switch(e){case a.Query:t="Query";break;case a.Mutation:t="Mutation";break;case a.Subscription:t="Subscription"}return t}function d(e){s||(s=new i.s(l.Q.parser||1e3));var t,r,o=s.get(e);if(o)return o;(0,n.kG)(!!e&&!!e.kind,62,e);for(var c=[],d=[],u=[],h=[],x=0,p=e.definitions;x<p.length;x++){var m=p[x];if("FragmentDefinition"===m.kind){c.push(m);continue}if("OperationDefinition"===m.kind)switch(m.operation){case"query":d.push(m);break;case"mutation":u.push(m);break;case"subscription":h.push(m)}}(0,n.kG)(!c.length||d.length||u.length||h.length,63),(0,n.kG)(d.length+u.length+h.length<=1,64,e,d.length,h.length,u.length),r=d.length?a.Query:a.Mutation,d.length||u.length||(r=a.Subscription);var f=d.length?d:u.length?u:h;(0,n.kG)(1===f.length,65,e,f.length);var j=f[0];t=j.variableDefinitions||[];var v={name:j.name&&"Name"===j.name.kind?j.name.value:"data",type:r,variables:t};return s.set(e,v),v}function u(e,t){var r=d(e),a=c(t),s=c(r.type);(0,n.kG)(r.type===t,66,a,a,s)}(function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"})(a||(a={})),d.resetCache=function(){s=void 0},!1!==globalThis.__DEV__&&(0,o.zP)("parser",function(){return s?s.size:0})}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,4471,4674,4366,8522,4313,2825,8077,1994,4723,9074,632,6493,6860,7251,1684,8299],()=>r(19468));module.exports=a})();